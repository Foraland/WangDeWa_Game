window.__require=function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){return r(e[a][1][t]||t)},l,l.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<o.length;a++)r(o[a]);return r}({AM:[function(t,e,n){"use strict";cc._RF.push(e,"91468xCrk9Jx4hBveg9mdsx","AM");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.AM=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(t,e,n,o,r){this._timer=0,this._index=0,this._deleted=!1,this.sprite=t,this.frames=e,this.sample=n,this.call=o,this.isLoop=r,this._timer=0,this._index=0,this._deleted=!1}),u=function(t){this.animState=null,this.animSpeed=1,this.scaled=!0,this.animCom=t},l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return r(e,t),n=e,e.play=function(t,e,n,o){void 0===n&&(n=1),void 0===o&&(o=!0);var r,i=t.play(e);i||console.error("\u52a8\u753b\u540d\u4e0d\u5b58\u5728\uff01\u8bf7\u68c0\u67e5",t.node.name,"\u4e2d\u7684\u52a8\u753b\u540d\uff1a",e),this.animMap.has(t)?((r=this.animMap.get(t)).animState=i,r.animSpeed=n,r.scaled=o,i.speed=r.scaled?this.animTimeScale*r.animSpeed:r.animSpeed):((r=new u(t)).animState=i,r.animSpeed=n,r.scaled=o,this.animMap.set(t,r),i.speed=r.scaled?this.animTimeScale*r.animSpeed:r.animSpeed)},e.setSpeed=function(t,e){if(this.animMap.has(t)){var n=this.animMap.get(t);n.animSpeed=e,n.animState.speed=n.scaled?this.animTimeScale*n.animSpeed:n.animSpeed}},e.updateScale=function(t){var e=this;this.animTimeScale=t,this.animMap.forEach(function(t){t.animState.speed=t.scaled?e.animTimeScale*t.animSpeed:t.animSpeed})},e.playFrames=function(t,e,n,o,r){if(void 0===n&&(n=60),void 0===r&&(r=!1),0!=e.length){this.frameAnimMap.has(t)&&(this.frameAnimMap.get(t)._deleted=!0);var i=new c(t,e,n,o,r);t.spriteFrame=e[0],this.frameAnimMap.set(t,i)}else t.spriteFrame=null},e.stopFrames=function(t){this.frameAnimMap.has(t)&&this.frameAnimMap.delete(t)},e.clearFramesAnim=function(t){this.frameAnimMap.delete(t)},e.getAnimState=function(t){var e;return null===(e=this.animMap.get(t))||void 0===e?void 0:e.animState},e.prototype.update=function(t){t*=n.animTimeScale;var e=[];n.frameAnimMap.forEach(function(n){n._timer+=t;var o=1/n.sample;if(n._timer>=o){if(n._timer-=o,n._index++,n._index>=n.frames.length&&!n.isLoop)return void e.push(n);n._index>=n.frames.length&&n.isLoop&&(n._index=n._index%n.frames.length),n.sprite.spriteFrame=n.frames[n._index]}}),e.forEach(function(t){n.frameAnimMap.delete(t.sprite),t.call&&t.call()})},e.animMap=new Map,e.frameAnimMap=new Map,e.animTimeScale=1,n=i([s],e)}(cc.Component);n.AM=l,window.AM=l,cc._RF.pop()},{}],AnimatorAnimation:[function(t,e,n){"use strict";cc._RF.push(e,"dd8ceFOexxNd4zNSoUeuKCn","AnimatorAnimation");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,u=(s.property,s.requireComponent),l=s.disallowMultiple,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._animation=null,e._animState=null,e._wrapModeMap=new Map,e}return r(e,t),e.prototype.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._animation=this.getComponent(cc.Animation),this._animation.on(cc.Animation.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(cc.Animation.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),this._animation=this.getComponent(cc.Animation),this._animation.on(cc.Animation.EventType.FINISHED,this.onAnimFinished,this),this._animation.on(cc.Animation.EventType.LASTFRAME,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.playAnimation=function(t,e){t&&(this._animState=this._animation.play(t),this._animState&&(this._wrapModeMap.has(this._animState)||this._wrapModeMap.set(this._animState,this._animState.wrapMode),this._animState.wrapMode=e?cc.WrapMode.Loop:this._wrapModeMap.get(this._animState)))},e.prototype.scaleTime=function(t){this._animState&&(this._animState.speed=t)},i([c,l,u(cc.Animation)],e)}(a.default);n.default=p,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorBase:[function(t,e,n){"use strict";cc._RF.push(e,"fcb57wXRiJPxr3O0twteSO5","AnimatorBase");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AnimatorController"),s=cc._decorator,c=s.ccclass,u=s.property,l=s.executionOrder,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.AssetRawUrl=null,e.PlayOnStart=!0,e.AutoUpdate=!0,e._hasInit=!1,e._ac=null,e._stateLogicMap=null,e._onStateChangeCall=null,e._animationPlayer=null,e._extraMulti=1,e}return r(e,t),Object.defineProperty(e.prototype,"extraMulti",{get:function(){return this._extraMulti},set:function(t){this._extraMulti!==t&&(this._extraMulti=t,this.updatePlaySpeed())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStateName",{get:function(){return this._ac.curState.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curStateMotion",{get:function(){return this._ac.curState.motion},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animComplete",{get:function(){return this._ac.animComplete},enumerable:!1,configurable:!0}),e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.initArgs=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){e&&("function"==typeof e?t._onStateChangeCall=e:"object"==typeof e&&(e instanceof Map?t._stateLogicMap=e:(t._animationPlayer=e,t._animationPlayer.setFinishedCallback(t.onAnimFinished,t))))})},e.prototype.updatePlaySpeed=function(){var t=this._ac.curState.speed*this.extraMulti;this._ac.curState.multi&&(t*=this._ac.params.getNumber(this._ac.curState.multi)||1),this.scaleTime(t)},e.prototype.updateAnimator=function(){if(this.updatePlaySpeed(),this._stateLogicMap){var t=this._stateLogicMap.get(this._ac.curState.name);t&&t.onUpdate()}this._ac.updateAnimator()},e.prototype.update=function(){this._hasInit&&this.AutoUpdate&&this.updateAnimator()},e.prototype.manualUpdate=function(){this._hasInit&&!this.AutoUpdate&&this.updateAnimator()},e.prototype.initJson=function(t){this._ac=new a.default(this,t),this._ac.changeState(t.defaultState)},e.prototype.onAnimFinished=function(){this._ac.onAnimationComplete()},e.prototype.playAnimation=function(){},e.prototype.scaleTime=function(){},e.prototype.onStateChange=function(t,e){this.playAnimation(e.motion,e.loop);var n=t?t.name:"";if(this._stateLogicMap){var o=this._stateLogicMap.get(n);o&&o.onExit();var r=this._stateLogicMap.get(e.name);r&&r.onEntry()}this._onStateChangeCall&&this._onStateChangeCall(n,e.name)},e.prototype.setBool=function(t,e){this._ac.params.setBool(t,e)},e.prototype.getBool=function(t){return 0!==this._ac.params.getBool(t)},e.prototype.setNumber=function(t,e){this._ac.params.setNumber(t,e)},e.prototype.getNumber=function(t){return this._ac.params.getNumber(t)},e.prototype.setTrigger=function(t){this._ac.params.setTrigger(t)},e.prototype.resetTrigger=function(t){this._ac.params.resetTrigger(t)},e.prototype.autoTrigger=function(t){this._ac.params.autoTrigger(t)},e.prototype.play=function(t){this._hasInit&&this._ac.play(t)},i([u({type:cc.JsonAsset,tooltip:!1})],e.prototype,"AssetRawUrl",void 0),i([u({tooltip:!1})],e.prototype,"PlayOnStart",void 0),i([u({tooltip:!1})],e.prototype,"AutoUpdate",void 0),i([c,l(-1e3)],e)}(cc.Component);n.default=p,cc._RF.pop()},{"./AnimatorController":"AnimatorController"}],AnimatorCondition:[function(t,e,n){"use strict";var o,r;cc._RF.push(e,"3aabdL+WyJN1aO7cbjORDrr","AnimatorCondition"),Object.defineProperty(n,"__esModule",{value:!0}),n.LogicType=n.ParamType=void 0,function(t){t[t.COMPLETE=0]="COMPLETE",t[t.BOOLEAN=1]="BOOLEAN",t[t.NUMBER=2]="NUMBER",t[t.TRIGGER=3]="TRIGGER",t[t.AUTO_TRIGGER=4]="AUTO_TRIGGER"}(o=n.ParamType||(n.ParamType={})),function(t){t[t.EQUAL=0]="EQUAL",t[t.NOTEQUAL=1]="NOTEQUAL",t[t.GREATER=2]="GREATER",t[t.LESS=3]="LESS",t[t.GREATER_EQUAL=4]="GREATER_EQUAL",t[t.LESS_EQUAL=5]="LESS_EQUAL"}(r=n.LogicType||(n.LogicType={}));var i=function(){function t(t,e){this._ac=null,this._param="",this._value=0,this._logic=r.EQUAL,this._ac=e,this._param=t.param,this._value=t.value,this._logic=t.logic}return t.prototype.getParamName=function(){return this._param},t.prototype.getParamType=function(){return this._ac.params.getParamType(this._param)},t.prototype.check=function(){var t=this.getParamType();if(t===o.BOOLEAN)return this._ac.params.getBool(this._param)===this._value;if(t!==o.NUMBER)return t===o.AUTO_TRIGGER?0!==this._ac.params.getAutoTrigger(this._param):t===o.TRIGGER?0!==this._ac.params.getTrigger(this._param):(cc.error("[AnimatorCondition.check] \u9519\u8bef\u7684type: "+t),!1);var e=this._ac.params.getNumber(this._param);switch(this._logic){case r.EQUAL:return e===this._value;case r.NOTEQUAL:return e!==this._value;case r.GREATER:return e>this._value;case r.LESS:return e<this._value;case r.GREATER_EQUAL:return e>=this._value;case r.LESS_EQUAL:return e<=this._value;default:return!1}},t}();n.default=i,cc._RF.pop()},{}],AnimatorController:[function(t,e,n){"use strict";cc._RF.push(e,"12dbbwsQlBAa7Z8VdYL+ron","AnimatorController"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnimatorParams"),r=t("./AnimatorState"),i=function(){function t(t,e){this._jsonData=null,this._animator=null,this._params=null,this._states=null,this._anyState=null,this._curState=null,this._changeCount=0,this.animCompleteState=null,this.animComplete=!1,this._animator=t,this._jsonData=e,this._states=new Map,this._params=new o.default(e.parameters),this.init(e)}return Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),t.prototype.init=function(t){if(t.states.length<=0)cc.error("[AnimatorController.init] \u72b6\u6001\u673ajson\u9519\u8bef");else{this._anyState=new r.default(t.anyState,this);for(var e=0;e<t.states.length;e++){var n=new r.default(t.states[e],this);this._states.set(n.name,n)}}},t.prototype.updateState=function(){this._curState.checkAndTrans(),this._curState!==this._anyState&&null!==this._anyState&&this._anyState.checkAndTrans()},t.prototype.updateAnimator=function(){this._changeCount=0,this.updateState(),this.animComplete&&this.animCompleteState.loop&&(this.animComplete=!1),this.params.resetAllAutoTrigger()},t.prototype.onAnimationComplete=function(){this.animComplete=!0,this.animCompleteState=this._curState},t.prototype.play=function(t){if(this._states.has(t)){this.animComplete=!1;var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},t.prototype.changeState=function(t){if(this._changeCount++,this._changeCount>1e3)cc.error("[AnimatorController.changeState] error: \u72b6\u6001\u5207\u6362\u9012\u5f52\u8c03\u7528\u8d85\u8fc71000\u6b21\uff0ctransition\u8bbe\u7f6e\u53ef\u80fd\u51fa\u9519!");else if(!this._states.has(t)||null!==this._curState&&this._curState.name===t)cc.error("[AnimatorController.changeState] error state: "+t);else{var e=this._curState;this._curState=this._states.get(t),this._animator.onStateChange(e,this._curState),this.updateState()}},t}();n.default=i,cc._RF.pop()},{"./AnimatorParams":"AnimatorParams","./AnimatorState":"AnimatorState"}],AnimatorCustomization:[function(t,e,n){"use strict";cc._RF.push(e,"b1e26Sb95tMAJIdBDjsRnoG","AnimatorCustomization");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,u=s.property,l=(s.requireComponent,s.disallowMultiple),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PlayOnStart=!1,e}return r(e,t),e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.playAnimation=function(t,e){this._animationPlayer&&t&&this._animationPlayer.playAnimation(t,e)},e.prototype.scaleTime=function(t){this._animationPlayer&&this._animationPlayer.scaleTime(t)},i([u({override:!0,visible:!1})],e.prototype,"PlayOnStart",void 0),i([c,l],e)}(a.default);n.default=p,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorDragonBones:[function(t,e,n){"use strict";cc._RF.push(e,"1ac36L8hxZG6pjG+bsE+/CE","AnimatorDragonBones");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,u=(s.property,s.requireComponent),l=s.disallowMultiple,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dragonBones=null,e}return r(e,t),e.prototype.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._dragonBones=this.getComponent(dragonBones.ArmatureDisplay),this._dragonBones.addEventListener(dragonBones.EventObject.COMPLETE,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),this._dragonBones=this.getComponent(dragonBones.ArmatureDisplay),this._dragonBones.addEventListener(dragonBones.EventObject.COMPLETE,this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.playAnimation=function(t,e){t&&this._dragonBones.playAnimation(t,e?0:-1)},e.prototype.scaleTime=function(t){this._dragonBones.timeScale=t},i([c,l,u(dragonBones.ArmatureDisplay)],e)}(a.default);n.default=p,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorParams:[function(t,e,n){"use strict";cc._RF.push(e,"bd149UxSfZOtqumtzcbiCTF","AnimatorParams"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnimatorCondition"),r=function(){function t(t){var e=this;this._paramMap=new Map,t.forEach(function(t){var n={type:t.type,value:t.init};e._paramMap.set(t.param,n)})}return t.prototype.getParamType=function(t){var e=this._paramMap.get(t);return e?e.type:null},t.prototype.setNumber=function(t,e){var n=this._paramMap.get(t);n&&n.type===o.ParamType.NUMBER&&(n.value=e)},t.prototype.setBool=function(t,e){var n=this._paramMap.get(t);n&&n.type===o.ParamType.BOOLEAN&&(n.value=e?1:0)},t.prototype.setTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===o.ParamType.TRIGGER&&(e.value=1)},t.prototype.resetTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===o.ParamType.TRIGGER&&(e.value=0)},t.prototype.autoTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===o.ParamType.AUTO_TRIGGER&&(e.value=1)},t.prototype.resetAutoTrigger=function(t){var e=this._paramMap.get(t);e&&e.type===o.ParamType.AUTO_TRIGGER&&(e.value=0)},t.prototype.resetAllAutoTrigger=function(){this._paramMap.forEach(function(t){t.type===o.ParamType.AUTO_TRIGGER&&(t.value=0)})},t.prototype.getNumber=function(t){var e=this._paramMap.get(t);return e&&e.type===o.ParamType.NUMBER?e.value:0},t.prototype.getBool=function(t){var e=this._paramMap.get(t);return e&&e.type===o.ParamType.BOOLEAN?e.value:0},t.prototype.getTrigger=function(t){var e=this._paramMap.get(t);return e&&e.type===o.ParamType.TRIGGER?e.value:0},t.prototype.getAutoTrigger=function(t){var e=this._paramMap.get(t);return e&&e.type===o.ParamType.AUTO_TRIGGER?e.value:0},t}();n.default=r,cc._RF.pop()},{"./AnimatorCondition":"AnimatorCondition"}],AnimatorSpineSecondary:[function(t,e,n){"use strict";cc._RF.push(e,"b85bbxD8VJDO6ERQbRHqxxc","AnimatorSpineSecondary");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./AnimatorSpine"),s=t("./core/AnimatorBase"),c=cc._decorator,u=c.ccclass,l=c.property,p=c.requireComponent,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TrackIndex=1,e._main=null,e._spine=null,e}return r(e,t),e.prototype.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(sp.Skeleton),this._main=this.getComponent(a.default),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),this._spine=this.getComponent(sp.Skeleton),this._main=this.getComponent(a.default),this._main.addSecondaryListener(this.onAnimFinished,this),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.playAnimation=function(t,e){t?this._spine.setAnimation(this.TrackIndex,t,e):this._spine.clearTrack(this.TrackIndex)},i([l({tooltip:!1})],e.prototype,"TrackIndex",void 0),i([u,p(sp.Skeleton)],e)}(s.default);n.default=f,cc._RF.pop()},{"./AnimatorSpine":"AnimatorSpine","./core/AnimatorBase":"AnimatorBase"}],AnimatorSpine:[function(t,e,n){"use strict";cc._RF.push(e,"cc8acLFW2lPRaGyrdIrXtiB","AnimatorSpine");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/AnimatorBase"),s=cc._decorator,c=s.ccclass,u=(s.property,s.requireComponent),l=s.disallowMultiple,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._spine=null,e._completeListenerMap=new Map,e._secondaryListenerMap=new Map,e}return r(e,t),e.prototype.start=function(){this.PlayOnStart&&!this._hasInit&&(this._hasInit=!0,this._spine=this.getComponent(sp.Skeleton),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.onInit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.PlayOnStart||this._hasInit||(this._hasInit=!0,this.initArgs.apply(this,t),this._spine=this.getComponent(sp.Skeleton),this._spine.setCompleteListener(this.onSpineComplete.bind(this)),null!==this.AssetRawUrl&&this.initJson(this.AssetRawUrl.json))},e.prototype.onSpineComplete=function(t){0===t.trackIndex&&this.onAnimFinished(),this._completeListenerMap.forEach(function(e,n){e?n.call(e,t):n(t)}),this._secondaryListenerMap.forEach(function(e,n){t.trackIndex===e.TrackIndex&&n.call(e,t)})},e.prototype.playAnimation=function(t,e){t?this._spine.setAnimation(0,t,e):this._spine.clearTrack(0)},e.prototype.scaleTime=function(t){this._spine.timeScale=t},e.prototype.addSecondaryListener=function(t,e){this._secondaryListenerMap.set(t,e)},e.prototype.addCompleteListener=function(t,e){void 0===e&&(e=null),this._completeListenerMap.has(t)||this._completeListenerMap.set(t,e)},e.prototype.removeCompleteListener=function(t){this._completeListenerMap.delete(t)},e.prototype.clearCompleteListener=function(){this._completeListenerMap.clear},i([c,l,u(sp.Skeleton)],e)}(a.default);n.default=p,cc._RF.pop()},{"./core/AnimatorBase":"AnimatorBase"}],AnimatorStateLogic:[function(t,e,n){"use strict";cc._RF.push(e,"23df8tnWxNGyrVBMf9AR6lf","AnimatorStateLogic"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.onEntry=function(){},t.prototype.onUpdate=function(){},t.prototype.onExit=function(){},t}();n.default=o,cc._RF.pop()},{}],AnimatorState:[function(t,e,n){"use strict";cc._RF.push(e,"50c66ljdlBMqpd53Edy+EfD","AnimatorState"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnimatorTransition"),r=function(){function t(t,e){this._name="",this._motion="",this._loop=!1,this._speed=1,this._multi="",this._transitions=[],this._ac=null,this._name=t.state,this._motion=t.motion||"",this._loop=t.loop||!1,this._speed=t.speed||1,this._multi=t.multiplier||"",this._ac=e;for(var n=0;n<t.transitions.length;n++){var r=new o.default(t.transitions[n],e);r.isValid()&&this._transitions.push(r)}}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"motion",{get:function(){return this._motion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multi",{get:function(){return this._multi},enumerable:!1,configurable:!0}),t.prototype.checkAndTrans=function(){for(var t=0;t<this._transitions.length;t++){var e=this._transitions[t];if(e&&e.check())return void e.doTrans()}},t}();n.default=r,cc._RF.pop()},{"./AnimatorTransition":"AnimatorTransition"}],AnimatorTransition:[function(t,e,n){"use strict";cc._RF.push(e,"25106KbpEVOA4QapAxzF6/x","AnimatorTransition"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AnimatorCondition"),r=function(){function t(t,e){this._toStateName="",this._hasExitTime=!1,this._conditions=[],this._ac=null,this._toStateName=t.toState,this._hasExitTime=t.hasExitTime,this._ac=e;for(var n=0;n<t.conditions.length;n++){var r=new o.default(t.conditions[n],e);this._conditions.push(r)}}return t.prototype.isValid=function(){return this._hasExitTime||this._conditions.length>0},t.prototype.check=function(){if(this._toStateName===this._ac.curState.name)return!1;if(this._hasExitTime&&(this._ac.curState!==this._ac.animCompleteState||!this._ac.animComplete))return!1;for(var t=0;t<this._conditions.length;t++)if(!this._conditions[t].check())return!1;return!0},t.prototype.doTrans=function(){this._hasExitTime&&(this._ac.animComplete=!1);for(var t=0;t<this._conditions.length;t++){var e=this._conditions[t].getParamType(),n=this._conditions[t].getParamName();e===o.ParamType.TRIGGER?this._ac.params.resetTrigger(n):e===o.ParamType.AUTO_TRIGGER&&this._ac.params.resetAutoTrigger(n)}this._ac.changeState(this._toStateName)},t}();n.default=r,cc._RF.pop()},{"./AnimatorCondition":"AnimatorCondition"}],BackpackCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"2702d2WNmBIuZ6KsfY0EkV2","BackpackCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Game/Game"),s=t("../Managers/AM"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.colorTween=null,e}return r(e,t),Object.defineProperty(e.prototype,"anim",{get:function(){return this.getComponent(cc.Animation)},enumerable:!1,configurable:!0}),e.prototype.addOre=function(t){var e,n=this;void 0===t&&(t=3),a.Game.map.floatItem(t),s.AM.play(this.anim,"backSparkle"),null===(e=this.colorTween)||void 0===e||e.stop(),this.numLbl.node.color=cc.Color.WHITE,this.colorTween=cc.tween(this.numLbl.node).to(.2,{color:cc.Color.BLACK}).call(function(){return n.colorTween=null}).start(),this.refresh()},e.prototype.refresh=function(){this.numLbl.string=a.Game.Ins.oreNum.toString()},i([l(cc.Label)],e.prototype,"numLbl",void 0),i([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Game/Game":"Game","../Managers/AM":"AM"}],BlockObj:[function(t,e,n){"use strict";cc._RF.push(e,"6e787+qHXxCEa4090k8RlMt","BlockObj"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.block=t}return t.prototype.init=function(){},t.prototype.digged=function(){},t}();n.default=o,cc._RF.pop()},{}],Block:[function(t,e,n){"use strict";cc._RF.push(e,"12155ex9ZVDlL1n7mLVQmT7","Block");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EBlockType=void 0;var c,u=t("../Const"),l=t("../Controller/Crack"),p=t("../Managers/PoolManager"),f=t("../Managers/Res"),h=t("../Managers/SoundManager"),d=t("../Utils/CocosExtension"),m=t("./Game"),y=t("./Objects/EmptyObj"),g=t("./Objects/LavaObj"),v=t("./Objects/OreObj"),_=cc._decorator,b=_.ccclass,w=_.property;(function(t){t[t.none=0]="none",t[t.ore=1]="ore",t[t.lava=2]="lava"})(c=n.EBlockType||(n.EBlockType={}));var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLeft=!1,e.layer=0,e.crack=[],e.crackSprites=[],e.wallSprites=[],e.objs=null,e.type=c.none,e}return r(e,t),e.prototype.init=function(t,e){var n;return a(this,void 0,void 0,function(){return s(this,function(){switch(this.isLeft=t,this.layer=e,this.node.scaleX=t?1:-1,this.wallSprites=f.default.Ins.getThemeSprites(config.ThemeType.Objects,u.ThemeConst.wallSprites),this.wallSprite.spriteFrame=d.randomElement(this.wallSprites),this.type){case c.ore:this.objs=new v.default(this);break;case c.lava:this.objs=new g.default(this);break;case c.none:this.objs=new y.default(this)}return this.crack=[],null===(n=this.objs)||void 0===n||n.init(),[2]})})},e.prototype.digged=function(){var t;h.SM.playEffect(h.SoundType.Dig),this.isLeft?m.Game.map.shakeLeft():m.Game.map.shakeRight(),null===(t=this.objs)||void 0===t||t.digged()},e.prototype.createCrack=function(t){void 0===t&&(t=!1);var e=p.PM.Get(f.default.Ins.getPrefab("crack")).getComponent(l.default);this.crack.push(e),e.node.parent=this.node,e.node.position=cc.v3(),e.init(f.default.Ins.getThemeSprite(config.ThemeType.Objects,t?u.ThemeConst.crack2:u.ThemeConst.crack))},e.prototype.clear=function(){this.crack.forEach(function(t){return p.PM.Put(t.node)}),this.crack=[],p.PM.Put(this.node),this.crack=null},i([w(cc.Sprite)],e.prototype,"wallSprite",void 0),i([w(cc.Sprite)],e.prototype,"objSprite",void 0),i([w(cc.SpriteFrame)],e.prototype,"crackSprites",void 0),i([b],e)}(cc.Component);n.default=P,cc._RF.pop()},{"../Const":"Const","../Controller/Crack":"Crack","../Managers/PoolManager":"PoolManager","../Managers/Res":"Res","../Managers/SoundManager":"SoundManager","../Utils/CocosExtension":"CocosExtension","./Game":"Game","./Objects/EmptyObj":"EmptyObj","./Objects/LavaObj":"LavaObj","./Objects/OreObj":"OreObj"}],CameraCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"6e884NiZAlH64zvqepH11En","CameraCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){var e=t.call(this)||this;return n._instance=e,e}var n;return r(e,t),n=e,Object.defineProperty(e,"Ins",{get:function(){return this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"camera",{get:function(){return this.getComponent(cc.Camera)},enumerable:!1,configurable:!0}),e.prototype.scale=function(){var t=this;this.camera.zoomRatio=1.02,cc.tween(this.camera).delay(.1).call(function(){return t.camera.zoomRatio=1}).start()},n=i([s],e)}(cc.Component));n.default=c,cc._RF.pop()},{}],CocosExtension:[function(t,e,n){"use strict";cc._RF.push(e,"ea6b8LDqilORpoW3ku2Fm8i","CocosExtension");var o,r,i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};function u(t){return a(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e,n){cc.assetManager.loadBundle(t,{version:""},function(t,o){t?(console.error("loadBundle error",t),n()):e(o)})})]})})}function l(t,e){return a(this,void 0,Promise,function(){var n,o,r,i;return s(this,function(a){switch(a.label){case 0:if(!e)return[2,null];n=["resources","artres"],o=0,a.label=1;case 1:return o<n.length?(r=n[o],[4,p(t,e,r)]):[3,4];case 2:if(null!=(i=a.sent()))return[2,i];a.label=3;case 3:return o++,[3,1];case 4:return console.warn("loadRes err",e),[2,null]}})})}function p(t,e,n){return a(this,void 0,Promise,function(){var o=this;return s(this,function(){return[2,new Promise(function(r){return a(o,void 0,void 0,function(){var o,i;return s(this,function(a){switch(a.label){case 0:return null!=(o=h(t,e,n))?(r(o),[2]):(i=cc.assetManager.getBundle(n))?[3,2]:[4,u(n)];case 1:i=a.sent(),a.label=2;case 2:return i.getInfoWithPath(e)?i.load(e,t,function(t,e){r(t?null:e)}):r(null),[2]}})})})]})})}function f(t,e,n){return a(this,void 0,Promise,function(){var o=this;return s(this,function(){return[2,new Promise(function(r){return a(o,void 0,void 0,function(){var o;return s(this,function(i){switch(i.label){case 0:return null!=h(t,e,n)?(r(!0),[2]):(o=cc.assetManager.getBundle(n))?[3,2]:[4,u(n)];case 1:o=i.sent(),i.label=2;case 2:return o.getInfoWithPath(e)?o.preload(e,t,function(t){r(!t)}):r(null),[2]}})})})]})})}function h(t,e,n){if(!e)return null;var o=d(t,e,n);return o&&cc.assetManager.assets.get(o)||null}function d(t,e,n){var o=cc.assetManager.bundles;if(o.has(n)){var r=o.get(n),i=r.getInfoWithPath(e,t);if(i&&i.redirect){if(!o.has(i.redirect))throw new Error("you need to load bundle "+i.redirect+" first");i=(r=o.get(i.redirect)).getAssetInfo(i.uuid)}return i?i.uuid:null}}function m(t,e){if(void 0===e&&(e=o.BorderScale),t.node&&t.spriteFrame&&e!=o.None){t.sizeMode!=cc.Sprite.SizeMode.CUSTOM&&console.warn("scaleImage sizemode error,node name:"+t.node.name),t.trim=!1;var n=t.spriteFrame.getOriginalSize(),r=t.node.width,i=t.node.height,a=r/n.width,s=i/n.height,c=e==o.BorderScale?Math.min(a,s):Math.max(a,s);t.node.scaleX=c*n.width/r,t.node.scaleY=c*n.height/i}}Object.defineProperty(n,"__esModule",{value:!0}),n.formatMinuteUnit=n.formatHour=n.formatTimeHMS=n.formatTimeHMS_str=n.formatNumberDot=n.formatLongName=n.formatStrEnter=n.getBit=n.getDeltaTime=n.randomByWeight=n.shuffle=n.switchMatt=n.rangeValue=n.randomNumber=n.randomInt=n.invokeCallback=n.updateNow=n.convertPosition=n.toParent=n.seedRandomInt=n.seedRandom=n.scaleImage=n.findConfig=n.loadRemote=n.loadImage=n.loadSpine=n.compareVersion=n.path2uuid=n.loadNode=n.getRes=n.preloadBundleRes=n.loadBundleRes=n.preloadRes=n.loadRes=n.preloadBundles=n.loadBundle=n.isSameDay=n.promiseCancelable=n.throttle=n.getChoice=n.hasStr=n.TransPos2=n.TransPos=n.randomElement=n.delay=n.initResLoader=n.Direction=n.dir2crd=n.FpsMode=n.ImageFillMode=void 0,n.SystemInfo=n.serializable=n.log=n.getUrlParamMap=n.ShakeType=n.getZeroTimeStamp=n.getTimeStamp=n.setDownloaderRemoteAddress=n.weightRandom=n.enumLength=n.inject=n.deepClone=n.clone=n.showNodeDebug=n.showUiDebug=n.changeSpineSlot=n.isIOS=n.isAndroid=n.isWX_AND=n.isWX_IOS=n.isDevelopment=n.isQQ=n.isTT=n.isApp=n.isMiniGame=n.isWeb=n.isWX=n.isValue=n.byteToInt=n.objToMap=n.mapToObj=n.obj2Urlstr=n.isNullEmptyOrSpace=n.uniqueArr=n.removeFromArr=n.segmentFunc=n.randomInts=n.date2BeijingUnixMilli=n.formatTime=n.formateDate=n.zero=n.formatMinute=void 0,function(t){t[t.None=0]="None",t[t.BorderScale=1]="BorderScale",t[t.FullScale=2]="FullScale"}(o=n.ImageFillMode||(n.ImageFillMode={})),function(t){t[t.Auto=-1]="Auto",t[t.High=60]="High",t[t.Low=45]="Low"}(n.FpsMode||(n.FpsMode={})),n.dir2crd=[cc.v2(1,0),cc.v2(1,-1),cc.v2(0,-1),cc.v2(-1,-1),cc.v2(-1,0),cc.v2(-1,1),cc.v2(0,1),cc.v2(1,1)],function(t){t[t.none=-1]="none",t[t.right=0]="right",t[t.rightUp=1]="rightUp",t[t.up=2]="up",t[t.leftUp=3]="leftUp",t[t.left=4]="left",t[t.leftDown=5]="leftDown",t[t.down=6]="down",t[t.rightDown=7]="rightDown"}(n.Direction||(n.Direction={})),n.initResLoader=function(t){r=t},n.delay=function(t){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(e){return setTimeout(function(){return e(null)},t)})]})})},n.randomElement=function(t){return t&&0!=t.length?t[Math.floor(Math.random()*t.length)]:null},n.TransPos=function(t,e,n){return e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(n))},n.TransPos2=function(t,e,n){return e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(n))},n.hasStr=function(t,e){return-1!=t.indexOf(e)},n.getChoice=function(t,e){if(t.length==e.length){var n=0,o=Math.random(),r=0;t.forEach(function(t){return r+=t});for(var i=0;i<t.length;i++){var a=e[i],s=t[i]/r;if(o<=n+s)return a;n+=s}return e[e.length-1]}console.error("\u6982\u7387\u6570\u7ec4\u548c\u5143\u7d20\u6570\u7ec4\u4e0d\u5339\u914d")},n.throttle=function(t,e){var n=null;return function(){var o=this,r=arguments;n||(n=setTimeout(function(){t.apply(o,r),n=null},e))}},n.promiseCancelable=function(t){var e=!1;return{promise:new Promise(function(n,o){t.then(function(t){return e?o({isCanceled:!0}):n(t)}),t.catch(function(t){return o(e?{isCanceled:!0}:t)})}),cancel:function(){e=!0}}},n.isSameDay=function(t,e){return new Date(t).toDateString()==new Date(e).toDateString()},n.loadBundle=u,n.preloadBundles=function(){return a(this,void 0,void 0,function(){var t,e,n,o;return s(this,function(r){switch(r.label){case 0:for(console.warn("preloadBundles start"),t=["gameAsset","remoteAsset"],e=[],n=0;n<t.length;n++)o=t[n],e.push(u(o));return[4,Promise.all(e)];case 1:return r.sent(),console.warn("preloadBundles end"),[2]}})})},n.loadRes=l,n.preloadRes=function(t,e){return a(this,void 0,Promise,function(){var n,o,r,i;return s(this,function(a){switch(a.label){case 0:if(!e)return[2,null];n=["resources","artres"],o=0,a.label=1;case 1:return o<n.length?(r=n[o],[4,f(t,e,r)]):[3,4];case 2:if(null!=(i=a.sent()))return[2,i];a.label=3;case 3:return o++,[3,1];case 4:return console.warn("loadRes err",e),[2,null]}})})},n.loadBundleRes=p,n.preloadBundleRes=f,n.getRes=h,n.loadNode=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return t?[2,new Promise(function(o){return a(n,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return[4,l(cc.Prefab,t)];case 1:return(n=i.sent())?(r=cc.instantiate(n),e&&(r.parent=e),r.position=cc.v3(),r.active=!0,o(r)):o(null),[2]}})})})]:[2,null]})})},n.path2uuid=d,n.compareVersion=function(t,e){t=t.split("."),e=e.split(".");for(var n=Math.max(t.length,e.length);t.length<n;)t.push("0");for(;e.length<n;)e.push("0");for(var o=0;o<n;o++){var r=parseInt(t[o]),i=parseInt(e[o]);if(r>i)return 1;if(r<i)return-1}return 0},n.loadSpine=function(t){return a(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return t?[4,l(sp.SkeletonData,t)]:[2,null];case 1:return[2,e.sent()]}})})},n.loadImage=function(t,e,n,i){return void 0===n&&(n=o.None),void 0===i&&(i=!0),a(this,void 0,void 0,function(){var o;return s(this,function(a){switch(a.label){case 0:return t&&t.node?(i&&(t.spriteFrame=null),t.url=e,[4,l(cc.SpriteFrame,e)]):[2];case 1:return(o=a.sent())&&e&&-1!=t.url.indexOf(o._name)&&t.url==e?t.spriteFrame=o:o||(t.spriteFrame=r),m(t,n),[2]}})})},n.loadRemote=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=!0),a(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(o){if(t){var r=e?{ext:e,cacheEnabled:n}:{cacheEnabled:n};cc.assetManager.loadRemote(t,r,function(t,e){o(t?null:e)})}else o(null)})]})})},n.findConfig=function(t,e){for(var n=0;n<t.length;++n)if(e(t[n]))return t[n];return null},n.scaleImage=m;var y=5;function g(t){return null!=t&&(y=t),(y=(9301*y+49297)%233280)/233280}function v(t,e){var n=cc.v3();return t instanceof cc.Node?t.isValid&&t.parent&&(n=t.parent.convertToWorldSpaceAR(t.position)):n=cc.v3(t.x,t.y),n=e.convertToNodeSpaceAR(n),cc.v2(n.x,n.y)}function _(t,e){return Math.random()*(e-t)+t}function b(t){return{hour:~~(t/3600),min:~~((t%=3600)/60),sec:t%=60}}function w(t){return t>9?t:"0"+t}function P(){return cc.sys.platform===cc.sys.WECHAT_GAME}function S(){return P()||M()||C()}function M(){return!!window.tt}function C(){return!!window.qq}function O(t){var e=new sp.SkeletonTexture;e._image={width:t.width,height:t.height},e.setRealTexture(t);var n=new sp.spine.TextureAtlasRegion;return n.width=t.width,n.height=t.height,n.originalWidth=t.width,n.originalHeight=t.height,n.rotate=!1,n.u=0,n.v=0,n.u2=1,n.v2=1,n.texture=e,n}function I(){var t={},e=0,n={},o=0,r={},i=function(a){if(a&&a.length)for(var s=0;s<a.length;++s){var c=a[s];n[c.name]?n[c.name]++:n[c.name]=1,e++,c.active&&c.isValid&&(c._components&&c._components.forEach(function(e){var n=e.__classname__;t[n]||(t[n]=0),"cc.Label"==n&&(o++,r[c.parent.name]?r[c.parent.name]++:r[c.parent.name]=1),t[n]++}),i(c.children))}};i(cc.director.getScene().children),console.log("\u7c7b\u8be6\u60c5:",t),console.log("\u573a\u666f\u6811\u4e0a\u5171\u6709:"+e+"\u4e2anode"),console.log("\u8282\u70b9\u8be6\u60c5:",n),console.log("\u573a\u666f\u6811\u4e0a\u5171\u6709:"+o+"\u4e2alabel"),console.log("\u6587\u672c\u8be6\u60c5:",r)}function A(t){return JSON.parse(JSON.stringify(t))}n.seedRandom=g,n.seedRandomInt=function(t,e,n){e=e||1,t=t||0;var o=g(n);return Math.floor(t+o*(e-t))},n.toParent=function(t,e){if(e!=t.parent){var n=v(t,e);t.parent=e,t.setPosition(n)}},n.convertPosition=v,n.updateNow=function(t){var e=t.getComponent(cc.Label);if(e)e._forceUpdateRenderData();else{var n=t.getComponent(cc.RichText);if(n)return t._activeInHierarchy=!0,void n._updateRichText();var o=t.getComponent(cc.Layout);o&&o.updateLayout()}},n.invokeCallback=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&"function"==typeof t&&t.apply(null,Array.prototype.slice.call(arguments,1))},n.randomInt=function(t,e){return Math.floor(_(t,e))},n.randomNumber=_,n.rangeValue=function(t,e,n){return t=Math.max(e,t),Math.min(n,t)},n.switchMatt=function(t){return t[0].map(function(e,n){return t.map(function(t){return t[n]})})},n.shuffle=function(t,e){void 0===e&&(e=!1);var n=[];n=e?t:function(t){return t.slice(0)}(t);for(var o,r=0;r<n.length;r++){var i=(0,o=r,Math.floor(Math.random()*(o-0+1)+0)),a=n[r];n[r]=n[i],n[i]=a}return n},n.randomByWeight=function(t,e){if(t.length==e.length){var n=0;e.forEach(function(t){return n+=t});for(var o=Math.random()*n,r=e[0],i=1;i<e.length;i++){if(o<r)return i-1;r+=e[i]}return e.length-1}console.error("\u6743\u91cd\u968f\u673a\u8f93\u5165\u53c2\u6570\u957f\u5ea6\u4e0d\u7b49")},n.getDeltaTime=function(t,e){return t-e},n.getBit=function(t,e){return void 0===e&&(e=1),t.toFixed(e)},n.formatStrEnter=function(t,e,n){void 0===e&&(e=10),void 0===n&&(n=!1);for(var o=n?"<br/>":"\n",r=[],i=0,a=0,s=0;s<t.length;s++)t.charCodeAt(s)>255?i+=2:i++,i>=e&&(r.push(t.slice(a,s)),a=s,i=0);r.push(t.slice(a));for(var c="",u=(s=0,r.length);s<u;s++)c+=r[s],s<u-1&&(c+=o);return c},n.formatLongName=function(t,e){void 0===e&&(e=0);for(var n=0,o=0;o<t.length;o++)if(t.charCodeAt(o)>255?n+=2:n++,n>=e){t=t.slice(0,o+1)+"...";break}return t},n.formatNumberDot=function(t){for(var e=(t||0).toString(),n="";e.length>3;)n=","+e.slice(-3)+n,e=e.slice(0,e.length-3);return e&&(n=e+n),n},n.formatTimeHMS_str=function(t,e,n,o){void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===o&&(o=0);var r=b(t=~~t),i="",a=0;if(r.hour>23&&n){var s=~~(r.hour/24);i+=s+(e?"\u5929":"d"),r.hour-=24*s,a++}return r.hour>0&&(!o||a<o)&&(i+=r.hour+(e?"\u5c0f\u65f6":"h"),a++),r.min>0&&(!o||a<o)&&(i+=r.min+(e?"\u5206\u949f":"m"),a++),r.sec>0&&(!o||a<o)&&(i+=r.sec+(e?"\u79d2":"s"),a++),i},n.formatTimeHMS=b,n.formatHour=function(t,e){void 0===e&&(e="second"),"micosecond"==e?t/=36e5:"second"==e?t/=3600:"minute"==e&&(t/=60);var n=(""+t).split(".");return n[0]+"."+(n[1]?n[1].substr(0,2):"0")},n.formatMinuteUnit=function(t,e){void 0===e&&(e=!1);var n=~~((t=~~t)/3600);e&&(t%=3600);var o=~~(t/60),r=t%60,i="";return e&&n>0&&(i+=n+"h"),o>0&&(i+=o+"m"),r>0&&(i+=r+"s"),i},n.formatMinute=function(t,e){void 0===e&&(e=!1);var n=~~((t=~~t)/3600);e&&(t%=3600);var o=~~(t/60),r=t%60,i="";return e&&(n<10&&(i+="0"),i+=n+":"),o<10&&(i+="0"),i+=o+":",r<10&&(i+="0"),i+""+r},n.zero=w,n.formateDate=function(t){var e=t.getFullYear(),n=w(t.getMonth()+1),o=w(t.getDate()),r=w(t.getHours()),i=w(t.getMinutes());return w(t.getSeconds()),e+"/"+n+"/"+o+" "+r+":"+i},n.formatTime=function(t){var e=new Date(t).getTime(),n=(new Date).getTime()-e;if(n<0)return"\u521a\u521a";var o=n/2592e6,r=n/6048e5,i=n/864e5,a=n/36e5,s=n/6e4,c=n/31104e6;return c>=1?Math.floor(c)+"\u5e74\u524d":o>=1?Math.floor(o)+"\u6708\u524d":r>=1?Math.floor(r)+"\u5468\u524d":i>=1?Math.floor(i)+"\u5929\u524d":a>=1?Math.floor(a)+"\u5c0f\u65f6\u524d":s>=1?Math.floor(s)+"\u5206\u949f\u524d":"\u521a\u521a"},n.date2BeijingUnixMilli=function(t){if("number"==typeof t){var e=new Date(t),n=6e4*e.getTimezoneOffset();return e.setTime(e.getTime()+n+288e5),e}return n=6e4*t.getTimezoneOffset(),t.setTime(t.getTime()+n+288e5),t},n.randomInts=function(t,e,n){var o,r=[];return function i(a){for(;a<n;a++){for(var s in o=parseInt(Math.random()*(e-t+1)+t),r)if(r[s]==o){i(a);break}r[a]=o}}(0),r},n.segmentFunc=function(t,e){return t>e?e:t},n.removeFromArr=function(t,e){var n;-1!=(n=t.indexOf(e))&&t.splice(n,1)},n.uniqueArr=function(t){for(var e=[],n={},o=0;o<t.length;o++)n[t[o]]||(n[t[o]]=!0,e.push(t[o]));return e},n.isNullEmptyOrSpace=function(t){return null==t||0==t.replace(/\s/g,"").length},n.obj2Urlstr=function(t){return Object.keys(t).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))}).join("&")},n.mapToObj=function(t){var e=Object.create(null);return t.forEach(function(t,n){e[n]=t}),e},n.objToMap=function(t,e){void 0===e&&(e=!1);var n=new Map;return Object.keys(t).forEach(function(o){e?n.set(parseInt(o),t[o]):n.set(o,t[o])}),n},n.byteToInt=function(t){return(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3]},n.isValue=function(t){return null!=t},n.isWX=P,n.isWeb=function(){return!S()},n.isMiniGame=S,n.isApp=function(){return!1},n.isTT=M,n.isQQ=C,n.isDevelopment=function(){return!1},n.isWX_IOS=function(){return P()&&cc.sys.os===cc.sys.OS_IOS},n.isWX_AND=function(){return P()&&cc.sys.os===cc.sys.OS_ANDROID},n.isAndroid=function(){return cc.sys.os===cc.sys.OS_ANDROID&&!1},n.isIOS=function(){return cc.sys.os===cc.sys.OS_IOS&&!1},n.changeSpineSlot=function(t,e,n){var o=t.findSlot(e),r=n.getTexture(),i=o.getAttachment(),a=O(r);i.region=a,i.setRegion&&i.setRegion(a),i.updateUVs()},n.showUiDebug=I,window.ui_test=I,n.showNodeDebug=function(){var t=cc.director.getScene().getComponentsInChildren(cc.Sprite),e=0,n=[],o={};t.forEach(function(t){return n.push(t.node)}),n.forEach(function(t){o[t.parent.name]?o[t.parent.name]++:o[t.parent.name]=1,e++}),console.log("\u603b\u5171:"+e+"\u4e2a\u8282\u70b9,\u7eb9\u7406\u7236\u8282\u70b9\u8be6\u60c5:",o)},n.clone=A,n.deepClone=function t(e){if(e instanceof Object){var n=Array.isArray(e)?c(e):i({},e);return Reflect.ownKeys(n).forEach(function(o){n[o]=e[o]instanceof Object?t(e[o]):e[o]}),n}},n.inject=function(t,e,n){for(var o in void 0===n&&(n=!0),n&&(e=A(e)),t)e.hasOwnProperty(o)&&(t[o]=e[o])},n.enumLength=function(t){var e=0;for(var n in t)isNaN(Number(n))&&e++;return e},n.weightRandom=function(t){for(var e=[],n=0;n<t.length;n++)for(var o=0;o<t[n];o++)e.push(n);var r=Math.floor(Math.random()*e.length);return e.length?e[r]:-1},n.setDownloaderRemoteAddress=function(t){cc.assetManager.downloader._remoteServerAddress&&(cc.assetManager.downloader._remoteServerAddress=t)},n.getTimeStamp=function(){return(new Date).getTime()},n.getZeroTimeStamp=function(){return new Date((new Date).setHours(0,0,0,0)).getTime()},function(t){t.MEDIUM="medium",t.LIGHT="light",t.HEAVY="heavy"}(n.ShakeType||(n.ShakeType={})),n.getUrlParamMap=function(){if(!location.search&&!location.hash)return null;var t={},e=function(e){for(var n=e.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");t[r[0]]=decodeURIComponent(r[1])}};if(location.hash&&e(location.hash.substr(1)),location.search){var n=location.search.indexOf("?");if(-1!=n){var o=location.search.substr(n+1);e(o=o.split("!")[0])}}return t},n.log=function(t,e){var n=t[e];delete this[e]&&Object.defineProperty(t,e,{get:function(){return console.log("Get "+e+" returned "+n),n},set:function(t){console.log("Set "+e+" to "+t),n=t},enumerable:!0,configurable:!0})},n.serializable=function(t,e){t.constructor.serializeKeys||(t.constructor.serializeKeys=[]),t.constructor.serializeKeys.push(e)};if(n.SystemInfo=function(){},!window.wx){var j=cc._RF.push;cc._RF.push=function(){var t=arguments;setTimeout(function(){try{window[t[2]]=t[0].exports.default||t[0].exports[t[2]]}catch(e){}},0),j.apply(this,t)}}cc._RF.pop()},{}],CocosFixed:[function(t,e){"use strict";cc._RF.push(e,"c95b4+rYJZN64x18o6JhmUf","CocosFixed"),cc._RF.pop()},{}],CocosUINode:[function(t,e,n){"use strict";cc._RF.push(e,"32943yA0RVBGpqZwcwf/z1f","CocosUINode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./UI"),s=cc._decorator,c=s.ccclass,u=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!0,e}return r(e,t),e.prototype.onLoad=function(){a.default.registUI(this.constructor,this),console.log("registUI:"+this.constructor)},e.prototype.show=function(){this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},e.prototype.start=function(){this.active?this.show():this.hide()},i([u],e.prototype,"active",void 0),i([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"./UI":"UI"}],CommonBinder:[function(t,e,n){"use strict";cc._RF.push(e,"24a5f3EDzdHpLzQDxjXbL+6","CommonBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./UI_Reward"),r=t("./UI_coinCom"),i=t("./UI_oreCom"),a=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default)},t}();n.default=a,cc._RF.pop()},{"./UI_Reward":"UI_Reward","./UI_coinCom":"UI_coinCom","./UI_oreCom":"UI_oreCom"}],Const:[function(t,e,n){"use strict";cc._RF.push(e,"bbb74Ke64FGr5XrAk9NX+vX","Const"),Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeConst=n.f=n.energyAdd=n.energyDecay=n.playerLayerOffset=n.blockHei=n.bottomY=n.topY=n.commonFuiPkg=n.fuiPath=void 0,n.fuiPath="fui/",n.commonFuiPkg="Common",n.topY=195,n.bottomY=-190,n.blockHei=35,n.playerLayerOffset=3,n.energyDecay=10,n.energyAdd=5,n.f=function(t){return 1-t/(t+3)},n.ThemeConst={wallSprites:{name:"wall",length:3},goldSprites:{name:"gold",length:3},lavaSprite:"danger",lavaAnimClip:{name:"danger",length:3},crack:"crack",crack2:"crack2",bg:"background",startBG:"startBg",elevatorSprites:{name:"elevator",length:2},playerDigAnim:{name:"dig",length:2},playerIdleAnim:{name:"idle",length:4},rope:"rope"},cc._RF.pop()},{}],Crack:[function(t,e,n){"use strict";cc._RF.push(e,"e217dX8BeNAu56+Fp12jMSf","Crack");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(t){this.sprite.spriteFrame=t,this.node.scale=1.5,cc.tween(this.node).to(.15,{scale:1}).start()},i([c(cc.Sprite)],e.prototype,"sprite",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],DecAnimNode:[function(t,e,n){"use strict";cc._RF.push(e,"a3c58QWZHRHwIY9dmQ6Zly/","DecAnimNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e}return r(e,t),Object.defineProperty(e.prototype,"anim",{get:function(){return this.getComponent(cc.Animation)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.anim.play()},e.prototype.setSprite=function(t){this.sprite.spriteFrame=t},i([c(cc.Sprite)],e.prototype,"sprite",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],DecHeroNode:[function(t,e,n){"use strict";cc._RF.push(e,"b34dbohrUpJdrHIVzVNrOEK","DecHeroNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Const"),u=t("../Managers/AM"),l=t("../Managers/Res"),p=cc._decorator,f=p.ccclass,h=p.property,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(t,e,n){return a(this,void 0,void 0,function(){var o,r;return s(this,function(i){switch(i.label){case 0:return this.minPos=e,this.maxPos=n,this.node.position=cc.v3(this.randPos),[4,l.default.Ins.loadThemes(config.ThemeType.Hero,t)];case 1:return i.sent(),o=this,[4,l.default.Ins.getThemeSprites(config.ThemeType.Hero,c.ThemeConst.playerDigAnim,t)];case 2:return o.digAnim=i.sent(),r=this,[4,l.default.Ins.getThemeSprites(config.ThemeType.Hero,c.ThemeConst.playerIdleAnim,t)];case 3:return r.idleAnim=i.sent(),[2]}})})},e.prototype.anim=function(){var t=this;this.targetPos=cc.v3(this.randPos);var e=this.targetPos.sub(this.node.position).mag()/30;this.rotateAnim.play(),this.spriteNode.spriteFrame=this.idleAnim[0],cc.tween(this.node).to(e,{position:this.targetPos}).call(function(){t.rotateAnim.node.angle=0,t.rotateAnim.stop(),Math.random()<.2?u.AM.playFrames(t.spriteNode,t.digAnim,15,null,!0):u.AM.playFrames(t.spriteNode,t.idleAnim,15,null,!0),cc.tween(t.node).delay(Math.random()+2).call(function(){u.AM.stopFrames(t.spriteNode),t.anim()}).start()}).start()},Object.defineProperty(e.prototype,"randPos",{get:function(){return cc.v2(Math.random()*(this.maxPos.x-this.minPos.x)+this.minPos.x,Math.random()*(this.maxPos.y-this.minPos.y)+this.minPos.y)},enumerable:!1,configurable:!0}),i([h(cc.Sprite)],e.prototype,"spriteNode",void 0),i([h(cc.Animation)],e.prototype,"rotateAnim",void 0),i([f],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../Const":"Const","../Managers/AM":"AM","../Managers/Res":"Res"}],EffectManager:[function(t,e,n){"use strict";cc._RF.push(e,"ed45dn2gGNF0rhTig0ORnha","EffectManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this._maskCtrl=null}return Object.defineProperty(t.prototype,"maskCtrl",{get:function(){return this._maskCtrl},enumerable:!1,configurable:!0}),t.prototype.bindMaskCtrl=function(t){this._maskCtrl=t},t.prototype.unBindMaskCtrl=function(t){this._maskCtrl==t&&(this._maskCtrl=null)},Object.defineProperty(t,"Ins",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!1,configurable:!0}),t.shakeNode=function(t,e){this.shakeNodeMap.has(t)&&(t.stopAction(this.shakeNodeMap.get(t)),t.setPosition(this.nodePos.get(t)),this.shakeNodeMap.delete(t)),e||(e={times:6,duration:.2,amp:10});var n=e.times||6,o=e.duration||.2,r=e.amp||10,i=e.srcPos||t.getPosition();this.nodePos.set(t,i);for(var a=new cc.Vec2,s=[],c=0;c<n;++c)c==n-1?a.x=a.y=0:cc.Vec2.random(a,r),s.push(cc.moveTo(o/n,i.add(a)));var u=t.runAction(cc.sequence(s));this.shakeNodeMap.set(t,u)},t.instance=null,t.shakeNodeMap=new Map,t.nodePos=new Map,t}();n.default=o,window.EM=o,cc._RF.pop()},{}],EmptyObj:[function(t,e,n){"use strict";cc._RF.push(e,"783ccNECkxKP7586pSxYhL2","EmptyObj");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../Game"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){return i(this,void 0,void 0,function(){return a(this,function(){return this.block.objSprite.spriteFrame=null,[2]})})},e.prototype.digged=function(){this.block.createCrack(),s.Game.finishLayer()},e}(t("./BlockObj").default);n.default=c,cc._RF.pop()},{"../Game":"Game","./BlockObj":"BlockObj"}],EventCenter:[function(t,e,n){"use strict";cc._RF.push(e,"44e19m0cXpJG7E+LLMxofUj","EventCenter");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};Object.defineProperty(n,"__esModule",{value:!0}),n.E_InitGame=n.E_ResLoaded=void 0;var s=cc._decorator,c=s.ccclass;s.property,n.E_ResLoaded="ResLoaded",n.E_InitGame="InitMain";var u=function(t){function e(){var e=t.call(this)||this;return null!=n.instance&&n.instance!=e?e:(n.instance=e,e)}var n;return r(e,t),n=e,e.send=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.instance.node).emit.apply(e,a([t],n))},e.on=function(t,e,n){this.instance.node.on(t,e,n)},e.off=function(t,e,n){this.instance.node.off(t,e,n)},e.once=function(t,e,n){this.instance.node.once(t,e,n)},e.instance=null,n=i([c],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],Factory:[function(t,e,n){"use strict";cc._RF.push(e,"bbe25cjXXNGC5Nuk1ZrAqSx","Factory"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Game/Block"),r=t("./Managers/PoolManager"),i=t("./Managers/Res"),a=function(){function t(){}return t.getBlock=function(t){var e=r.PM.Get(i.default.Ins.getPrefab("block")).getComponent(o.default);return e.type=t,e},t}();n.default=a,cc._RF.pop()},{"./Game/Block":"Block","./Managers/PoolManager":"PoolManager","./Managers/Res":"Res"}],FloatItem:[function(t,e,n){"use strict";cc._RF.push(e,"48e75hxATFJ/JYuCq5BBC5l","FloatItem");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Managers/AM"),s=t("../Managers/PoolManager"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anim",{get:function(){return this.getComponent(cc.Animation)},enumerable:!1,configurable:!0}),e.prototype.init=function(t){var e=this;a.AM.play(this.anim,"getOre"),this.anim.clear(),this.anim.once(cc.Animation.EventType.FINISHED,function(){return s.PM.Put(e.node)}),this.lbl.string="+"+t},i([l(cc.Sprite)],e.prototype,"icon",void 0),i([l(cc.Label)],e.prototype,"lbl",void 0),i([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Managers/AM":"AM","../Managers/PoolManager":"PoolManager"}],FuiCom:[function(t,e,n){"use strict";cc._RF.push(e,"50f80Lh4/dGS5oG+aQ8CINN","FuiCom");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Const"),a=t("../ui_gen/Common/CommonBinder"),s=t("../ui_gen/Home/HomeBinder"),c=t("../ui_gen/Mini/MiniBinder"),u=t("./UI"),l=new Map([["Mini",c.default],["Home",s.default],["Common",a.default]]),p=function(){function t(){this._isFuiLoaded=!1,this.isShow=!1,u.default.registUI(this.constructor,this)}return Object.defineProperty(t.prototype,"pkgPath",{get:function(){return""+i.fuiPath+this.pkg.pkgName},enumerable:!1,configurable:!0}),t.prototype.getResUrl=function(t){return fairygui.UIPackage.getItemURL(this.pkg.pkgName,t)},t.prototype.getChild=function(t){var e=this._view.getChild(t);return e||console.error("can't find child "+t+" in "+this.pkg.comName),e},t.prototype.getList=function(t){var e=this._view.getChild(t).asList;return e||console.error("can't find list child "+t+" in "+this.pkg.comName),e},t.clear=function(){this.initGroot=!1},Object.defineProperty(t.prototype,"IsShow",{get:function(){return this.isShow},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isShow=!0,this.refreshShow()},t.prototype.hide=function(){this.isShow=!1,this.refreshShow()},t.prototype.refreshShow=function(){this._isFuiLoaded&&(this._view.visible=this.isShow)},t.prototype.load=function(){return o(this,void 0,void 0,function(){var e=this;return r(this,function(){return[2,new Promise(function(n,o){t.initGroot||(t.initGroot=!0,fgui.GRoot.create(),l.get(e.pkg.pkgName).bindAll()),e.isShow=e.active,e._isFuiLoaded=!1,fgui.UIPackage.loadPackage(e.pkgPath,function(t){if(t)return console.error("\u52a0\u8f7dfui\u5931\u8d25\uff1a",e.pkg.pkgName,e.pkg.comName),void o();e.onUILoaded(),n()})})]})})},t.prototype.clear=function(){this.hide(),u.default.unregistUI(this.constructor),this._view.dispose()},t.prototype.onUILoaded=function(){this._isFuiLoaded=!0,this._view=fgui.UIPackage.createObject(this.pkg.pkgName,this.pkg.comName),this._view.width=fgui.GRoot.inst.width,this._view.height=fgui.GRoot.inst.height,this._view.addRelation(fgui.GRoot.inst,fgui.RelationType.Width),this._view.addRelation(fgui.GRoot.inst,fgui.RelationType.Height),this.onFuiInit(),this.isShow?this.show():this.hide(),fgui.GRoot.inst.addChild(this._view),console.log("load:",this.pkg.comName)},t.prototype.onFuiInit=function(){},t.prototype.update=function(t){this._isFuiLoaded&&this.onUpdate(t)},t.prototype.onUpdate=function(){},t.prototype.onDestroy=function(){this._view.dispose()},t.awaitTrans=function(t){return o(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(e){t.play(function(){e()})})]})})},t.initGroot=!1,t}();n.default=p,cc._RF.pop()},{"../Const":"Const","../ui_gen/Common/CommonBinder":"CommonBinder","../ui_gen/Home/HomeBinder":"HomeBinder","../ui_gen/Mini/MiniBinder":"MiniBinder","./UI":"UI"}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"db58e9Q7ClE4Ziqe8PgYpUW","GameManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../Game/LevelCtrl"),a=t("../UI/FuiCom"),s=t("./AM"),c=t("./EffectManager"),u=t("./EventCenter"),l=t("./Res"),p=t("./SoundManager"),f=t("./StorageManager"),h=function(){function t(){this._timeScale=1,this.pauseFrameTween=null,this.isInited=!1,this.isActiveMusic=!0,this.isActiveSFX=!0}return Object.defineProperty(t.prototype,"coin",{get:function(){return f.default.Get(f.EStorageKey.coin,500)},set:function(t){f.default.Set(f.EStorageKey.coin,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"homeLv",{get:function(){return f.default.Get(f.EStorageKey.homeLevel,1)},set:function(t){f.default.Set(f.EStorageKey.homeLevel,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gameLv",{get:function(){return f.default.Get(f.EStorageKey.gameLevel,1)},set:function(t){f.default.Set(f.EStorageKey.gameLevel,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxScore",{get:function(){return f.default.Get(f.EStorageKey.maxScore,0)},set:function(t){f.default.Set(f.EStorageKey.maxScore,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exp",{get:function(){return f.default.Get(f.EStorageKey.exp,0)},set:function(t){for(var e=this.exp,n=t-e;n>0;){var o=config.Game.getById(this.gameLv).exp;n>=o-e?(n-=o-e,e=0,this.gameLv++):(e+=n,n=0)}f.default.Set(f.EStorageKey.exp,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ore",{get:function(){return f.default.Get(f.EStorageKey.ore,0)},set:function(t){f.default.Set(f.EStorageKey.ore,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"game",{get:function(){return this.scene&&this.scene instanceof i.default?this.scene:(console.error("\u6ca1\u6709\u5f00\u59cb\u6e38\u620f"),null)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Ins",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeScale",{get:function(){return this._timeScale},set:function(t){this._timeScale=t,s.AM.updateScale(t)},enumerable:!1,configurable:!0}),t.prototype.pauseFrame=function(t){var e=this,n={frame:0,time:0};this.pauseFrameTween&&this.pauseFrameTween.stop(),this._timeScale=0,this.pauseFrameTween=cc.tween(n).to(1,{time:1},{progress:function(){n.frame++,n.frame>=t&&(e.pauseFrameTween.stop(),e.pauseFrameTween=null,e._timeScale=1)}}).start()},t.prototype.start=function(){this.isInited=!0,u.default.send(u.E_InitGame)},t.prototype.awaitInited=function(){return o(this,void 0,void 0,function(){var t=this;return r(this,function(){return[2,new Promise(function(e){t.isInited?e():u.default.once(u.E_InitGame,function(){return e()},t)})]})})},t.prototype.switchMusic=function(){this.isActiveMusic=!this.isActiveMusic,p.SM.switchMusic(this.isActiveMusic)},t.prototype.switchSFX=function(){this.isActiveSFX=!this.isActiveSFX,p.SM.switchSfx(this.isActiveSFX)},t.prototype.jumpToHome=function(){return o(this,void 0,void 0,function(){return r(this,function(){return a.default.clear(),cc.director.loadScene("HomeScene"),[2]})})},t.prototype.jumpToGame=function(){a.default.clear(),cc.director.loadScene("GameScene")},t.prototype.enterScene=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.scene=t,c.default.Ins.maskCtrl.setFadeMask(255),[4,l.default.Ins.awaitLoaded()];case 1:return e.sent(),[4,this.scene.load()];case 2:return e.sent(),this.scene.enter(),[4,c.default.Ins.maskCtrl.fadeIn(.2)];case 3:return e.sent(),[2]}})})},t.prototype.exitScene=function(t){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.scene.exit(),this.scene==t&&(this.scene=null),[4,c.default.Ins.maskCtrl.fadeOut(.2)];case 1:return e.sent(),[2]}})})},t.prototype.gameOver=function(){console.error("gameover")},t}();n.default=h,window.GM=h,cc._RF.pop()},{"../Game/LevelCtrl":"LevelCtrl","../UI/FuiCom":"FuiCom","./AM":"AM","./EffectManager":"EffectManager","./EventCenter":"EventCenter","./Res":"Res","./SoundManager":"SoundManager","./StorageManager":"StorageManager"}],Game:[function(t,e,n){"use strict";cc._RF.push(e,"c8ebaJgReZFf7Mknkq8n1jq","Game");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.Game=void 0;var i=t("../Const"),a=t("../Managers/EffectManager"),s=t("../Managers/GameManager"),c=t("../UI/FairyGUi/U_Game"),u=t("../UI/UI"),l=t("./LevelCtrl"),p=function(){function t(){}return Object.defineProperty(t,"player",{get:function(){return s.default.Ins.game.player},enumerable:!1,configurable:!0}),Object.defineProperty(t,"map",{get:function(){return s.default.Ins.game.map},enumerable:!1,configurable:!0}),Object.defineProperty(t,"Ins",{get:function(){return s.default.Ins.game},enumerable:!1,configurable:!0}),t.digRight=function(){if(this.Ins.state!=l.ELevelState.Over){this.player.digTo(!1),this.Ins.tapStart();var t=this.map.playerLayer;this.map.findBlock(t,!1).digged()}},t.digLeft=function(){if(this.Ins.state!=l.ELevelState.Over){this.player.digTo(!0),this.Ins.tapStart();var t=this.map.playerLayer;this.map.findBlock(t,!0).digged()}},t.finishLayer=function(){this.Ins.energy=Math.min(100,this.Ins.energy+i.energyAdd),this.Ins.sparkleBar(),this.map.moveDown(),this.Ins.updateLayer()},t.restart=function(){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,a.default.Ins.maskCtrl.fadeOut(.2)];case 1:return t.sent(),u.default.getUI(c.default).hide(),[4,this.Ins.restartGame()];case 2:return t.sent(),u.default.getUI(c.default).show(),[4,a.default.Ins.maskCtrl.fadeIn(.2)];case 3:return t.sent(),[2]}})})},t}();n.Game=p,window.Game=p,cc._RF.pop()},{"../Const":"Const","../Managers/EffectManager":"EffectManager","../Managers/GameManager":"GameManager","../UI/FairyGUi/U_Game":"U_Game","../UI/UI":"UI","./LevelCtrl":"LevelCtrl"}],"HSDK.survey":[function(t,e,n){"use strict";cc._RF.push(e,"59819+ZCIVBI42HxpMJwfAv","HSDK.survey");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var u,l,p,f=cc._decorator,h=f.ccclass,d=(f.property,f.menu),m=f.disallowMultiple,y={errCode:1e3,errMsg:"\u6682\u65e0\u914d\u7f6e"},g={errCode:1003,errMsg:"\u5b58\u5728\u5fc5\u586b\u9879\u672a\u586b\u5199"},v={errCode:1006,errMsg:"\u5237\u65b0\u5217\u8868\u6570\u636e\u5931\u8d25"},_=null,b=null,w=[],P={Host:"https://comb-active-dev.hortorgames.com/comb-active-server/api/v1/",SurveyList:"questionnaires",SurveyConfig:"questionnaires/config",SurveyPost:"questionnaires/"};window.HSDK_LIST_CONFIG=_,window.HSDK_LIST_DATA=w,function(t){t[t.NoOpen=1]="NoOpen",t[t.PreOpen=3]="PreOpen",t[t.Opening=4]="Opening",t[t.Finished=5]="Finished"}(u||(u={})),function(t){t[t.Pause=1]="Pause",t[t.Activity=2]="Activity"}(l||(l={})),function(t){t[t.Radio=1]="Radio",t[t.CheckBox=2]="CheckBox",t[t.Input=3]="Input"}(p||(p={}));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.panelList=[],e.status=l.Pause,e.currentPanelDetailData={},e.panelForm={uniqueId:"",roleId:"",gameId:"",startTime:0,endTime:0,answers:[],questions:{}},e.questionRelationship={},e.finishCallback=null,e}var n;return r(e,t),n=e,e.prototype.onLoad=function(){n._ins=this;var t=this.node.getChildByName("survey-list-panel");t.active=!1;var e=this.node.getChildByName("survey-detail-panel");e.active=!1;var o=this.node.getChildByName("survey-message-panel");o.active=!1,this.panelList.push(t,e,o)},e.prototype.showPanel=function(t){return s(this,void 0,void 0,function(){var e,o;return c(this,function(r){switch(r.label){case 0:if(r.trys.push([0,4,,5]),this.status===l.Activity)throw I(1001,"\u8bf7\u52ff\u91cd\u590d\u8c03\u7528");if(null==n._scope)throw I(1001,"\u8bf7\u5148\u8c03\u7528\u5e73\u53f0\u767b\u5f55\u65b9\u6cd5");return this.status=l.Activity,t&&(this.finishCallback=t),[4,this.renderListConfig()];case 1:return e=r.sent(),[4,this.renderListData()];case 2:return r.sent(),[4,M(e)];case 3:return r.sent(),this.status=l.Pause,[2,!0];case 4:return o=r.sent(),console.log(o),this.destroyPanel(),this.status=l.Pause,[2,o];case 5:return[2]}})})},e.prototype.renderListConfig=function(){return s(this,void 0,Promise,function(){var t,e,n,o,r,i,a,s,u,p=this;return c(this,function(c){switch(c.label){case 0:return t=this.node.getChildByName("survey-list-panel"),e=t.getComponent(cc.Sprite),n=e,[4,C(_.panelUrl)];case 1:return n.spriteFrame=c.sent(),t.setContentSize(e.spriteFrame.getTexture().width,e.spriteFrame.getTexture().height),o=t.getChildByName("panel-title"),r=o.getComponent(cc.Sprite),i=r,[4,C(_.panelTitleUrl)];case 2:return i.spriteFrame=c.sent(),o.setContentSize(r.spriteFrame.getTexture().width,r.spriteFrame.getTexture().height),a=t.getChildByName("close-btn"),s=a.getComponent(cc.Sprite),u=s,[4,C(_.panelCloseBtnUrl)];case 3:return u.spriteFrame=c.sent(),a.on(cc.Node.EventType.TOUCH_END,function(){t.active=!1,p.node.destroy(),p.status=l.Pause,a.off(cc.Node.EventType.TOUCH_END)}),[2,t]}})})},e.prototype.renderListData=function(){return s(this,void 0,void 0,function(){var t,e,n,o,r,i,a,s,u,l=this;return c(this,function(p){switch(p.label){case 0:if(t=this.node.getChildByName("survey-list-panel"),e=t.getChildByName("survey-table"),(n=e.getComponent(cc.ScrollView)).content.removeAllChildren(),n.scrollToTop(),0===w.length)return e.active=!1,(o=new cc.Node("empty-node")).addComponent(cc.Label).string="\u6682\u65e0\u95ee\u5377",o.color=this.setColor(_.cardTitleColor),t.insertChild(o,99),[2];r=function(e){var o,r,a,s,u,p,f,h,d,m,y,g,v,b,w,P,S;return c(this,function(c){switch(c.label){case 0:return o=t.getChildByName("survey-card-prefab"),(r=cc.instantiate(o)).active=!0,r.attr({key:e.questionnaireId}),r.on(cc.Node.EventType.TOUCH_END,function(){l.currentPanelDetailData=e,l.showSurveyDetailPanel(e)},i),a=r.getComponent(cc.Sprite),[4,C(_.cardBgUrl)];case 1:return a.spriteFrame=c.sent(),s=r.getChildByName("content-table"),u=s.getComponent(cc.ScrollView),p=r.getChildByName("title"),f=p.getComponent(cc.Label),h=r.getChildByName("description"),d=h.getComponent(cc.Label),m=r.getChildByName("time"),y=m.getComponent(cc.Label),g=u.content.getChildByName("rewards"),v=g.getComponent(cc.Label),p.color=i.setColor(_.cardTitleColor),h.color=m.color=g.color=i.setColor(_.cardBodyColor),b=e.basic,w=e.reward,f.string=b.title,d.string=b.description,P=i.numToDate(b.to),y.string="\u7ed3\u675f\u65f6\u95f4: "+P,w&&(v.string="\u5b8c\u6210\u5956\u52b1: "+w.map(function(t){return t.name+"*"+t.num}).join("\u3001")),S=r.getChildByName("entry-btn").getComponent(cc.Sprite),[4,C(_.panelEntryBtnUrl)];case 2:return S.spriteFrame=c.sent(),n.content.insertChild(r,n.content.childrenCount),[2]}})},i=this,a=0,s=w,p.label=1;case 1:return a<s.length?(u=s[a],[5,r(u)]):[3,4];case 2:p.sent(),p.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.numToDate=function(t){if(!t)return"\u65e0\u9650\u671f";var e=new Date(1e3*t),n=e.getFullYear().toString(),o=(e.getMonth()+1).toString(),r=e.getDate().toString(),i=e.getHours().toString(),a=e.getMinutes().toString();return n+"-"+(1==o.length?"0"+o:o)+"-"+(1==r.length?"0"+r:r)+" "+(1==i.length?"0"+i:i)+":"+(1==a.length?"0"+a:a)},e.prototype.onScrolling=function(t){t.content.children.forEach(function(t){t.opacity=255})},e.prototype.showSurveyDetailPanel=function(t){return s(this,void 0,void 0,function(){var e,n,o,r,a,u,l,f,h,d,m,y,g,v,_,w,P,S,I,A,j,T,R,k,E=this;return c(this,function(x){switch(x.label){case 0:return e=t.basic,n=t.reward,o=t.questions,this.panelList.forEach(function(t){t.active=!1}),r=this.node.getChildByName("survey-detail-panel"),a=r.getComponent(cc.Sprite),u=a,[4,C(b.panelUrl)];case 1:return u.spriteFrame=x.sent(),r.setContentSize(a.spriteFrame.getTexture().width,a.spriteFrame.getTexture().height),l=r.getChildByName("panel-title"),(f=l.getComponent(cc.Label)).cacheMode=cc.Label.CacheMode.CHAR,f.string=e.title,l.color=this.setColor(b.panelTitleColor),h=r.getChildByName("detail-table"),d=h.getComponent(cc.ScrollView),(m=d.content.getChildByName("info")).children.forEach(function(t){t.color=E.setColor(b.panelBodyColor)}),y=m.getChildByName("description").getComponent(cc.Label),g=m.getChildByName("time").getComponent(cc.Label),v=m.getChildByName("rewards").getComponent(cc.Label),y.string=e.description,g.string="\u622a\u6b62\u65f6\u95f4: "+this.numToDate(e.to),v.string=n?"\u5b8c\u6210\u5956\u52b1: "+n.map(function(t){return t.name+"*"+t.num}).join("\u3001"):"",_=r.getChildByName("close-btn"),w=_.getComponent(cc.Sprite),P=w,[4,C(b.panelCloseBtnUrl)];case 2:return P.spriteFrame=x.sent(),_.on(cc.Node.EventType.TOUCH_END,function(){r.active=!1,M(E.panelList[0]),_.off(cc.Node.EventType.TOUCH_END)}),S=r.getChildByName("confirm-btn"),I=S.getComponent(cc.Sprite),A=I,[4,C(b.panelConfirmBtnUrl)];case 3:for(A.spriteFrame=x.sent(),S.on(cc.Node.EventType.TOUCH_END,function(){return s(E,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.showSurveyMessagePanel()];case 1:return t.sent(),[2]}})})}),j=d.content.childrenCount,T=0;T<j;++T)0!==T&&d.content.removeChild(d.content.children[1]);return[4,C("https://wxmini-resource.hortorgames.com/background-image/20230711-140158-1689765209.png")];case 4:return R=x.sent(),k={},o.forEach(function(t){var e=t.type,n=e===p.Radio?"radio":e===p.CheckBox?"check-box":"multi-input",o=cc.instantiate(r.getChildByName(n+"-prefab")),a=o.getChildByName("question"),s=a.getChildByName("question-label"),c=t.required?"<color=#FF0000>*</color> "+t.title:""+t.title;if(E.setQuestionNode(s,c,b.quesTitleColor),t.relatedQuestions&&t.relatedQuestions.lastQuestion||E.scheduleOnce(function(){var t=a.getComponent(cc.Graphics),e=s.height;E.setQuestionBg(t,-250,(-e-20)/2,500,e+20,b.quesBgColor)}),t.randOptions){var u=t.options.filter(function(t){return"other"!=(null==t?void 0:t.type)}).map(function(t){return i(i({},t),{randomIndex:Math.random()})}).sort(function(t,e){return t.randomIndex-e.randomIndex}),l=t.options.filter(function(t){return"other"==(null==t?void 0:t.type)});t.options=u.concat(l)}if(e===p.CheckBox){var f=o.getChildByName("option-prefab");f.getChildByName("toggle-group").getChildByName("checkmark").getComponent(cc.Sprite).spriteFrame=R,t.options.forEach(function(e){var n=cc.instantiate(f);if("other"==e.type){var r=n.getChildByName("others-input");r.active=!0;var i=O("handleOtherInput",{questionId:t.questionId,optionId:e.id},E.node);r.getComponent(cc.EditBox).editingDidEnded.push(i)}n.active=!0,E.setOptionLabel(n,e.content);var a=O("handleCheckBoxGroup",{questionId:t.questionId,optionId:e.id},E.node);n.getChildByName("toggle-group").getComponent(cc.Toggle).checkEvents.push(a),o.insertChild(n,o.childrenCount)})}if(e===p.Radio){var h=o.getChildByName("option-group");h.getChildByName("radio-prefab").getChildByName("checkmark").getComponent(cc.Sprite).spriteFrame=R,t.options.forEach(function(e){var n=cc.instantiate(h.getChildByName("radio-prefab"));if(n.active=!0,"other"==e.type){var o=n.getChildByName("other-input");o.active=!0;var r=O("handleOtherInput",{questionId:t.questionId,optionId:e.id},E.node);o.getComponent(cc.EditBox).editingDidEnded.push(r)}E.setOptionLabel(n,e.content),h.insertChild(n,999);var i=O("handleRadioGroup",{questionId:t.questionId,optionId:e.id,option:e},E.node);n.getComponent(cc.Toggle).checkEvents.push(i)})}if(e===p.Input){var m=o.getChildByName("option-input"),y=O("handleInputBox",{questionId:t.questionId},E.node),g=O("handleInputBoxFocus",{questionId:t.questionId},E.node);m.getComponent(cc.EditBox).editingDidEnded.push(y),m.getComponent(cc.EditBox).editingDidBegan.push(g),m.height*=t.lines||1}if(o.qId=t.questionId,o.opacity=0,t.relatedQuestions&&t.relatedQuestions.lastQuestion){var v=t.relatedQuestions;k[v.lastQuestion]||(k[v.lastQuestion]={current:null,children:[]}),k[v.lastQuestion].children.push({type:v.optionType,options:v.options,relatedQuestionId:t.questionId,node:o})}else k[t.questionId]||(k[t.questionId]={current:{},children:[]}),k[t.questionId].current=o,d.content.insertChild(o,999);o.active=!0}),this.questionRelationship=k,this.scheduleOnce(function(){d.scrollToTop(0),E.onScrolling(d)}),this.panelForm.startTime=.001*(new Date).setMilliseconds(0),[4,M(r)];case 5:return x.sent(),[2]}})})},e.prototype.setOptionLabel=function(t,e){var n=t.getChildByName("option-label");n.getComponent(cc.Label).string=e,n.getComponent(cc.Label).cacheMode=cc.Label.CacheMode.CHAR,n.color=this.setColor(b.quesItemColor),this.scheduleOnce(function(){t.height=n.height+10})},e.prototype.handleInputBoxFocus=function(t,e){var n=JSON.parse(e),o=this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView),r=o.content.children.find(function(t){return t.qId==n.questionId});if(r){var i=new cc.Vec2(0,Math.abs(r.y)-r.height/2);o.scrollToOffset(i,.3)}},e.prototype.handleCheckBoxGroup=function(t,e){var n=this,o=JSON.parse(e),r=this.panelForm.answers.find(function(t){return t.questionId==o.questionId});r?t.isChecked?r.answer.push(o.optionId):r.answer.splice(r.answer.findIndex(function(t){return t==o.optionId}),1):this.panelForm.answers.push({questionId:o.questionId,answer:t.isChecked?[o.optionId]:[]});var i=this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView).content,a=this.panelForm.answers.find(function(t){return t.questionId==o.questionId})||{answer:[],questionId:""},s=this.questionRelationship[o.questionId]||{};s.children&&s.children.forEach(function(t){var e=!1;if("all"==t.type){e=!0;for(var r=0;r<t.options.length;r++)if(!a.answer.includes(t.options[r])){e=!1;break}}else if("arbitrary"==t.type)for(r=0;r<a.answer.length;r++)if(t.options.includes(a.answer[r])){e=!0;break}var c;if(c=s.current?s.current.getSiblingIndex():i.children.findIndex(function(t){return t.qId==o.questionId}),e){i.insertChild(t.node,c+1);var u=t.node.getChildByName("question"),l=u.getChildByName("question-label");t.node.opacity=255,n.scheduleOnce(function(){var t=u.getComponent(cc.Graphics),e=l.height;n.setQuestionBg(t,-250,(-e-20)/2,500,e+20,b.quesBgColor)})}else n.handleRemoveChildren(i,t)})},e.prototype.handleRemoveChildren=function(t,e){var n=this;t.removeChild(e.node);var o=this.panelForm.answers.findIndex(function(t){return t.questionId==e.relatedQuestionId});o>-1&&(this.panelForm.answers.splice(o,1),this.questionRelationship[e.relatedQuestionId].children.length>0&&this.questionRelationship[e.relatedQuestionId].children.forEach(function(e){n.handleRemoveChildren(t,e)}))},e.prototype.handleRadioGroup=function(t,e){var n=this,o=JSON.parse(e),r=this.panelForm.answers.find(function(t){return t.questionId==o.questionId});r?r.answer=[o.optionId]:this.panelForm.answers.push({questionId:o.questionId,answer:[o.optionId]});var i=this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView).content,a=this.panelForm.answers.find(function(t){return t.questionId==o.questionId})||{answer:[],questionId:""},s=this.questionRelationship[o.questionId]||{};s.children&&s.children.forEach(function(t){var e=!1;if("all"==t.type){e=!0;for(var r=0;r<t.options.length;r++)if(!a.answer.includes(t.options[r])){e=!1;break}}else if("arbitrary"==t.type)for(r=0;r<a.answer.length;r++)if(t.options.includes(a.answer[r])){e=!0;break}var c;if(c=s.current?s.current.getSiblingIndex():i.children.findIndex(function(t){return t.qId==o.questionId}),e){i.insertChild(t.node,c+1);var u=t.node.getChildByName("question"),l=u.getChildByName("question-label");t.node.opacity=255,n.scheduleOnce(function(){var t=u.getComponent(cc.Graphics),e=l.height;n.setQuestionBg(t,-250,(-e-20)/2,500,e+20,b.quesBgColor)})}else i.removeChild(t.node)})},e.prototype.handleInputBox=function(t,e){var n=JSON.parse(e),o=this.panelForm.answers.find(function(t){return t.questionId==n.questionId});t.string.trim().length>0?o?o.answer=[t.string]:this.panelForm.answers.push({questionId:n.questionId,answer:[t.string]}):o&&(o.answer=[])},e.prototype.handleOtherInput=function(t,e){var n=JSON.parse(e),o=t.string;this.panelForm.questions[n.questionId]||(this.panelForm.questions[n.questionId]={}),this.panelForm.questions[n.questionId][n.optionId]=o},e.prototype.showSurveyMessagePanel=function(){return s(this,void 0,void 0,function(){var t,e,o,r,i,a,u=this;return c(this,function(p){switch(p.label){case 0:if(p.trys.push([0,5,,6]),console.warn("called at",new Date),this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView).content.children.forEach(function(t){var e=t.getChildByName("tip");e&&e.destroy()}),t=this.node.getChildByName("survey-detail-panel").getChildByName("confirm-btn"),!this.checkForm(this.panelForm.answers,this.currentPanelDetailData))throw g;return this.handleOtherOptions(this.panelForm.answers,this.currentPanelDetailData),this.panelForm.uniqueId=n._scope.uniqueId||"",this.panelForm.gameId=n._scope.gameId||"",this.panelForm.endTime=.001*(new Date).setMilliseconds(0),this.panelForm.roleId=n._scope.userId||"",[4,this.postPanelForm(this.panelForm).catch(function(t){var e=t.errMsg?t.errMsg:"\u63d0\u4ea4\u95ee\u5377\u5931\u8d25";throw I(1005,e)})];case 1:return p.sent(),this.finishCallback&&this.finishCallback({questionnaireId:this.currentPanelDetailData.questionnaireId}),t.off(cc.Node.EventType.TOUCH_END),this.panelList.forEach(function(t){t.active=!1}),e=this.node.getChildByName("survey-message-panel"),o=e.getComponent(cc.Sprite),r=e.getChildByName("message-content"),this.currentPanelDetailData.reward&&0!=this.currentPanelDetailData.reward.length||(r.active=!1),i=o,[4,C(_.panelUrl)];case 2:return i.spriteFrame=p.sent(),e.setContentSize(o.spriteFrame.getTexture().width,o.spriteFrame.getTexture().height),[4,M(e)];case 3:return p.sent(),[4,n.getListData().catch(function(){throw v})];case 4:return p.sent(),0===w.length?this.scheduleOnce(function(){u.node.children.map(function(t){t.active=!1}),u.node.destroy(),u.status=l.Pause},1.5):this.scheduleOnce(function(){return s(u,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return this.node.children.map(function(t){t.active=!1}),this.initData(),[4,this.renderListData()];case 1:return e.sent(),t=this.node.getChildByName("survey-list-panel"),M(t),[2]}})})},1.5),[3,6];case 5:return a=p.sent(),console.error(a),[3,6];case 6:return[2]}})})},e.prototype.initData=function(){this.panelForm={uniqueId:"",roleId:"",gameId:"",startTime:0,endTime:0,answers:[],questions:{}},this.currentPanelDetailData={},this.questionRelationship={}},e.prototype.postPanelForm=function(t){return s(this,void 0,void 0,function(){var e=this;return c(this,function(){return[2,new Promise(function(n,o){A({method:"POST",url:P.Host+P.SurveyPost+(e.currentPanelDetailData.questionnaireId+"/answers"),params:t}).then(function(){n(!0)}).catch(o)})]})})},e.prototype.destroyPanel=function(){this.node&&this.node.destroy()},e.prototype.handleOtherOptions=function(t,e){var n=this;e.questions.forEach(function(e){if(3!=e.type){var o=t.findIndex(function(t){return t.questionId==e.questionId});o>-1&&t[o].answer.forEach(function(t){n.panelForm.questions[e.questionId]&&n.panelForm.questions[e.questionId][t]&&(n.panelForm.answers[o].extraText=n.panelForm.questions[e.questionId][t])})}})},e.prototype.checkForm=function(t,e){for(var n=this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView).content,o=function(e){var o=n.children.findIndex(function(t){return t.qId==e.questionId});if(-1==o);else if(2!=e.type&&e.required){if(-1==(s=t.findIndex(function(t){return t.questionId==e.questionId}))||!t[s]||t[s].answer&&0==t[s].answer.length)return r.scrollToTarget(o-1),{value:!1};if(e.required&&(i=t[s].answer.find(function(t){var n;return t===(null===(n=e.options.find(function(t){return t.id&&"other"===t.type}))||void 0===n?void 0:n.id)}))&&(null==(a=new Map(Object.entries(r.panelForm.questions)).get(e.questionId))||!a[i]))return r.scrollToTarget(o-1,"\u300c\u5176\u4ed6\u300d\u9879\u4e5f\u9700\u8981\u586b\u5199\u54e6~"),{value:!1}}else if(2==e.type&&e.maxOptionsAcquired){var i,a,s=t.findIndex(function(t){return t.questionId==e.questionId});if(e.required&&(-1==s||!t[s]||t[s].answer&&t[s].answer.length<e.minOptionsAcquired))return r.scrollToTarget(o-1,"\u8bf7\u81f3\u5c11\u9009\u62e9"+e.minOptionsAcquired+"\u9879"),{value:!1};if(s>-1&&t[s].answer.length>e.maxOptionsAcquired)return r.scrollToTarget(o-1,"\u8bf7\u81f3\u591a\u9009\u62e9"+e.maxOptionsAcquired+"\u9879"),{value:!1};if(e.required&&(i=t[s].answer.find(function(t){var n;return t===(null===(n=e.options.find(function(t){return t.id&&"other"===t.type}))||void 0===n?void 0:n.id)}))&&(null==(a=new Map(Object.entries(r.panelForm.questions)).get(e.questionId))||!a[i]))return r.scrollToTarget(o-1,"\u300c\u5176\u4ed6\u300d\u9879\u4e5f\u9700\u8981\u586b\u5199\u54e6~"),{value:!1}}},r=this,i=0,a=e.questions;i<a.length;i++){var s=o(a[i]);if("object"==typeof s)return s.value}return!0},e.prototype.scrollToTarget=function(t,e){var n=this.node.getChildByName("survey-detail-panel").getChildByName("detail-table").getComponent(cc.ScrollView),o=n.content.children[t+1];if(e){var r=new cc.Node;r.name="tip",r.color=this.setColor("#F10A3D");var i=r.addComponent(cc.Label);i.string=e,i.fontSize=24,i.lineHeight=26,o.insertChild(r,1)}var a=Math.abs(o.y)-o.height/2-100,s=new cc.Vec2(0,a);n.scrollToOffset(s,.3)},e.prototype.onCloseTap=function(t){this.node.getChildByName(t).active=!1},e.prototype.setQuestionNode=function(t,e,n){t.active=!0,t.color=this.setColor(n);var o=t.getComponent(cc.RichText)||t.getComponent(cc.Label);o.enabled=!0,o.cacheMode=cc.Label.CacheMode.CHAR,o.string=e},e.prototype.setQuestionBg=function(t,e,n,o,r,i){t.fillColor=this.setColor(i),t.roundRect(e,n,o,r,10),t.fill()},e.prototype.setColor=function(t){return cc.color.apply(cc,this.hexToRgba(t))},e.prototype.hexToRgba=function(t){var e=t.replace("#","");return[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16)]},e.setScopeInfo=function(t){t.env=t.env.toLowerCase()||"",this._scope=Object.assign(this._scope||{},t),console.log("\u5f53\u524d\u73af\u5883\uff1a",this._scope.env),P.Host="https://comb-active"+(this._scope.env&&"prod"!=this._scope.env?"-"+this._scope.env:"")+".hortorgames.com/comb-active-server/api/v1/"},Object.defineProperty(e,"ins",{get:function(){return this._ins||(this._ins=new n)},enumerable:!1,configurable:!0}),e.bootstrap=function(t,e){var n=this;try{if(console.warn("HSDKSurvey version: v1.0.5, updated at 202311031640"),"init"==e)HSDK.receiveMsgFromMainModule({listener:function(e){console.log("init",e),n.initConfig(e,t)}});else{var o=HSDK.receiveMsgWhileRunning();console.log("running",o),this.initConfig(o,t)}}catch(r){}},e.initConfig=function(t,e){var n=this;t.userId=String(e)||"",console.log("config",JSON.stringify(t)),this.setScopeInfo(t);try{this.getListConfig().then(function(){n.preloadRes()}),this.getListData()}catch(o){console.warn(o)}},e.getListConfig=function(){return new Promise(function(t,e){A({method:"GET",url:P.Host+P.SurveyConfig,params:{gameId:n._scope.gameId}}).then(function(n){null!=n?(_=n.listPageConfig,b=n.detailPageConfig,t(n)):e(y)}).catch(e)})},e.getListData=function(){var t=this;return new Promise(function(e,n){A({method:"GET",url:P.Host+P.SurveyList,params:{gameId:t._scope.gameId,uniqueId:t._scope.uniqueId}}).then(function(t){w=t&&null!=t.questionnaires?t.questionnaires:[],e()}).catch(n)})},e.preloadRes=function(){for(var t in _)if(Object.prototype.hasOwnProperty.call(_,t)){var e=_[t];e.match(new RegExp(/\.png|\.jpg|\.jpeg|\.gif/))&&C(e)}},e.canUseSurvey=function(){var t=this;return new Promise(function(e,n){w.length<=0?e(!1):t._scope||n(!1),e(!0)})},e._scope=null,e._ins=null,n=a([h,d("HSDK/\u95ee\u5377\u7ec4\u4ef6"),m],e)}(cc.Component);n.default=S;var M=function(t,e){return void 0===e&&(e=.5),new Promise(function(n){t.active=!0,t.opacity=0,t.scale=.5,cc.tween(t).to(e,{opacity:255,scale:1},{easing:"backOut"}).call(function(){n()}).start()})},C=function(t){return new Promise(function(e,n){cc.assetManager.loadRemote(t,function(t,o){if(null==t){var r=new cc.SpriteFrame;r.setTexture(o),e(r)}else n({errMsg:"load spf failed"})})})},O=function(t,e,n){var o=new cc.Component.EventHandler;return o.target=n,o.component="HSDK.survey",o.handler=t,o.customEventData=JSON.stringify(e),o},I=function(t,e){return{errCode:t,errMsg:e}},A=function(t){return new Promise(function(e,n){if(window.wx)wx.request({method:t.method,url:t.url,data:t.params,success:function(t){t.data&&0==t.data.meta.errCode?e(t.data.data):n("[SURVEY] net error")},fail:n});else{var o=new XMLHttpRequest,r=t.method?t.method.toUpperCase():"GET",i=t.url,a=t.params;if("GET"===r&&a){var s=[];for(var c in a)s.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));i+=(-1===i.indexOf("?")?"?":"&")+s.join("&")}o.open(r,i),o.onload=function(){if(200===o.status){var t=JSON.parse(o.responseText);t&&t.meta&&0===t.meta.errCode?e(!t.data||t.data):n(t.meta.errMsg)}else n(o.statusText)},o.onerror=function(){n(o.statusText)},"POST"===r?(o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify(a))):o.send()}})};cc._RF.pop()},{}],HomeBinder:[function(t,e,n){"use strict";cc._RF.push(e,"7426aLBwRdOHqYDIl1Me/hA","HomeBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./UI_Home"),r=t("./UI_envNode"),i=t("./UI_lockNode"),a=t("./UI_unlockBtn"),s=t("./UI_soldBtn"),c=t("./UI_soldCom"),u=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default)},t}();n.default=u,cc._RF.pop()},{"./UI_Home":"UI_Home","./UI_envNode":"UI_envNode","./UI_lockNode":"UI_lockNode","./UI_soldBtn":"UI_soldBtn","./UI_soldCom":"UI_soldCom","./UI_unlockBtn":"UI_unlockBtn"}],HomeCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"25121mleFZOFaPUPHCpWV7v","HomeCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Controller/DecHeroNode"),u=t("../Controller/SceneCtrl"),l=t("../Managers/PoolManager"),p=t("../Managers/Res"),f=t("../UI/FairyGUi/U_Home"),h=t("../UI/UI"),d=t("../Utils/CocosExtension"),m=cc._decorator,y=m.ccclass,g=m.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.heros=[],e}return r(e,t),Object.defineProperty(e.prototype,"fairyUI",{get:function(){return[f.default]},enumerable:!1,configurable:!0}),e.prototype.enter=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:this.sceneNode.setParent(h.default.getUI(f.default).view.m_slot.node),t=0,n.label=1;case 1:return t<10?((e=l.PM.Get(p.default.Ins.getPrefab("heroRoot")).getComponent(c.default)).node.setParent(this.heroFolder),this.heros.push(e),[4,e.init(d.randomElement(config.HeroTheme.list).theme,cc.v2(-300,-300),cc.v2(300,300))]):[3,4];case 2:n.sent(),e.anim(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},i([g(cc.Node)],e.prototype,"sceneNode",void 0),i([g(cc.Node)],e.prototype,"heroFolder",void 0),i([g(cc.Node)],e.prototype,"cloudFolder",void 0),i([y],e)}(u.default);n.default=v,cc._RF.pop()},{"../Controller/DecHeroNode":"DecHeroNode","../Controller/SceneCtrl":"SceneCtrl","../Managers/PoolManager":"PoolManager","../Managers/Res":"Res","../UI/FairyGUi/U_Home":"U_Home","../UI/UI":"UI","../Utils/CocosExtension":"CocosExtension"}],LavaObj:[function(t,e,n){"use strict";cc._RF.push(e,"668f6LXMc9Eb77sTzar4guc","LavaObj");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../Const"),c=t("../../Managers/AM"),u=t("../../Managers/Res"),l=t("../Game"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){return i(this,void 0,void 0,function(){var t;return a(this,function(){return t=u.default.Ins.getThemeSprite(config.ThemeType.Objects,s.ThemeConst.lavaSprite),this.block.objSprite.spriteFrame=t,[2]})})},e.prototype.digged=function(){l.Game.Ins.player.dead(),this.playBomb(),l.Game.Ins.gameOver()},e.prototype.playBomb=function(){var t=u.default.Ins.getThemeSprites(config.ThemeType.Objects,s.ThemeConst.lavaAnimClip);c.AM.playFrames(this.block.objSprite,t,8)},e}(t("./BlockObj").default);n.default=p,cc._RF.pop()},{"../../Const":"Const","../../Managers/AM":"AM","../../Managers/Res":"Res","../Game":"Game","./BlockObj":"BlockObj"}],LevelCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"6dfea0DLmJDpoRX3T0adtOa","LevelCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ELevelState=n.ELevelEvent=void 0;var c,u,l=t("../Const"),p=t("../Controller/SceneCtrl"),f=t("../Managers/EventCenter"),h=t("../Managers/GameManager"),d=t("../UI/FairyGUi/U_Game"),m=t("../UI/UI"),y=t("./MapCtrl"),g=t("./PlayerCtrl"),v=t("../Managers/Res"),_=t("../UI/FairyGUi/U_Start"),b=t("../Managers/EffectManager"),w=t("../Managers/SoundManager"),P=t("../Utils/CocosExtension"),S=t("./Game"),M=t("../Managers/AM"),C=t("../Managers/StorageManager"),O=t("../UI/FairyGUi/U_StartWithAd"),I=cc._decorator,A=I.ccclass,j=I.property;(function(t){t.GameOver="gameOver",t.GameStart="gameStart",t.GameAwait="gameAwait",t.UpdateEnergy="updateEnergy",t.UpdateLayer="updateLayer"})(c=n.ELevelEvent||(n.ELevelEvent={})),function(t){t[t.Await=0]="Await",t[t.Running=1]="Running",t[t.Over=2]="Over"}(u=n.ELevelState||(n.ELevelState={}));var T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showExp=0,e.state=u.Over,e.energy=0,e.oreNum=0,e.relifeRemain=0,e.barSparkleTween=null,e}return r(e,t),Object.defineProperty(e.prototype,"fairyUI",{get:function(){return[d.default,_.default,O.default]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"energyDecay",{get:function(){return l.energyDecay/l.f(this.map.curLayer/50)},enumerable:!1,configurable:!0}),e.prototype.enter=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this.showStartScene(),[2]})})},e.prototype.showStartScene=function(){this.startView=Math.random()>.5?m.default.getUI(_.default):m.default.getUI(O.default),m.default.getUI(d.default).hide(),this.map.node.active=!1,this.startBG.spriteFrame=v.default.Ins.getThemeSprite(config.ThemeType.Objects,l.ThemeConst.startBG),M.AM.playFrames(this.startPlayer,v.default.Ins.getThemeSprites(config.ThemeType.Hero,l.ThemeConst.playerIdleAnim),15,null,!0),this.elevatorSprite.spriteFrame=v.default.Ins.getThemeSprites(config.ThemeType.Hero,l.ThemeConst.elevatorSprites)[0],this.rope.spriteFrame=v.default.Ins.getThemeSprite(config.ThemeType.Hero,l.ThemeConst.rope),this.ui.active=!1,this.startScene.active=!0,this.startView.show(),w.SM.playMusic(w.SoundType.Start)},e.prototype.showGameScene=function(){this.startView.hide(),this.map.node.active=!0,this.ui.active=!0,this.startScene.active=!1,m.default.getUI(d.default).show()},e.prototype.jumpToStart=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return this.startAnim.play("startToGame"),this.startAnim.once(cc.Animation.EventType.FINISHED,function(){return a(t,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,b.default.Ins.maskCtrl.fadeOut(.2)];case 1:return t.sent(),[4,this.startGame()];case 2:return t.sent(),this.showGameScene(),[4,b.default.Ins.maskCtrl.fadeIn(.2)];case 3:return t.sent(),[2]}})})}),[2]})})},e.prototype.jumpToHome=function(){var t=this;this.startAnim.play("startToHome"),this.startAnim.once(cc.Animation.EventType.FINISHED,function(){return a(t,void 0,void 0,function(){return s(this,function(){return h.default.Ins.jumpToHome(),[2]})})})},e.prototype.backToStart=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.startAnim.play("startIdle"),[4,b.default.Ins.maskCtrl.fadeOut(.2)];case 1:return t.sent(),this.showStartScene(),[4,b.default.Ins.maskCtrl.fadeIn(.2)];case 2:return t.sent(),[2]}})})},e.prototype.load=function(){return a(this,void 0,Promise,function(){return s(this,function(e){switch(e.label){case 0:return[4,t.prototype.load.call(this)];case 1:return e.sent(),[4,this.loadRandomTheme()];case 2:return e.sent(),[2]}})})},e.prototype.loadRandomTheme=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return t=P.randomElement(config.HeroTheme.list),[4,v.default.Ins.switchTheme(config.ThemeType.Hero,t.theme)];case 1:return e.sent(),[4,v.default.Ins.switchTheme(config.ThemeType.Objects,t.objects)];case 2:return e.sent(),[2]}})})},e.prototype.startGame=function(){return a(this,void 0,void 0,function(){return s(this,function(){return w.SM.playMusic(v.default.Ins.themeInfo.objectsTheme.bgm),this.oreNum=0,this.relifeRemain=1,this.energy=50,this.hpBar.fillRange=this.energy/100,this.whiteBar.fillRange=this.energy/100,this.map.init(),this.player.init(),this.map.bp.refresh(),this.state=u.Await,f.default.send(c.GameAwait),this.finger.active=!0,[2]})})},e.prototype.restartGame=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadRandomTheme()];case 1:return t.sent(),[4,this.startGame()];case 2:return t.sent(),[2]}})})},e.prototype.tapStart=function(){this.state==u.Await&&(this.state=u.Running,f.default.send(c.GameStart),this.finger.active=!1)},e.prototype.gameContinue=function(){this.state=u.Await,this.player.playIdle(),this.energy=50,S.Game.finishLayer(),w.SM.playMusic(v.default.Ins.themeInfo.objectsTheme.bgm)},e.prototype.getExp=function(t,e){return e},e.prototype.gameOver=function(){this.state=u.Over,f.default.send(c.GameOver),w.SM.stopMusic(),w.SM.playEffect(w.SoundType.Lose),h.default.Ins.gameOver(),this.hurtMask.opacity=0},e.prototype.endGame=function(){h.default.Ins.ore+=this.oreNum;var t=this.getExp(this.map.curLayer,this.oreNum);h.default.Ins.exp+=t,h.default.Ins.maxScore=Math.max(h.default.Ins.maxScore,this.map.curLayer),this.showExp+=t,C.default.save()},e.prototype.updateLayer=function(){f.default.send(c.UpdateLayer)},e.prototype.update=function(t){if(this.isLoaded&&this.state==u.Running)return this.hurtMask.opacity=200*(1-Math.min(30,this.energy)/30),t*=h.default.Ins.timeScale,this.energy=Math.max(0,this.energy-this.energyDecay*t),this.hpBar.fillRange=this.energy/100,this.whiteBar.fillRange=this.energy/100,f.default.send(c.UpdateEnergy),this.energy<=0?(this.player.dead(),void this.gameOver()):void 0},e.prototype.sparkleBar=function(){var t,e=this;null===(t=this.barSparkleTween)||void 0===t||t.stop(),this.whiteBar.node.opacity=255,this.barSparkleTween=cc.tween(this.whiteBar.node).to(.2,{opacity:0}).call(function(){e.barSparkleTween=null}).start()},i([j(y.default)],e.prototype,"map",void 0),i([j(cc.Node)],e.prototype,"ui",void 0),i([j(cc.Node)],e.prototype,"startScene",void 0),i([j(g.default)],e.prototype,"player",void 0),i([j(cc.Sprite)],e.prototype,"hpBar",void 0),i([j(cc.Sprite)],e.prototype,"whiteBar",void 0),i([j(cc.Node)],e.prototype,"finger",void 0),i([j(cc.Sprite)],e.prototype,"startBG",void 0),i([j(cc.Sprite)],e.prototype,"startPlayer",void 0),i([j(cc.Animation)],e.prototype,"startAnim",void 0),i([j(cc.Sprite)],e.prototype,"elevatorSprite",void 0),i([j(cc.Node)],e.prototype,"hurtMask",void 0),i([j(cc.Sprite)],e.prototype,"rope",void 0),i([A],e)}(p.default);n.default=T,cc._RF.pop()},{"../Const":"Const","../Controller/SceneCtrl":"SceneCtrl","../Managers/AM":"AM","../Managers/EffectManager":"EffectManager","../Managers/EventCenter":"EventCenter","../Managers/GameManager":"GameManager","../Managers/Res":"Res","../Managers/SoundManager":"SoundManager","../Managers/StorageManager":"StorageManager","../UI/FairyGUi/U_Game":"U_Game","../UI/FairyGUi/U_Start":"U_Start","../UI/FairyGUi/U_StartWithAd":"U_StartWithAd","../UI/UI":"UI","../Utils/CocosExtension":"CocosExtension","./Game":"Game","./MapCtrl":"MapCtrl","./PlayerCtrl":"PlayerCtrl"}],Loading:[function(t,e,n){"use strict";cc._RF.push(e,"dc7a77fq8xPYI3k//Xf6+q/","Loading");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,u=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progress=0,e.isFinish=!1,e.isFinishBar=!1,e.resolveFunc=[],e}return r(e,t),e.prototype.awaitFinishBar=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){t.isFinishBar?e():t.resolveFunc.push(e)})]})})},e.prototype.getTxt=function(t){return"\u52a0\u8f7d\u4e2d..."+t.toFixed()+"%"},e.prototype.startLoading=function(){this.loadingBar.progress=0,this.loadingLbl.string=this.getTxt(0),this.isFinishBar=!1},e.prototype.finishLoading=function(){this.isFinish=!0},e.prototype.update=function(t){this.progress=Math.min(this.progress+60*t,this.isFinish?100:80),this.loadingBar.progress=this.progress/100,this.loadingLbl.string=this.getTxt(this.progress),this.progress>=100&&(this.resolveFunc.forEach(function(t){return t()}),this.resolveFunc=[],this.isFinishBar=!0)},i([l(cc.Label)],e.prototype,"loadingLbl",void 0),i([l(cc.ProgressBar)],e.prototype,"loadingBar",void 0),i([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{}],Main:[function(t,e,n){"use strict";cc._RF.push(e,"984a1MEyTBEZoCIOK+ghJGi","Main");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./Const"),u=t("./Controller/Loading"),l=t("./Managers/GameManager"),p=t("./Managers/PoolManager"),f=t("./Managers/Res"),h=t("./Managers/StorageManager"),d=t("./ui_gen/Common/CommonBinder"),m=cc._decorator,y=m.ccclass,g=m.property,v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return s(this,function(){return cc.game.addPersistRootNode(this.node),this.load(),[2]})})},e.prototype.load=function(){return a(this,void 0,void 0,function(){var t,e;return s(this,function(n){switch(n.label){case 0:return t=p.PM.Get(this.loading),cc.director.getScene().addChild(t),t.setSiblingIndex(-1),(e=t.getComponent(u.default)).startLoading(),[4,f.default.Ins.load()];case 1:return n.sent(),[4,this.loadFui()];case 2:return n.sent(),[4,h.default.load()];case 3:return n.sent(),e.finishLoading(),[4,e.awaitFinishBar()];case 4:return n.sent(),p.PM.Put(t),[4,this.init()];case 5:return n.sent(),[2]}})})},e.prototype.loadFui=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(t){fairygui.UIPackage.loadPackage(""+c.fuiPath+c.commonFuiPkg,function(){d.default.bindAll(),t()})})]})})},e.prototype.init=function(){return a(this,void 0,void 0,function(){return s(this,function(){return l.default.Ins.start(),[2]})})},i([g(cc.Prefab)],e.prototype,"loading",void 0),i([y],e)}(cc.Component);n.default=v;var _=!1;if(cc.sys.os===cc.sys.OS_IOS||cc.sys.os===cc.sys.OS_OSX){var b=cc.sys.platform===cc.sys.WECHAT_GAME;if(b?null===GameGlobal||void 0===GameGlobal?void 0:GameGlobal.isIOSHighPerformanceMode:cc.sys.isBrowser){var w=window.navigator.userAgent.match(/((OS )|(Version\/))(\d+)(\.(\d+))?/);if(w){var P=+w[4]||0,S=+w[6]||0;cc.macro.ENABLE_WEBGL_ANTIALIAS=14===P,_=b?14===P||15===P&&S<4:14===P}}}cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){_?(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(t){this.vertexOffset+t>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()}):(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(t){this.vertexOffset+t>65535&&(this.uploadData(),this._batcher._flush(),this.switchBuffer())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.indiceStart=this.indiceOffset})}),cc._RF.pop()},{"./Const":"Const","./Controller/Loading":"Loading","./Managers/GameManager":"GameManager","./Managers/PoolManager":"PoolManager","./Managers/Res":"Res","./Managers/StorageManager":"StorageManager","./ui_gen/Common/CommonBinder":"CommonBinder"}],MapCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"39585V+UmFB/qzGKwM9XJjE","MapCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=t("../Const"),c=t("../Controller/BackpackCtrl"),u=t("../Controller/FloatItem"),l=t("../Controller/SmashCtrl"),p=t("../Factory"),f=t("../Managers/PoolManager"),h=t("../Managers/Res");(function(t){t[t.leftLava=0]="leftLava",t[t.rightLava=1]="rightLava",t[t.leftOre=2]="leftOre",t[t.rightOre=3]="rightOre",t[t.CNT=4]="CNT"})(a||(a={}));var d=[2,1,1,0],m=[1,2,0,1],y=cc._decorator,g=y.ccclass,v=y.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftNodes=[],e.rightNodes=[],e.blockMap=new Map,e.isInited=!1,e.genLayer=0,e.curLayer=0,e.blocks=[],e.downTween2=null,e.leftTween=null,e.leftX=[],e.rightTween=null,e.rightX=[],e.shakeAmplify=1.5,e}return r(e,t),Object.defineProperty(e.prototype,"baseY",{get:function(){return(this.playerLayer-s.playerLayerOffset)*s.blockHei},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerCnt",{get:function(){return Math.ceil((s.topY-s.bottomY)/s.blockHei)},enumerable:!1,configurable:!0}),e.prototype.findBlock=function(t,e){return this.blockMap.has(t)?this.blockMap.get(t)[e?"left":"right"]:null},Object.defineProperty(e.prototype,"playerLayer",{get:function(){return this.curLayer+s.playerLayerOffset},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.clear(),this.blockMap=new Map,this.curLayer=0,this.genLayer=0,this.bgRoot.position=cc.v3();for(var t=0;t<this.blocks.length;t++)this.blocks[t].clear();this.blocks=[];var e=this.layerCnt;for(t=0;t<e;t++){var n=this.getRandGenParam(t);this.createBlock(!0,t,d[n]),this.createBlock(!1,t,m[n])}this.genLayer=e-1,this.root.position=cc.v3(),this.isInited=!0,this.bg.spriteFrame=h.default.Ins.getThemeSprite(config.ThemeType.Objects,s.ThemeConst.bg)},e.prototype.clear=function(){this.blocks.forEach(function(t){return f.PM.Put(t.node)})},e.prototype.getRandGenParam=function(t){var e=Math.random();return a.leftLava,t%2==0?e<.5?a.leftLava:a.rightLava:e<.5?a.leftOre:a.rightOre},e.prototype.layer2pos=function(t){return s.topY-t*s.blockHei},e.prototype.createBlock=function(t,e,n){var o=p.default.getBlock(n);o.init(t,e),o.node.setParent(t?this.leftRoot:this.rightRoot),this.blocks.push(o);var r=this.blockMap.get(e);r||(r={left:null,right:null},this.blockMap.set(e,r)),t?r.left=o:r.right=o;var i=s.topY-e*s.blockHei;return o.node.position=cc.v3(0,i,0),o},e.prototype.moveDown=function(){var t,e=this;this.genLayer++,this.curLayer++;var n=this.getRandGenParam(this.genLayer);this.createBlock(!0,this.genLayer,d[n]),this.createBlock(!1,this.genLayer,m[n]),null===(t=this.downTween2)||void 0===t||t.stop(),this.bgRoot.y<this.bgRoot.height?this.downTween2=cc.tween(this.bgRoot).to(.1,{position:cc.v3(0,this.baseY/50)}).call(function(){e.downTween2=null}).start():this.bgRoot.y=this.bgRoot.height,this.clearLayer(this.genLayer-this.layerCnt)},e.prototype.update=function(t){this.root.position=cc.v3(0,cc.misc.lerp(this.root.y,this.baseY,20*t))},e.prototype.clearBlock=function(t){t&&(this.blocks.splice(this.blocks.indexOf(t),1),this.blockMap.get(t.layer)[t.isLeft?"left":"right"]=null,t.clear())},e.prototype.clearLayer=function(t){var e=this.blockMap.get(t);e.left&&(this.blocks.splice(this.blocks.indexOf(e.left),1),e.left.clear()),e.right&&(this.blocks.splice(this.blocks.indexOf(e.right),1),e.right.clear()),this.blockMap.delete(t)},e.prototype.goldTips=function(t,e){var n=this.blockMap.get(t)[e?"left":"right"],o=f.PM.Get(h.default.Ins.getPrefab("gold_ps")).getComponent(cc.ParticleSystem);o.resetSystem(),o.node.parent=this.node,o.node.position=this.node.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v3())),cc.tween(o.node).delay(10).call(function(){return f.PM.Put(o.node)}).start()},e.prototype.dirtTips=function(t,e){var n=this.blockMap.get(t)[e?"left":"right"],o=f.PM.Get(h.default.Ins.getPrefab("gold_ps")).getComponent(cc.ParticleSystem);o.resetSystem(),o.node.parent=this.node,o.node.position=this.node.convertToNodeSpaceAR(n.node.convertToWorldSpaceAR(cc.v3())),cc.tween(o.node).delay(10).call(function(){return f.PM.Put(o.node)}).start()},e.prototype.smash=function(t){var e=f.PM.Get(h.default.Ins.getPrefab("smash")).getComponent(l.default);e.node.parent=this.node,e.node.position=this.node.convertToNodeSpaceAR(t.node.convertToWorldSpaceAR(cc.v3())),e.init()},e.prototype.shakeLeft=function(){var t=this;if(this.leftTween){this.leftTween.stop();for(var e=0;e<this.leftNodes.length;e++)this.leftNodes[e].x=this.leftX[e]}var n={val:1};for(this.leftX=[],e=0;e<this.leftNodes.length;e++)this.leftX.push(this.leftNodes[e].x);var o=function(){for(var e=0;e<t.leftNodes.length;e++)t.leftNodes[e].x=t.leftX[e]+t.shakeAmplify*-n.val};this.leftTween=cc.tween(n).to(.1,{val:0},{onUpdate:function(){o()}}).call(function(){return t.leftTween=null}).start()},e.prototype.shakeRight=function(){var t=this;if(this.rightTween){this.rightTween.stop();for(var e=0;e<this.rightNodes.length;e++)this.rightNodes[e].x=this.rightX[e]}var n={val:1};for(this.rightX=[],e=0;e<this.rightNodes.length;e++)this.rightX.push(this.rightNodes[e].x);this.rightTween=cc.tween(n).to(.1,{val:0},{onUpdate:function(){for(var e=0;e<t.rightNodes.length;e++)t.rightNodes[e].x=t.rightX[e]+t.shakeAmplify*n.val}}).call(function(){return t.rightTween=null}).start()},e.prototype.floatItem=function(t){void 0===t&&(t=3);var e=f.PM.Get(h.default.Ins.getPrefab("floatItem")).getComponent(u.default);e.node.parent=this.floatItemFolder,e.node.position=cc.v3(),e.init(t)},i([v(cc.Node)],e.prototype,"root",void 0),i([v(c.default)],e.prototype,"bp",void 0),i([v(cc.Node)],e.prototype,"leftRoot",void 0),i([v(cc.Node)],e.prototype,"rightRoot",void 0),i([v(cc.Sprite)],e.prototype,"bg",void 0),i([v(cc.Node)],e.prototype,"bgRoot",void 0),i([v(cc.Node)],e.prototype,"floatItemFolder",void 0),i([v(cc.Node)],e.prototype,"leftNodes",void 0),i([v(cc.Node)],e.prototype,"rightNodes",void 0),i([g],e)}(cc.Component);n.default=_,cc._RF.pop()},{"../Const":"Const","../Controller/BackpackCtrl":"BackpackCtrl","../Controller/FloatItem":"FloatItem","../Controller/SmashCtrl":"SmashCtrl","../Factory":"Factory","../Managers/PoolManager":"PoolManager","../Managers/Res":"Res"}],MiniBinder:[function(t,e,n){"use strict";cc._RF.push(e,"e6171uj3sNGwZipI8GX4FMI","MiniBinder"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./UI_StartWithAd"),r=t("./UI_otherCom"),i=t("./UI_StartComWithAd"),a=t("./UI_gameCom"),s=t("./UI_scorePanel"),c=t("./UI_Start"),u=t("./UI_StartCom"),l=t("./UI_lvProgress"),p=t("./UI_Game"),f=function(){function t(){}return t.bindAll=function(){fgui.UIObjectFactory.setExtension(o.default.URL,o.default),fgui.UIObjectFactory.setExtension(r.default.URL,r.default),fgui.UIObjectFactory.setExtension(i.default.URL,i.default),fgui.UIObjectFactory.setExtension(a.default.URL,a.default),fgui.UIObjectFactory.setExtension(s.default.URL,s.default),fgui.UIObjectFactory.setExtension(c.default.URL,c.default),fgui.UIObjectFactory.setExtension(u.default.URL,u.default),fgui.UIObjectFactory.setExtension(l.default.URL,l.default),fgui.UIObjectFactory.setExtension(p.default.URL,p.default)},t}();n.default=f,cc._RF.pop()},{"./UI_Game":"UI_Game","./UI_Start":"UI_Start","./UI_StartCom":"UI_StartCom","./UI_StartComWithAd":"UI_StartComWithAd","./UI_StartWithAd":"UI_StartWithAd","./UI_gameCom":"UI_gameCom","./UI_lvProgress":"UI_lvProgress","./UI_otherCom":"UI_otherCom","./UI_scorePanel":"UI_scorePanel"}],NodeLocker:[function(t,e,n){"use strict";cc._RF.push(e,"48150Mk9T1JsL7UpPA4oZ53","NodeLocker");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};function r(t,e,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];e&&e.call.apply(e,o([t],r)),n&&n()}}Object.defineProperty(n,"__esModule",{value:!0}),n.touchLocker=n.disableTouch=n.isTouchLocked=n.unstashLocker=n.stashLocker=void 0;var i=new Set,a=[];n.stashLocker=function(){a.push(new Set(i)),i.clear(),s()},n.unstashLocker=function(){i.clear(),a.length>0&&a.pop().forEach(function(t){i.add(t)}),s()},i.add=r(i,i.add,function(){s()}),i.delete=r(i,i.delete,function(){s()});var s=function(){n.isTouchLocked()},c=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^Math.random()&15>>t/4).toString(16)})};function u(t){i.delete(t),a.forEach(function(e){e.delete(t)})}n.isTouchLocked=function(){return i.size>0},n.disableTouch=function(){var t=c();return i.add(t),function(){i.delete(t)}},n.touchLocker=function(t,e,n){var a=n.value;n.value=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=c();i.add(n);var s=a.call.apply(a,o([this],t));return s instanceof Promise?s.then(function(){u(n)}):u(n),this instanceof cc.Component&&(this.onDestroy=r(this,this.onDestroy,function(){u(n)})),s}},cc._RF.pop()},{}],NumberFormatter:[function(t,e,n){"use strict";cc._RF.push(e,"1259cUZEwJKm4+TjhlPw7Fx","NumberFormatter"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return Object.defineProperty(t,"locale",{get:function(){return t.m_locale},set:function(e){t.m_locale=e},enumerable:!1,configurable:!0}),t.format=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var o=0,r=Math.pow(10,e),i=Math.round(r*t)/r,a=-1==i.indexOf("."),s=a?i.length:i.indexOf("."),c=(a&&!e?"":n?",":".")+i.substr(s+1);if(e)for(var u=0;u<=e-(i.length-(a?s-1:s));u++)c+="0";for(;o+3<("-"==i.substr(0,1)?s-1:s);)c=(n?".":",")+i.substr(s-(o+=3),3)+c;return i.substr(0,s-o)+c},t.formatRound=function(e){if(null==e)return"0";if(e=e,"en_US"==t.locale||"vi_VN"==t.locale)return t.formatEngNumber(e);var n;switch(t.locale){case"zh_CN":n=["\u4ebf","\u4e07"];break;case"zh_TW":n=["\u5104","\u842c"];break;case"ja_JP":n=["\u5104","\u4e07"];break;case"ko_KR":n=["\uc5b5","\ub9cc"];break;default:n=[]}if(n.length>0){if(e>=1e8)return Math.floor(e/1e8)+n[0];if(e>=1e5)return Math.floor(e/1e4)+n[1]}return e.toString()},t.formatTime=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),isNaN(t)||t<=0)return"00:00";var o=Math.ceil(t/1e3),r=0,i="";n&&(o-=86400*(r=Math.floor(o/3600/24)),i=r+(e?"\u5929":":"));var a=Math.floor(o/3600);o-=3600*a;var s=Math.floor(o/60);return o-=60*s,i+(this.formatTimeNumber(a)+(e?"\u5c0f\u65f6":":"))+this.formatTimeNumber(s)+(e?"\u5206":":")+this.formatTimeNumber(o)+(e?"\u79d2":"")},t.formatTimeHm=function(t,e){if(void 0===e&&(e=!1),isNaN(t)||t<=0)return"00:00";var n=Math.ceil(t/1e3),o=Math.floor(n/3600);n-=3600*o;var r=Math.ceil(n/60);return(e?o>0?o+"h":"":this.formatTimeNumber(o)+":")+(e?r>0?r+"m":"":this.formatTimeNumber(r))},t.formatTimeMs=function(t,e){if(void 0===e&&(e=!1),isNaN(t)||t<=0)return"00:00";var n=Math.ceil(t/1e3),o=Math.floor(n/60);return n-=60*o,(e?o>0?o+"m":"":this.formatTimeNumber(o)+":")+(e?n>0?n+"s":"":this.formatTimeNumber(n))},t.formatTimeNumber=function(t){return t<10?"0"+t:t.toString()},t.formatEngNumber=function(e){var n,o;return(e=e)>=1e9?(o=e/1e9,n=(.01*Math.floor(o/.01)).toFixed(2),t.formatEndingZero(n)+"B"):e>=1e6?(o=e/1e6,n=(.01*Math.floor(o/.01)).toFixed(2),t.formatEndingZero(n)+"M"):e>=1e3?(o=e/1e3,n=(.01*Math.floor(o/.01)).toFixed(2),t.formatEndingZero(n)+"K"):e+""},t.formatEndingZero=function(e){return t.endWith(e,"00")?e.substring(0,e.length-3):t.endWith(e,"0")?e.substring(0,e.length-1):e},t.endWith=function(t,e){return e==t.substring(t.length-e.length)},t.m_locale="zh_CN",t}();n.default=o,cc._RF.pop()},{}],OreObj:[function(t,e,n){"use strict";cc._RF.push(e,"31e23uIuJ5Btq0wZ2fuDZPs","OreObj");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=t("../../Const"),c=t("../../Managers/Res"),u=t("../../Managers/SoundManager"),l=t("../../Utils/CocosExtension"),p=t("../Game"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.init=function(){return i(this,void 0,void 0,function(){var t;return a(this,function(e){switch(e.label){case 0:return[4,c.default.Ins.getThemeSprites(config.ThemeType.Objects,s.ThemeConst.goldSprites)];case 1:return t=e.sent(),this.block.objSprite.spriteFrame=l.randomElement(t),[2]}})})},e.prototype.digged=function(){this.block.createCrack(!0),p.Game.Ins.oreNum+=3,p.Game.map.bp.addOre(3),p.Game.map.smash(this.block),u.SM.playEffect(u.SoundType.Gold),this.block.objSprite.spriteFrame=null,p.Game.finishLayer()},e}(t("./BlockObj").default);n.default=f,cc._RF.pop()},{"../../Const":"Const","../../Managers/Res":"Res","../../Managers/SoundManager":"SoundManager","../../Utils/CocosExtension":"CocosExtension","../Game":"Game","./BlockObj":"BlockObj"}],PlayerCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"7f76cCfqyFB55tbvVqSJWHq","PlayerCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Const"),u=t("../Controller/CameraCtrl"),l=t("../Managers/AM"),p=t("../Managers/Res"),f=t("../Managers/SoundManager"),h=cc._decorator,d=h.ccclass,m=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deadSprites=[],e.elevatorSprites=[],e.tween=null,e}return r(e,t),e.prototype.init=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this.playIdle(),this.elevatorSprites=p.default.Ins.getThemeSprites(config.ThemeType.Hero,c.ThemeConst.elevatorSprites),this.rope.spriteFrame=p.default.Ins.getThemeSprite(config.ThemeType.Hero,c.ThemeConst.rope),this.elevatorSprite.spriteFrame=this.elevatorSprites[0],[2]})})},e.prototype.dead=function(){this.node.scaleX=1,u.default.Ins.scale(),l.AM.playFrames(this.sprite,this.deadSprites,20,null,!1),f.SM.playEffect(f.SoundType.Dead)},e.prototype.digTo=function(t){var e;return a(this,void 0,void 0,function(){var n,o=this;return s(this,function(){return this.node.scaleX=t?1:-1,n=p.default.Ins.getThemeSprites(config.ThemeType.Hero,c.ThemeConst.playerDigAnim),l.AM.playFrames(this.sprite,n,20,function(){return o.playIdle()},!1),this.elevatorSprite.spriteFrame=this.elevatorSprites[1],null===(e=this.tween)||void 0===e||e.stop(),this.tween=cc.tween(this.elevatorSprite.node).delay(.03).call(function(){o.elevatorSprite.spriteFrame=o.elevatorSprites[0],o.tween=null}).start(),[2]})})},e.prototype.playIdle=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(){return t=p.default.Ins.getThemeSprites(config.ThemeType.Hero,c.ThemeConst.playerIdleAnim),l.AM.playFrames(this.sprite,t,20,null,!0),[2]})})},i([m(cc.Sprite)],e.prototype,"sprite",void 0),i([m(cc.Sprite)],e.prototype,"elevatorSprite",void 0),i([m(cc.SpriteFrame)],e.prototype,"deadSprites",void 0),i([m(cc.Sprite)],e.prototype,"rope",void 0),i([d],e)}(cc.Component);n.default=y,cc._RF.pop()},{"../Const":"Const","../Controller/CameraCtrl":"CameraCtrl","../Managers/AM":"AM","../Managers/Res":"Res","../Managers/SoundManager":"SoundManager"}],PoolManager:[function(t,e,n){"use strict";cc._RF.push(e,"80c87G27EVGKaevNPf9D63T","PoolManager");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PrefabPool=n.ObjectPool=n.AbstractPool=n.PM=void 0;var i=t("../Utils/collections/dictionary"),a=function(){function t(){}return t.PrefabPool=function(t,e,n){if(void 0===e&&(e=-1),void 0===n&&(n=0),!t)throw"prefab is null";if(this.HasPoolPrefab(t))return this.prefabPools.tryGetValue(t);var o=new u;return o.prefab=t,o.name=t.name,o.MaxPoolCount=e,o.PrepareCount=n,this.prefabPools.add(t,o),o},t.Get=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=0);var o=this.PrefabPool(t,e,n).Get();return o.poolRes=t,o.poolType="Prefab",o.active=!0,o},t.Put=function(t){var e=t.poolRes;return e?(this.GetPoolPrefab(e).Put(t),!0):(t.parent&&t.removeFromParent(!1),!1)},t.PutPrefabByParent=function(e){for(;e.childrenCount;)t.Put(e.children[0])},t.GetPrototype=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=0);var o=this.Pool(t,e,n).Get();return o.poolRes=t,o.poolType="Class",o},t.PutPrototype=function(t){var e=t.poolRes;return!!e&&("Class"==t.poolType?this.GetPool(e).Put(t):"Prefab"==t.poolType&&this.GetPoolPrefab(e).Put(t),!0)},t.Pool=function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=0),this.HasPool(t)&&this.typePools.tryGetValue(t);var o=new c(t);return o.name=t.name,o.MaxPoolCount=e,this.typePools.add(t,o),o},t.HasPoolPrefab=function(t){return t&&this.prefabPools.containsKey(t)},t.HasPool=function(t){return this.typePools.containsKey(t)},t.GetPoolPrefab=function(t){if(!t)throw"prefab";if(!this.HasPoolPrefab(t))throw" pool does not exist."+t.name;return this.prefabPools.tryGetValue(t)},t.GetPool=function(t){if(!this.HasPool(t))throw"pool does not exist."+t;return this.typePools.tryGetValue(t)},t.typePools=new i.Dictionary,t.prefabPools=new i.Dictionary,t}();n.PM=a;var s=function(){};n.AbstractPool=s;var c=function(t){function e(e){var n=t.call(this)||this;return n.mPool=[],n.mMaxPoolCount=10,n.mPrepareCount=10,n.type=e,n}return r(e,t),e.prototype.Get=function(){return this.PoolCount>0?this.mPool.pop():this.Instantiate()},e.prototype.Put=function(t){-1==this.mPool.indexOf(t)&&(this.PoolCount<this.mMaxPoolCount||this.mMaxPoolCount<0?(this.Remove(t),this.mPool.push(t)):this.Destroy(t))},e.prototype.Destroy=function(){},e.prototype.Remove=function(){},e.prototype.Instantiate=function(){return new this.type},e.prototype.PrepareInit=function(){if(this.PoolCount<this.mPrepareCount&&this.type)for(var t=0;t<this.mPrepareCount-this.PoolCount;t++){var e=new this.type;this.mPool.push(e)}},Object.defineProperty(e.prototype,"PoolCount",{get:function(){return this.mPool.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"MaxPoolCount",{get:function(){return this.mMaxPoolCount},set:function(t){this.mMaxPoolCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"PrepareCount",{get:function(){return this.mPrepareCount},set:function(t){this.mPrepareCount=t,this.PrepareInit()},enumerable:!1,configurable:!0}),e}(s);n.ObjectPool=c;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.Instantiate=function(){return cc.instantiate(this.prefab)},e.prototype.Destroy=function(t){t.stopAllActions(),t.removeFromParent(!0),t.destroy()},e.prototype.Remove=function(t){t.stopAllActions(),t.removeFromParent(!1)},e.prototype.PrepareInit=function(){if(this.PoolCount<this.PrepareCount&&this.prefab)for(var t=0;t<this.PrepareCount-this.PoolCount;t++){var e=cc.instantiate(this.prefab);this.Put(e)}},e}(c);n.PrefabPool=u,cc._RF.pop()},{"../Utils/collections/dictionary":"dictionary"}],Res:[function(t,e,n){"use strict";cc._RF.push(e,"e389eQsjWJLdbbDNGYmkxzX","Res");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./EventCenter"),u=t("./SoundManager"),l=cc._decorator,p=l.ccclass,f=(l.property,function(t){function e(){var e=t.call(this)||this;return e.themeInfo={heroTheme:config.HeroTheme.list[0],objectsTheme:config.ObjectsTheme.list[0]},e._isLoaded=!1,e.themeMap=new Map,e.themeAssets=new Map,e.spriteMap=new Map,e.prefabMap=new Map,null!=n.instance&&n.instance!=e?e:(n.instance=e,e)}var n;return r(e,t),n=e,Object.defineProperty(e,"Ins",{get:function(){return n.instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!1,configurable:!0}),e.prototype.load=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return u.SM.init(),this._isLoaded=!1,[4,this.loadConfig()];case 1:return t.sent(),[4,this.loadFont()];case 2:return t.sent(),[4,this.loadSprite()];case 3:return t.sent(),[4,this.loadPrefab()];case 4:return t.sent(),this._isLoaded=!0,console.log("=======\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210\uff01\uff01\uff01\uff01========"),c.default.send(c.E_ResLoaded),[2]}})})},e.prototype.loadConfig=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(t){cc.resources.load("Jsons/config",cc.JsonAsset,function(e,n){e?console.error("\u914d\u7f6e\u52a0\u8f7d\u5931\u8d25\uff01"):(config.decodeConfig(n.json),t())})})]})})},e.prototype.switchTheme=function(t,e){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:switch(t){case config.ThemeType.Hero:return[3,1];case config.ThemeType.Objects:return[3,3]}return[3,5];case 1:return this.themeInfo.heroTheme=config.HeroTheme.list.find(function(t){return t.theme==e}),[4,this.loadThemes(t,e)];case 2:return n.sent(),[3,5];case 3:return this.themeInfo.objectsTheme=config.ObjectsTheme.list.find(function(t){return t.theme==e}),[4,this.loadThemes(t,e)];case 4:return n.sent(),[3,5];case 5:return[2]}})})},e.prototype.loadThemes=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return[2,new Promise(function(o,r){return a(n,void 0,void 0,function(){var n,i,c,u=this;return s(this,function(l){switch(l.label){case 0:return n=function(n){return a(u,void 0,void 0,function(){var o=this;return s(this,function(){return[2,new Promise(function(r,i){n.loadDir("",cc.SpriteFrame,function(n,a){if(n)i();else{var s=new Map;a.forEach(function(t){s.set(t.name,t)}),o.themeAssets.has(t)||o.themeAssets.set(t,new Map),o.themeAssets.get(t).set(e,s),r()}})})]})})},(null===(c=this.themeMap.get(t))||void 0===c?void 0:c.get(e))?[4,n(this.themeMap.get(t).get(e))]:[3,2];case 1:return l.sent(),o(),[3,3];case 2:i=t+e,cc.assetManager.loadBundle(i,function(c,l){return a(u,void 0,void 0,function(){return s(this,function(a){switch(a.label){case 0:return c?(console.error("\u627e\u4e0d\u5230\u4e3b\u9898\uff1a",i),r(),[2]):(this.themeMap.has(t)||this.themeMap.set(t,new Map),this.themeMap.get(t).set(e,l),[4,n(l)]);case 1:return a.sent(),o(),[2]}})})}),l.label=3;case 3:return[2]}})})})]})})},e.prototype.loadBundle=function(t,e){return a(this,void 0,void 0,function(){var n=this;return s(this,function(){return[2,new Promise(function(o){n.themeMap.get(t)&&!n.themeMap.get(t).get(e)&&o();var r=t+e;cc.assetManager.loadBundle(r,function(i,c){return a(n,void 0,void 0,function(){return s(this,function(){return i?(console.error("\u627e\u4e0d\u5230\u4e3b\u9898\uff1a",r),[2]):(this.themeMap.has(t)||this.themeMap.set(t,new Map),this.themeMap.get(t).set(e,c),o(),[2])})})})})]})})},e.prototype.getThemeSprite=function(t,e,n){var o,r;return n||(n=t==config.ThemeType.Hero?this.themeInfo.heroTheme.theme:this.themeInfo.objectsTheme.theme),null===(r=null===(o=this.themeAssets.get(t))||void 0===o?void 0:o.get(n))||void 0===r?void 0:r.get(e)},e.prototype.getThemeSprites=function(t,e,n){n||(n=t==config.ThemeType.Hero?this.themeInfo.heroTheme.theme:this.themeInfo.objectsTheme.theme);for(var o=[],r=1;r<=e.length;r++){var i=""+e.name+r,a=this.getThemeSprite(t,i,n);o.push(a)}return o},e.prototype.awaitLoaded=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){t.isLoaded?e():c.default.once(c.E_ResLoaded,function(){return e()})})]})})},e.prototype.loadSprite=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){cc.resources.loadDir("texture/icons/",cc.SpriteFrame,function(n,o){n?console.error("load sprite err:"+n):(o.forEach(function(e){t.spriteMap.set(e.name,e)}),e())})})]})})},e.prototype.loadPrefab=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){cc.resources.loadDir("prefabs/res/",cc.Prefab,function(n,o){n?console.error("load prefab err:"+n):(o.forEach(function(e){t.prefabMap.set(e.name,e)}),e())})})]})})},e.prototype.loadFont=function(){return a(this,void 0,void 0,function(){return s(this,function(){return[2,new Promise(function(t){cc.resources.loadDir("font/",cc.Font,function(e,n){e?console.error("load font err:"+e):(n.forEach(function(t){fgui.registerFont(t.name,t)}),t())})})]})})},Object.defineProperty(e.prototype,"rowSprite",{get:function(){return this.getPrefab("sprite")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultGrid",{get:function(){return this.getPrefab("GridTile")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drops",{get:function(){return this.getPrefab("drops")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this.getPrefab("tag")},enumerable:!1,configurable:!0}),e.prototype.getPrefab=function(t){return this.prefabMap.get(t)||(console.error("\u627e\u4e0d\u5230\u9884\u5236\u4f53\uff1a"+t),null)},e.prototype.getSprite=function(t){return this.spriteMap.get(t)||(console.error("\u627e\u4e0d\u5230\u56fe\u7247\uff1a"+t),null)},e.getIconFuiUrl=function(t){return"texture/icons/"+t},e.getHeadFuiUrl=function(t){return"texture/heads/"+t},e.getBannerFuiUrl=function(t){return"texture/banners/"+t},e.instance=null,e.coinUrl="\u949e\u7968",e.coinQuality=1,n=i([p],e)}(cc.Component));n.default=f,window.Res=f,cc._RF.pop()},{"./EventCenter":"EventCenter","./SoundManager":"SoundManager"}],RewardCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"d8eadxDUZ1C2YdKswKZeWN4","RewardCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e}return r(e,t),e.prototype.init=function(){},i([c(cc.Sprite)],e.prototype,"player",void 0),i([c(cc.Label)],e.prototype,"playerName",void 0),i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],SceneCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"30f37fnGdpGjKyMRGvaekjS","SceneCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Managers/GameManager"),u=t("../UI/UI"),l=cc._decorator,p=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLoaded=!1,e}return r(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.isLoaded=!1,[4,c.default.Ins.enterScene(this)];case 1:return t.sent(),this.isLoaded=!0,[2]}})})},e.prototype.onDestroy=function(){this.clear(),c.default.Ins.exitScene(this)},e.prototype.load=function(){return a(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,c.default.Ins.awaitInited()];case 1:e.sent(),t=0,e.label=2;case 2:return t<this.fairyUI.length?[4,(new(0,this.fairyUI[t])).load()]:[3,5];case 3:e.sent(),e.label=4;case 4:return t++,[3,2];case 5:return[2]}})})},e.prototype.clear=function(){for(var t=0;t<this.fairyUI.length;t++){var e=this.fairyUI[t];u.default.getUI(e).clear()}},e.prototype.enter=function(){},e.prototype.exit=function(){},i([p],e)}(cc.Component));n.default=f,cc._RF.pop()},{"../Managers/GameManager":"GameManager","../UI/UI":"UI"}],ScreenEffectMask:[function(t,e,n){"use strict";cc._RF.push(e,"28b0cIohu1AfKbr10JjtPPd","ScreenEffectMask");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Managers/EffectManager"),u=cc._decorator,l=u.ccclass,p=u.property,f=function(t){function e(){var e=t.call(this)||this;return e.hurtMask=null,e.fadeMask=null,e.storyMask=null,e.guideMask=null,c.default.Ins.bindMaskCtrl(e),e}return r(e,t),e.prototype.onDestroy=function(){c.default.Ins.unBindMaskCtrl(this)},e.prototype.setMask=function(t,e,n){void 0===n&&(n=255),this.hurtMask.color=t,this.hurtMask.opacity=n,cc.tween(this.hurtMask).to(e,{opacity:0}).start()},e.prototype.fadeOut=function(t,e){return void 0===t&&(t=3),void 0===e&&(e=cc.Color.BLACK),a(this,void 0,void 0,function(){var n=this;return s(this,function(){return this.node.setSiblingIndex(-1),[2,new Promise(function(o){n.fadeMask.opacity=0,n.fadeMask.color=e,cc.tween(n.fadeMask).to(t,{opacity:255}).call(function(){return o()}).start()})]})})},e.prototype.setFadeMask=function(t){this.fadeMask.opacity=t},e.prototype.fadeIn=function(t,e,n){return void 0===t&&(t=3),void 0===e&&(e=cc.Color.BLACK),void 0===n&&(n=255),a(this,void 0,void 0,function(){var o=this;return s(this,function(){return this.node.setSiblingIndex(-1),[2,new Promise(function(r){o.fadeMask.opacity=n,o.fadeMask.color=e,cc.tween(o.fadeMask).to(t,{opacity:0}).call(function(){return r()}).start()})]})})},e.prototype.enterStory=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){var n=t.storyMask.getComponent(cc.Animation);n.play("enter"),n.clear(),n.once(cc.Animation.EventType.FINISHED,function(){return e()})})]})})},e.prototype.exitStory=function(){return a(this,void 0,void 0,function(){var t=this;return s(this,function(){return[2,new Promise(function(e){var n=t.storyMask.getComponent(cc.Animation);n.play("exit"),n.clear(),n.once(cc.Animation.EventType.FINISHED,function(){return e()})})]})})},i([p(cc.Node)],e.prototype,"hurtMask",void 0),i([p(cc.Node)],e.prototype,"fadeMask",void 0),i([p(cc.Node)],e.prototype,"storyMask",void 0),i([p(cc.Node)],e.prototype,"guideMask",void 0),i([l],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../Managers/EffectManager":"EffectManager"}],SmashCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"b77c6w3FJFBNrjEu1IMgKPh","SmashCtrl");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../Managers/AM"),s=t("../Managers/PoolManager"),c=cc._decorator,u=c.ccclass,l=c.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anim",{get:function(){return this.getComponent(cc.Animation)},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this;a.AM.play(this.anim,"smash"),this.light.angle=360*Math.random(),this.anim.clear(),this.anim.once(cc.Animation.EventType.FINISHED,function(){s.PM.Put(t.node)})},i([l(cc.Node)],e.prototype,"light",void 0),i([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../Managers/AM":"AM","../Managers/PoolManager":"PoolManager"}],SoundManager:[function(t,e,n){"use strict";cc._RF.push(e,"74ec3w2rINIza+EZziVPaA0","SoundManager");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.SM=n.Sound=n.SoundType=void 0;var i,a=t("../Utils/CocosExtension"),s=cc._decorator;s.ccclass,s.property,function(t){t.Dig="dig",t.Dead="dead",t.Gold="gold",t.Lose="lose",t.Start="start",t.Progress="addProgress",t.Coin="\u91d1\u5e01",t.BGM="bgm",t.BGM2="bgm2"}(i=n.SoundType||(n.SoundType={}));var c=function(){};n.Sound=c;var u=function(){function t(){}return t.init=function(){this.registerSound(i.Dig),this.registerSound(i.Gold),this.registerSound(i.Dead),this.registerSound(i.BGM),this.registerSound(i.Lose),this.registerSound(i.Start),this.registerSound(i.BGM2),this.registerSound(i.Progress),this.registerSound(i.Coin)},t.registerSound=function(t,e){if(void 0===e&&(e=!1),!this.soundMap.has(t)){var n="sound/"+t,o=new c;o.path=n,o.isEffect=e,this.soundMap.set(t,o)}},t.getClip=function(t){return o(this,void 0,Promise,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return(e=this.audioMap.get(t))?[3,2]:null==(n=this.soundMap.get(t))?(console.error("type is not register: "+t+"  "+n+"  "+this.soundMap.size),[2]):[4,a.loadRes(cc.AudioClip,n.path)];case 1:e=o.sent(),o.label=2;case 2:return[2,e]}})})},t.switchMusic=function(t){this.banMusic=!t,this.banMusic?this.stopMusic():this.playMusic(this.curMusic)},t.switchSfx=function(t){this.banSfx=!t},t.playMusic=function(t,e){return void 0===e&&(e=1),o(this,void 0,void 0,function(){var n,o;return r(this,function(r){switch(r.label){case 0:return this.curMusic=t,this.banMusic?[2]:[4,this.getClip(t)];case 1:return n=r.sent(),cc.audioEngine.getState(this.musicMap.get(n))==cc.audioEngine.AudioState.PLAYING?[2]:(o=cc.audioEngine.play(n,!0,this.musicVolume*e),this.musicMap.set(n,o),[2])}})})},t.playEffect=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=1),o(this,void 0,void 0,function(){var o,i,a=this;return r(this,function(r){switch(r.label){case 0:return this.banSfx?[2]:(console.log("play sound effect :"+t+"  "+e+"  "+n),[4,this.getClip(t)]);case 1:return o=r.sent(),i=cc.audioEngine.play(o,e,this.effectVolume*n),this.effectMap.set(o,i),e||cc.audioEngine.setFinishCallback(i,function(){return a.effectMap.delete(o)}),[2]}})})},t.getMusicIsPlay=function(t){return o(this,void 0,void 0,function(){var e,n;return r(this,function(o){switch(o.label){case 0:return e=this.soundMap.get(t),[4,this.getClip(t)];case 1:return(n=o.sent())?e.isEffect?[2,this.effectMap.has(n)]:[2,this.musicMap.has(n)]:[2,!1]}})})},t.stop=function(t){return o(this,void 0,void 0,function(){var e,n,o;return r(this,function(r){switch(r.label){case 0:return e=this.soundMap.get(t),[4,this.getClip(t)];case 1:if(!(n=r.sent()))return[2];if(o=0,e.isEffect){if(!this.effectMap.has(n))return[2];o=this.effectMap.get(n),this.effectMap.delete(n)}else{if(!this.musicMap.has(n))return[2];o=this.musicMap.get(n),this.musicMap.delete(n)}return cc.audioEngine.stop(o),[2]}})})},t.stopMusic=function(){return o(this,void 0,void 0,function(){return r(this,function(){return this.musicMap.forEach(function(t){cc.audioEngine.stop(t)}),this.musicMap.clear(),[2]})})},t.stopEffect=function(){return o(this,void 0,void 0,function(){return r(this,function(){return this.effectMap.forEach(function(t){cc.audioEngine.stop(t)}),this.effectMap.clear(),[2]})})},t.stopEffectAt=function(t){return o(this,void 0,void 0,function(){var e;return r(this,function(n){switch(n.label){case 0:return[4,this.getClip(t)];case 1:return e=n.sent(),this.effectMap.forEach(function(t,n){n==e&&cc.audioEngine.stop(t)}),this.effectMap.clear(),[2]}})})},t.stopAll=function(){return o(this,void 0,void 0,function(){return r(this,function(){return cc.audioEngine.stopAll(),this.soundMap.clear(),this.musicMap.clear(),[2]})})},t.setVolume=function(t,e){var n=this.audioMap.get(t),o=this.soundMap.get(t);if(n){var r=0;if(o.isEffect){if(!this.effectMap.has(n))return;r=this.effectMap.get(n)}else{if(!this.musicMap.has(n))return;r=this.musicMap.get(n)}cc.audioEngine.setVolume(r,e)}},t.setAllVolume=function(t){this.setEffectVolume(t),this.setMusicVolume(t)},t.setMusicVolume=function(t){t<0&&(t=0),t>1&&(t=1),this.musicMap.forEach(function(e){cc.audioEngine.setVolume(e,t)}),this.musicVolume=t},t.setEffectVolume=function(t){t<0&&(t=0),t>1&&(t=1),this.effectMap.forEach(function(e){cc.audioEngine.setVolume(e,t)}),this.effectVolume=t},t.soundMap=new Map,t.audioMap=new Map,t.musicMap=new Map,t.effectMap=new Map,t.musicVolume=.8,t.effectVolume=.8,t.banMusic=!1,t.banSfx=!1,t.curMusic=i.BGM,t}();n.SM=u,cc._RF.pop()},{"../Utils/CocosExtension":"CocosExtension"}],StateCtrl:[function(t,e,n){"use strict";cc._RF.push(e,"a2ebeeWlDtPeryZ4Q/KlR+j","StateCtrl");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.curState=t,this.stateFuncMap=new Map,this.transFuncMap=new Map}return t.prototype.bindState=function(t,e){return this.stateFuncMap.set(t,e),this},t.prototype.bindTrans=function(t,e,n){return this.transFuncMap.set({start:t,end:e},n),this},t.prototype.is=function(t){return this.curState==t},t.prototype.refresh=function(){var t=this.stateFuncMap.get(this.curState);return t&&t(),this},t.prototype.switchTo=function(t){return o(this,void 0,void 0,function(){var e,n,o,i,a;return r(this,function(r){switch(r.label){case 0:return e=this.curState,n=t,o=null,i=!1,this.transFuncMap.forEach(function(t,r){i||r.start==e&&r.end==n&&(i=!0,o=t)}),a=this.stateFuncMap.get(t),o?[4,o()]:[3,2];case 1:r.sent(),r.label=2;case 2:return a&&a(),this.curState=t,[2]}})})},t.prototype.refreshTo=function(t){var e=this.stateFuncMap.get(t);e&&e(),this.curState=t},t}();n.default=i,cc._RF.pop()},{}],StorageManager:[function(t,e,n){"use strict";cc._RF.push(e,"edcafSZWqFGoIyr3eQ+17di","StorageManager");var o,r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.EStorageKey=void 0,function(t){t.version="version",t.coin="coin",t.ore="ore",t.exp="exp",t.homeLevel="homeLevel",t.gameLevel="gameLevel",t.homeMat="homeMat",t.maxScore="maxScore"}(o=n.EStorageKey||(n.EStorageKey={}));var a=function(){function t(){}return t.save=function(){var t=[];this.dataMap.forEach(function(e,n){t.push({key:n,val:e})}),localStorage.setItem("StorageData",JSON.stringify(t))},t.load=function(){return r(this,void 0,void 0,function(){var t,e,n;return i(this,function(){if(t=localStorage.getItem("StorageData"),e=t?JSON.parse(t):null,this.dataMap=new Map,e)for(n=0;n<e.length;n++)this.dataMap.set(e[n].key,e[n].val);return[2]})})},t.clear=function(){this.dataMap.clear()},t.newVer=function(){var t=localStorage.getItem(o.version);return t&&t!=2.6.toString()},t.Set=function(t,e){this.dataMap.set(t,e)},t.Clear=function(t){this.dataMap.delete(t)},t.Get=function(t,e){return void 0===e&&(e=null),this.dataMap.has(t)?this.dataMap.get(t):e},t.dataMap=new Map,t}();n.default=a,cc._RF.pop()},{}],TGATrack:[function(t,e,n){"use strict";cc._RF.push(e,"8187dJgF/VNxoPsuZxhmYlQ","TGATrack"),Object.defineProperty(n,"__esModule",{value:!0}),n.TK=n.ETrackType=void 0,function(t){t.Dig="dig",t.PassTask="passTask",t.PassRegion="passRegion",t.UnlockRegion="UnlockRegion",t.GameTime="GameTime",t.EnterGame="EnterGame"}(n.ETrackType||(n.ETrackType={}));var o=function(){function t(){}return t.track=function(t,e,n){void 0===e&&(e=HSDK.EventType.Track),void 0===n&&(n={})},t}();n.TK=o,cc._RF.pop()},{}],TaskProgressCom:[function(t,e,n){"use strict";cc._RF.push(e,"2433aQaJu1DhLJvI4NyrjAj","TaskProgressCom");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../Managers/GameManager"),a=t("../../Managers/SoundManager"),s=t("../FuiCom"),c=function(){function t(t){this.com=t}return t.prototype.destory=function(){a.SM.stopEffectAt(a.SoundType.Progress)},t.prototype.showAddExp=function(t){return o(this,void 0,void 0,function(){var e,n,c,u,l,p,f,h,d,m,y,g,v=this;return r(this,function(_){switch(_.label){case 0:if(e=this.com,n=i.default.Ins.exp-t,c=n,u=i.default.Ins.gameLv,c<0)for(l=i.default.Ins.gameLv-1;l>=1;l--)if(p=config.Game.getById(l).exp,(c+=p)>=0){u=l;break}return e.m_gameLv.text=u.toFixed(0),e.m_lvBar.value=c/config.Game.getById(u).exp*100,f=c,h=u,d=t,m=function(){return o(v,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(t){var n=config.Game.getById(h).exp,o=Math.min(n,f+d);e.m_lvBar.value=f,d=Math.max(0,d-o+f);var r=(o-f)/n/.5;f=o,e.m_lvBar.max=n,cc.tween(e.m_lvBar).to(r,{value:o}).call(function(){return t()}).start()})]})})},y=function(){return o(v,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return f>=config.Game.getById(h).exp?[4,s.default.awaitTrans(e.m_getReward)]:[3,5];case 1:return t.sent(),[4,this.showReward(h)];case 2:return t.sent(),h++,e.m_gameLv.text=h.toFixed(0),e.m_numSparkle.play(),[4,s.default.awaitTrans(e.m_rewardEnter)];case 3:return t.sent(),f=0,[4,g()];case 4:return t.sent(),[3,6];case 5:t.label=6;case 6:return[2]}})})},[4,(g=function(){return o(v,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return d?(e.m_shake.play(null,-1),a.SM.playEffect(a.SoundType.Progress,!0),[4,m()]):[3,3];case 1:return t.sent(),a.SM.stopEffectAt(a.SoundType.Progress),e.m_shake.stop(),[4,y()];case 2:return t.sent(),[3,4];case 3:t.label=4;case 4:return[2]}})})})()];case 1:return _.sent(),[2]}})})},t.prototype.showReward=function(){return o(this,void 0,void 0,function(){return r(this,function(){return[2]})})},t.prototype.refresh=function(t,e){this.com.m_gameLv.text=t.toFixed(0),this.com.m_lvBar.value=e/config.Game.getById(t).exp*100},t}();n.default=c,cc._RF.pop()},{"../../Managers/GameManager":"GameManager","../../Managers/SoundManager":"SoundManager","../FuiCom":"FuiCom"}],UINode:[function(t,e,n){"use strict";cc._RF.push(e,"477e9Mpw/5In5reNMOgTaWh","UINode"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],UI_Game:[function(t,e,n){"use strict";cc._RF.push(e,"0df37jq4p5LYYWk1FZfMvkh","UI_Game");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","Game")},e.prototype.onConstruct=function(){this.m_gameCom=this.getChildAt(0),this.m_scorePanel=this.getChildAt(1),this.m_enterRelife=this.getTransitionAt(0),this.m_exitRelife=this.getTransitionAt(1),this.m_enterScore=this.getTransitionAt(2),this.m_exitScore=this.getTransitionAt(3)},e.URL="ui://n4ubohg6ul651",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_Home:[function(t,e,n){"use strict";cc._RF.push(e,"d2058GVSpRB26iQXKvHzS5S","UI_Home");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","Home")},e.prototype.onConstruct=function(){this.m_env=this.getChildAt(0),this.m_slot=this.getChildAt(1),this.m_reward=this.getChildAt(3),this.m_unlockNum=this.getChildAt(4),this.m_lock=this.getChildAt(5),this.m_tipsLayer=this.getChildAt(6),this.m_backBtn=this.getChildAt(7),this.m_extraBtn=this.getChildAt(8),this.m_soldBtn=this.getChildAt(9),this.m_oreCom=this.getChildAt(10),this.m_coinCom=this.getChildAt(11),this.m_btn=this.getChildAt(12)},e.URL="ui://c43c7mr1ir8z0",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_Reward:[function(t,e,n){"use strict";cc._RF.push(e,"80b22PsNAdJKahc1WLkpVm1","UI_Reward");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Common","Reward")},e.prototype.onConstruct=function(){this.m_t0=this.getTransitionAt(0)},e.URL="ui://nt2s7wbbir8z3a",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_StartComWithAd:[function(t,e,n){"use strict";cc._RF.push(e,"d3d12/5lvdJ+pjSYsQvDonC","UI_StartComWithAd");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","StartComWithAd")},e.prototype.onConstruct=function(){this.m_homeBtn=this.getChildAt(0),this.m_gameBtn=this.getChildAt(1),this.m_collectBtn=this.getChildAt(2),this.m_sfxBtn=this.getChildAt(3),this.m_stopSfxBtn=this.getChildAt(4),this.m_stopMusicBtn=this.getChildAt(5),this.m_musicBtn=this.getChildAt(6),this.m_coin=this.getChildAt(7),this.m_ore=this.getChildAt(8),this.m_enter=this.getTransitionAt(0)},e.URL="ui://n4ubohg6ana51n",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_StartCom:[function(t,e,n){"use strict";cc._RF.push(e,"e9a3f7Rz4FKHIiz9EXWOiqE","UI_StartCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","StartCom")},e.prototype.onConstruct=function(){this.m_homeBtn=this.getChildAt(1),this.m_gameBtn=this.getChildAt(2),this.m_collectBtn=this.getChildAt(3),this.m_sfxBtn=this.getChildAt(4),this.m_stopSfxBtn=this.getChildAt(5),this.m_stopMusicBtn=this.getChildAt(6),this.m_musicBtn=this.getChildAt(7),this.m_coin=this.getChildAt(8),this.m_ore=this.getChildAt(9),this.m_enter=this.getTransitionAt(0)},e.URL="ui://n4ubohg6ir8z8",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_StartWithAd:[function(t,e,n){"use strict";cc._RF.push(e,"0ad13vZVfNGv54TN3Jhv3Mf","UI_StartWithAd");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","StartWithAd")},e.prototype.onConstruct=function(){this.m_com=this.getChildAt(0),this.m_otherCom=this.getChildAt(1)},e.URL="ui://n4ubohg6ana51j",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_Start:[function(t,e,n){"use strict";cc._RF.push(e,"a38f3gUlelI3p7NJr2r/mkU","UI_Start");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","Start")},e.prototype.onConstruct=function(){this.m_com=this.getChildAt(0),this.m_otherCom=this.getChildAt(1)},e.URL="ui://n4ubohg6ir8z1g",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_coinCom:[function(t,e,n){"use strict";cc._RF.push(e,"c2f3d77kX9HVIVMVF3Nvy+x","UI_coinCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Common","coinCom")},e.prototype.onConstruct=function(){this.m_add=this.getChildAt(1),this.m_num=this.getChildAt(2)},e.URL="ui://nt2s7wbbwgrd42",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_envNode:[function(t,e,n){"use strict";cc._RF.push(e,"c5d6aqrKfNKjqV/hKfaY53b","UI_envNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","envNode")},e.prototype.onConstruct=function(){this.m_env=this.getChildAt(0)},e.URL="ui://c43c7mr1ir8z1",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_gameCom:[function(t,e,n){"use strict";cc._RF.push(e,"2d47a6Ce9VAT6fN7DL7imlU","UI_gameCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","gameCom")},e.prototype.onConstruct=function(){this.m_left=this.getChildAt(0),this.m_right=this.getChildAt(1),this.m_layer=this.getChildAt(2)},e.URL="ui://n4ubohg6ir8z1d",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_lockNode:[function(t,e,n){"use strict";cc._RF.push(e,"f1a53FcUkJNMoO4Ng3NhhjZ","UI_lockNode");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","lockNode")},e.prototype.onConstruct=function(){this.m_lockNode=this.getChildAt(0),this.m_unlockBtn=this.getChildAt(1),this.m_mys=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)},e.URL="ui://c43c7mr1ir8z3",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_lvProgress:[function(t,e,n){"use strict";cc._RF.push(e,"a0cc7AA5ypK7Ib5xIwY6Og0","UI_lvProgress");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","lvProgress")},e.prototype.onConstruct=function(){this.m_lvBar=this.getChildAt(0),this.m_gameLv=this.getChildAt(2),this.m_shake=this.getTransitionAt(0),this.m_getReward=this.getTransitionAt(1),this.m_rewardEnter=this.getTransitionAt(2),this.m_numSparkle=this.getTransitionAt(3)},e.URL="ui://n4ubohg6ir8zr",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_oreCom:[function(t,e,n){"use strict";cc._RF.push(e,"52bb3n4BF9C5IEpyLc5jRqO","UI_oreCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Common","oreCom")},e.prototype.onConstruct=function(){this.m_num=this.getChildAt(2)},e.URL="ui://nt2s7wbbwgrd43",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_otherCom:[function(t,e,n){"use strict";cc._RF.push(e,"855248HpN1BvL180GUUgXRq","UI_otherCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","otherCom")},e.prototype.onConstruct=function(){this.m_mask=this.getChildAt(0),this.m_lvBar=this.getChildAt(1),this.m_modal=this.getChildAt(2),this.m_upgradeEnter=this.getTransitionAt(0),this.m_upgradeExit=this.getTransitionAt(1)},e.URL="ui://n4ubohg6ana51k",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_scorePanel:[function(t,e,n){"use strict";cc._RF.push(e,"d2f5cSLAztGZLInNFjMbrUy","UI_scorePanel");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Mini","scorePanel")},e.prototype.onConstruct=function(){this.m_hasRelife=this.getControllerAt(0),this.m_restartBtn=this.getChildAt(1),this.m_backBtn=this.getChildAt(2),this.m_relifeBtn=this.getChildAt(3),this.m_curScore=this.getChildAt(6),this.m_maxScore=this.getChildAt(7),this.m_addOre=this.getChildAt(9),this.m_lvBar=this.getChildAt(10)},e.URL="ui://n4ubohg6ir8z1e",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_soldBtn:[function(t,e,n){"use strict";cc._RF.push(e,"e7518kBcUJKOIyXE+SmsulH","UI_soldBtn");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","soldBtn")},e.prototype.onConstruct=function(){this.m_soldBtn=this.getChildAt(0)},e.URL="ui://c43c7mr1wgrdg",e}(fgui.GButton);n.default=i,cc._RF.pop()},{}],UI_soldCom:[function(t,e,n){"use strict";cc._RF.push(e,"316dct9tkVMcJzbXJUBsAG1","UI_soldCom");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","soldCom")},e.prototype.onConstruct=function(){this.m_soldBtn=this.getChildAt(0),this.m_oreNum=this.getChildAt(1),this.m_coinNum=this.getChildAt(2)},e.URL="ui://c43c7mr1wgrdh",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI_unlockBtn:[function(t,e,n){"use strict";cc._RF.push(e,"28046TDivNNW45pVIo+wlIg","UI_unlockBtn");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.createInstance=function(){return fgui.UIPackage.createObject("Home","unlockBtn")},e.prototype.onConstruct=function(){this.m_price=this.getChildAt(1)},e.URL="ui://c43c7mr1wgrdf",e}(fgui.GComponent);n.default=i,cc._RF.pop()},{}],UI:[function(t,e,n){"use strict";cc._RF.push(e,"8c851v3rvxDjpKDRFU5QH2I","UI"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Managers/EventCenter"),r=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t.getUI=function(t){return this.uiMap.get(t)},t.registUI=function(t,e){this.uiMap.set(t,e)},t.unregistUI=function(t){this.uiMap.delete(t)},t.clearUI=function(){this.uiMap.clear()},t.send=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];o.default.send("UIEvent_"+t,e)},t.on=function(t,e,n){o.default.on(t,e,n)},t.off=function(t,e,n){o.default.off(t,e,n)},t.instance=null,t.uiMap=new Map,t}();n.default=r,window.UI=r,cc._RF.pop()},{"../Managers/EventCenter":"EventCenter"}],U_Game:[function(t,e,n){"use strict";cc._RF.push(e,"9de904nkOBA6q+6lBskiYCl","U_Game");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../Game/Game"),u=t("../../Game/LevelCtrl"),l=t("../../Managers/EventCenter"),p=t("../../Managers/GameManager"),f=t("../../Utils/CocosExtension"),h=t("../Coms/TaskProgressCom"),d=t("../FuiCom"),m=cc._decorator,y=m.ccclass,g=(m.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTapRelife=!1,e}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pkg",{get:function(){return{pkgName:"Mini",comName:"Game"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),e.prototype.onFuiInit=function(){var t=this;this._view.m_gameCom.m_left.onClick(function(){c.Game.digLeft()}),this._view.m_gameCom.m_right.onClick(function(){c.Game.digRight()}),this._view.m_scorePanel.m_restartBtn.onClick(function(){c.Game.restart()}),this._view.m_scorePanel.m_backBtn.onClick(function(){c.Game.Ins.backToStart()}),this._view.m_scorePanel.m_relifeBtn.onClick(function(){t.onClickRelife()}),this.taskBar=new h.default(this._view.m_scorePanel.m_lvBar)},e.prototype.show=function(){t.prototype.show.call(this),l.default.on(u.ELevelEvent.UpdateEnergy,this.updateEnergy,this),l.default.on(u.ELevelEvent.UpdateLayer,this.updateLayer,this),l.default.on(u.ELevelEvent.GameAwait,this.gameAwait,this),l.default.on(u.ELevelEvent.GameOver,this.gameOver,this),l.default.on(u.ELevelEvent.GameStart,this.gameStart,this),this.gameAwait()},e.prototype.hide=function(){t.prototype.hide.call(this),l.default.off(u.ELevelEvent.UpdateEnergy,this.updateEnergy,this),l.default.off(u.ELevelEvent.GameOver,this.gameOver,this),l.default.off(u.ELevelEvent.GameStart,this.gameStart,this),l.default.off(u.ELevelEvent.GameAwait,this.gameAwait,this),l.default.off(u.ELevelEvent.UpdateLayer,this.updateLayer,this),this.taskBar.destory()},e.prototype.gameOver=function(){return a(this,void 0,void 0,function(){var t,e=this;return s(this,function(n){switch(n.label){case 0:return[4,f.delay(500)];case 1:return n.sent(),t=function(){return a(e,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return this.isTapRelife?[2]:[4,d.default.awaitTrans(this._view.m_exitRelife)];case 1:return e.sent(),this.isTapRelife?[2]:(this.taskBar.refresh(p.default.Ins.gameLv,p.default.Ins.exp),this.endGame(),this._view.m_scorePanel.visible=!0,[4,d.default.awaitTrans(this.view.m_enterScore)]);case 2:return e.sent(),t=c.Game.Ins.getExp(c.Game.map.curLayer,c.Game.Ins.oreNum),this.taskBar.showAddExp(t),[2]}})})},this.isTapRelife=!1,this._view.m_scorePanel.m_hasRelife.selectedIndex=c.Game.Ins.relifeRemain>0?1:0,c.Game.Ins.relifeRemain>0?(c.Game.Ins.relifeRemain--,this._view.m_enterRelife.play(),this._view.m_scorePanel.visible=!1,t()):t(),[2]}})})},e.prototype.endGame=function(){c.Game.Ins.endGame();var t=this._view.m_scorePanel;t.m_curScore.text=c.Game.map.curLayer.toFixed(0),t.m_maxScore.text=p.default.Ins.maxScore.toFixed(0),t.m_addOre.text="+"+c.Game.Ins.oreNum},e.prototype.onClickRelife=function(){this.isTapRelife=!0,this._view.m_scorePanel.visible=!1,c.Game.Ins.relifeRemain--,this.gameContinue()},e.prototype.gameStart=function(){this._view.m_scorePanel.visible=!1},e.prototype.gameContinue=function(){this._view.m_scorePanel.visible=!1,c.Game.Ins.gameContinue()},e.prototype.gameAwait=function(){this.view.m_gameCom.m_layer.text="-0m",this._view.m_scorePanel.visible=!1},e.prototype.updateEnergy=function(){},e.prototype.updateLayer=function(){var t=c.Game.map.curLayer;this.view.m_gameCom.m_layer.text="-"+t+"m"},i([y],e)}(d.default));n.default=g,cc._RF.pop()},{"../../Game/Game":"Game","../../Game/LevelCtrl":"LevelCtrl","../../Managers/EventCenter":"EventCenter","../../Managers/GameManager":"GameManager","../../Utils/CocosExtension":"CocosExtension","../Coms/TaskProgressCom":"TaskProgressCom","../FuiCom":"FuiCom"}],U_Home:[function(t,e,n){"use strict";cc._RF.push(e,"116028fzYVPI6rgz7ZRGmJY","U_Home");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(t){return function(e){return c([t,e])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../../Managers/EffectManager"),u=t("../../Managers/GameManager"),l=t("../../Managers/PoolManager"),p=t("../../Managers/Res"),f=t("../../Managers/SoundManager"),h=t("../../Managers/StorageManager"),d=t("../FuiCom"),m=cc._decorator,y=m.ccclass,g=(m.property,cc.v2(2,5)),v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unlockMat=[],e.priceMat=[],e.visibleMat=[],e.maxSoldNum=0,e}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cfg",{get:function(){return config.Home.getById(u.default.Ins.homeLv)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNextCfg",{get:function(){return!!config.Home.getById(u.default.Ins.homeLv+1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pkg",{get:function(){return{pkgName:"Home",comName:"Home"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"envLayer",{get:function(){return this._view.m_env},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lockLayer",{get:function(){return this._view.m_lock},enumerable:!1,configurable:!0}),e.prototype.onFuiInit=function(){var t=this;this._view.m_backBtn.onClick(function(){u.default.Ins.jumpToGame()}),this._view.m_soldBtn.onClick(this.onClickSold,this),this._view.m_extraBtn.onClick(this.onClickExtra,this),this._view.m_btn.onClick(function(){u.default.Ins.coin+=1e3,t.refresh()})},e.prototype.show=function(){t.prototype.show.call(this),this.refreshData()},e.prototype.refreshData=function(){var t=h.default.Get(h.EStorageKey.homeMat);this.lv=h.default.Get(h.EStorageKey.homeLevel,1),this.maxSoldNum=this.getNum(u.default.Ins.ore),this.priceMat=[],this.unlockMat=[],this.visibleMat=[];for(var e=0;e<5;e++){this.visibleMat.push([]);for(var n=0;n<6;n++)this.visibleMat[e].push(!1)}if(t)for(this.unlockMat=t,e=0;e<5;e++)for(this.priceMat.push([]),n=0;n<6;n++)this.priceMat[e].push(this.cfg.basePrice+this.cfg.priceAdd*this.distanceFromOrigin(e,n));else{for(e=0;e<5;e++){this.unlockMat.push([]),this.priceMat.push([]);for(n=0;n<6;n++)this.unlockMat[e].push(!1),this.priceMat[e].push(this.cfg.basePrice+this.cfg.priceAdd*this.distanceFromOrigin(e,n))}this.unlockMat[g.x][g.y]=!0}for(e=0;e<5;e++)for(n=0;n<6;n++)this.unlockMat[e][n]&&this.exploreNode(e,n);this.refresh()},e.prototype.exploreNode=function(t,e){for(var n=-1;n<=1;n++){var o=cc.v2(t+n,e);this.validCrd(o.x,o.y)&&(this.visibleMat[o.x][o.y]=!0),o=cc.v2(t,e+n),this.validCrd(o.x,o.y)&&(this.visibleMat[o.x][o.y]=!0)}},e.prototype.validCrd=function(t,e){return t>=0&&t<5&&e>=0&&e<6},e.prototype.distanceFromOrigin=function(t,e){return Math.abs(t-g.x)+Math.abs(e-g.y)},e.prototype.refresh=function(){for(var t=this,e=function(e){for(var o=function(o){var r=n.getLockNode(e,o);r.m_unlockBtn.clearClick(),r.m_unlockBtn.m_price.text="$"+n.priceMat[e][o],r.m_unlockBtn.m_price.color=n.priceMat[e][o]>u.default.Ins.coin?cc.Color.RED:cc.Color.WHITE,r.m_unlockBtn.onClick(function(){t.unlockNode(e,o)}),r.visible=!n.unlockMat[e][o],r.m_unlockBtn.visible=n.visibleMat[e][o],r.m_lockNode.url=n.getResUrl("lock"+n.lv);var i=n.crd2id(e,o);r.m_mys.visible=n.cfg.mysIdx.includes(i)},r=0;r<6;r++)o(r)},n=this,o=0;o<5;o++)e(o);this._view.m_reward.text="$"+300*u.default.Ins.homeLv,this._view.m_env.url=this.getResUrl("env"+((this.lv-1)%3+1)),this._view.m_oreCom.m_num.text=u.default.Ins.ore.toFixed(0),this._view.m_coinCom.m_num.text=u.default.Ins.coin.toFixed(0);var r=this._view.m_soldBtn.m_soldBtn;r.m_oreNum.text=this.maxSoldNum.toFixed(),r.m_coinNum.text=(.1*this.maxSoldNum).toFixed();var i=u.default.Ins.ore>=this.maxSoldNum?cc.Color.WHITE:cc.Color.RED;r.m_oreNum.color=i,r.m_coinNum.color=i;var a=0;this.unlockMat.forEach(function(t){return t.forEach(function(t){return t&&a++})}),this._view.m_unlockNum.text=a+"/30"},e.prototype.unlockNode=function(t,e){var n=this;if(!(this.priceMat[t][e]>u.default.Ins.coin)){u.default.Ins.coin-=this.priceMat[t][e],this.unlockMat[t][e]=!0;var o=l.PM.Get(p.default.Ins.getPrefab("unlockAnim"));o.setParent(this._view.m_tipsLayer.node);var r=this.getLockNode(t,e);o.position=cc.v3(r.x,-r.y,0);var i=o.getComponent(cc.Animation);i.play(),i.once(cc.Animation.EventType.FINISHED,function(){l.PM.Put(o),h.default.Set(h.EStorageKey.homeMat,n.unlockMat),n.exploreNode(t,e),n.refresh();for(var r=!0,i=0;i<5;i++)for(var a=0;a<6;a++)n.unlockMat[i][a]||(r=!1);r&&n.hasNextCfg&&n.upgrade()})}},e.prototype.upgrade=function(){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,c.default.Ins.maskCtrl.fadeOut(.2)];case 1:return t.sent(),u.default.Ins.homeLv++,h.default.Clear(h.EStorageKey.homeMat),this.refreshData(),[4,c.default.Ins.maskCtrl.fadeIn(.2)];case 2:return t.sent(),[2]}})})},e.prototype.getLockNode=function(t,e){var n=this.crd2id(t,e);return this._view.m_lock.getChild("n"+n)},e.prototype.onUILoaded=function(){t.prototype.onUILoaded.call(this)},e.prototype.crd2id=function(t,e){return 5*e+t},e.prototype.id2crd=function(t){return cc.v2(t%5,Math.floor(t/5))},e.prototype.onClickSold=function(){u.default.Ins.ore<=this.maxSoldNum||(u.default.Ins.coin+=.1*this.maxSoldNum,u.default.Ins.ore-=this.maxSoldNum,this.refreshData(),f.SM.playEffect(f.SoundType.Coin),h.default.save())},e.prototype.onClickExtra=function(){},e.prototype.getNum=function(t){if(t<10)return 10;for(var e=1;t>10*e;)e*=10;return e},i([y],e)}(d.default);n.default=v,cc._RF.pop()},{"../../Managers/EffectManager":"EffectManager","../../Managers/GameManager":"GameManager","../../Managers/PoolManager":"PoolManager","../../Managers/Res":"Res","../../Managers/SoundManager":"SoundManager","../../Managers/StorageManager":"StorageManager","../FuiCom":"FuiCom"}],U_StartWithAd:[function(t,e,n){"use strict";cc._RF.push(e,"1a0f54+051ChL62GfXEpxoA","U_StartWithAd");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Game/Game"),s=t("../../Managers/GameManager"),c=t("../Coms/TaskProgressCom"),u=t("../FuiCom"),l=cc._decorator,p=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.banClick=!1,e}return r(e,t),Object.defineProperty(e.prototype,"pkg",{get:function(){return{pkgName:"Mini",comName:"StartWithAd"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onFuiInit=function(){var t=this;this._view.m_com.m_gameBtn.onClick(function(){t.banClick||(t.banClick=!0,a.Game.Ins.jumpToStart())}),this._view.m_com.m_homeBtn.onClick(function(){t.banClick||(t.banClick=!0,a.Game.Ins.jumpToHome())}),this._view.m_com.m_collectBtn.onClick(function(){}),this._view.m_com.m_musicBtn.onClick(function(){s.default.Ins.switchMusic(),t.refresh()}),this._view.m_com.m_sfxBtn.onClick(function(){s.default.Ins.switchSFX(),t.refresh()}),this._view.m_com.m_stopMusicBtn.onClick(function(){s.default.Ins.switchMusic(),t.refresh()}),this._view.m_com.m_stopSfxBtn.onClick(function(){s.default.Ins.switchSFX(),t.refresh()}),this.taskBar=new c.default(this._view.m_otherCom.m_lvBar)},e.prototype.show=function(){t.prototype.show.call(this),this.banClick=!1,this._view.m_otherCom.m_modal.visible=!1,this._view.m_com.m_enter.play(),this.refresh()},e.prototype.hide=function(){t.prototype.hide.call(this),this.taskBar.destory()},e.prototype.refresh=function(){this._view.m_com.m_coin.m_num.text=s.default.Ins.coin.toFixed(0),this._view.m_com.m_ore.m_num.text=s.default.Ins.ore.toFixed(0),this._view.m_otherCom.m_lvBar.m_lvBar.value=s.default.Ins.exp/config.Game.getById(s.default.Ins.gameLv).exp*100,this._view.m_otherCom.m_lvBar.m_gameLv.text=s.default.Ins.gameLv.toFixed(0),this._view.m_com.m_stopMusicBtn.visible=!s.default.Ins.isActiveMusic,this._view.m_com.m_musicBtn.visible=s.default.Ins.isActiveMusic,this._view.m_com.m_sfxBtn.visible=s.default.Ins.isActiveSFX,this._view.m_com.m_stopSfxBtn.visible=!s.default.Ins.isActiveSFX},i([p],e)}(u.default));n.default=f,cc._RF.pop()},{"../../Game/Game":"Game","../../Managers/GameManager":"GameManager","../Coms/TaskProgressCom":"TaskProgressCom","../FuiCom":"FuiCom"}],U_Start:[function(t,e,n){"use strict";cc._RF.push(e,"7f992T6U5ZCdoIlfJmcu81g","U_Start");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../Game/Game"),s=t("../../Managers/GameManager"),c=t("../Coms/TaskProgressCom"),u=t("../FuiCom"),l=cc._decorator,p=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.banClick=!1,e}return r(e,t),Object.defineProperty(e.prototype,"pkg",{get:function(){return{pkgName:"Mini",comName:"Start"}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.onFuiInit=function(){var t=this;this._view.m_com.m_gameBtn.onClick(function(){t.banClick||(t.banClick=!0,a.Game.Ins.jumpToStart())}),this._view.m_com.m_homeBtn.onClick(function(){t.banClick||(t.banClick=!0,a.Game.Ins.jumpToHome())}),this._view.m_com.m_collectBtn.onClick(function(){}),this._view.m_com.m_musicBtn.onClick(function(){s.default.Ins.switchMusic(),t.refresh()}),this._view.m_com.m_sfxBtn.onClick(function(){s.default.Ins.switchSFX(),t.refresh()}),this._view.m_com.m_stopMusicBtn.onClick(function(){s.default.Ins.switchMusic(),t.refresh()}),this._view.m_com.m_stopSfxBtn.onClick(function(){s.default.Ins.switchSFX(),t.refresh()}),this.taskBar=new c.default(this._view.m_otherCom.m_lvBar)},e.prototype.show=function(){t.prototype.show.call(this),this.banClick=!1,this._view.m_otherCom.m_modal.visible=!1,this._view.m_com.m_enter.play(),this.refresh()},e.prototype.hide=function(){t.prototype.hide.call(this),this.taskBar.destory()},e.prototype.refresh=function(){this._view.m_com.m_coin.m_num.text=s.default.Ins.coin.toFixed(0),this._view.m_com.m_ore.m_num.text=s.default.Ins.ore.toFixed(0),this._view.m_otherCom.m_lvBar.m_lvBar.value=s.default.Ins.exp/config.Game.getById(s.default.Ins.gameLv).exp*100,this._view.m_otherCom.m_lvBar.m_gameLv.text=s.default.Ins.gameLv.toFixed(0),this._view.m_com.m_stopMusicBtn.visible=!s.default.Ins.isActiveMusic,this._view.m_com.m_musicBtn.visible=s.default.Ins.isActiveMusic,this._view.m_com.m_sfxBtn.visible=s.default.Ins.isActiveSFX,this._view.m_com.m_stopSfxBtn.visible=!s.default.Ins.isActiveSFX},i([p],e)}(u.default));n.default=f,cc._RF.pop()},{"../../Game/Game":"Game","../../Managers/GameManager":"GameManager","../Coms/TaskProgressCom":"TaskProgressCom","../FuiCom":"FuiCom"}],Widget:[function(t,e,n){"use strict";cc._RF.push(e,"d9a79+6FLJDsqmewicM2nQt","Widget");var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.privateNode=!0,e.nodesMap=new Map,e}var n;return r(e,t),n=e,e.prototype.getCom=function(t,e){var n=this.getNode(t);return n?n.getComponent(e):null},e.prototype.getNode=function(t){return this.nodesMap.get(t)||null},e.prototype.scan=function(){this.nodesMap=new Map,this.scanChild(this.node)},e.prototype.scanChild=function(t){var e=this;t.children.forEach(function(t){e.debugChild(t),t.name.length>0&&"_"==t.name[0]&&e.nodesMap.set(t.name,t);var o=t.getComponent(n);o&&o.privateNode||e.scanChild(t)})},e.prototype.debugChild=function(){},e.prototype.onLoad=function(){this.scan()},i([c],e.prototype,"privateNode",void 0),n=i([s],e)}(cc.Component);n.default=u,cc._RF.pop()},{}],arraycollection:[function(t,e,n){"use strict";cc._RF.push(e,"a6871f9r3xF449ZLRRhMgOx","arraycollection"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){if(this.sizeNum=0,"number"==typeof t){if(t<0)throw new Error("is no arrayList index : "+t);this.elementData=new Array(t)}else this.constructor(10)}return t.prototype.add=function(t,e){"number"==typeof t?(this.ensureExplicitVapacity(),this.rangeCheck(t),this.elementData.splice(t,0,e),this.sizeNum++):(this.ensureExplicitVapacity(),this.elementData[this.sizeNum]=t,this.sizeNum++)},t.prototype.get=function(t){return this.rangeCheck(t),this.elementData[t]},t.prototype.contains=function(t){return-1!=this.elementData.indexOf(t)},t.prototype.clear=function(){this.elementData=[],this.sizeNum=0},t.prototype.update=function(t,e){this.rangeCheck(t),this.elementData[t]=e},t.prototype.remove=function(t){for(var e=!1,n=0;n<this.sizeNum;n++)this.get(n)===t&&(e=this.removeAt(n));if(0==e)return console.log("is no object?"),e},t.prototype.removeAt=function(t){return this.elementData.splice(t,1),this.sizeNum--,!0},t.prototype.size=function(){return this.sizeNum},t.prototype.rangeCheck=function(t){if(t>=this.sizeNum||t<0)throw new Error("is no index---\x3e"+t)},t.prototype.ensureExplicitVapacity=function(){if(this.elementData.length<this.sizeNum+1){var t=this.elementData.length,e=t+(t>>1);this.elementData.length=e}},t}();n.default=o,cc._RF.pop()},{}],collectutil:[function(t,e,n){"use strict";cc._RF.push(e,"db5dflPoP9JCINuazUNBX1t","collectutil"),Object.defineProperty(n,"__esModule",{value:!0}),n.MULTIPLE_INSTANCES_FOUND_MSG=n.ITEM_NOT_FOUND_MSG=n.objCompare=n.Group=void 0;var o=t("./list");n.Group=function(t,e){this.list=new o.List,this.groups=t,this.list=new o.List(e)},n.objCompare=function(t,e){return t==e},n.ITEM_NOT_FOUND_MSG="Item does not exist.",n.MULTIPLE_INSTANCES_FOUND_MSG="Multiple instances of entity found.",cc._RF.pop()},{"./list":"list"}],config:[function(t,e){"use strict";var n;cc._RF.push(e,"6c0dbKNXW1FabOgJpe9NGoD","config"),function(t){(function(t){t.Hero="hero_",t.Objects="objects_"})(t.ThemeType||(t.ThemeType={}));var e=function(){function t(){}return t.getById=function(e){return t.map.get(e)},t.decode=function(e,n){for(var o in n||(t.list.length=0,t.map.clear()),e){var r=e[o],i=t.map.get(r.id),a=i||new t;Object.assign(a,r),i||(t.list.push(a),t.map.set(a.id,a))}},t.list=[],t.map=new Map,t}();t.Home=e;var n=function(){function t(){}return t.getById=function(e){return t.map.get(e)},t.decode=function(e,n){for(var o in n||(t.list.length=0,t.map.clear()),e){var r=e[o],i=t.map.get(r.id),a=i||new t;Object.assign(a,r),i||(t.list.push(a),t.map.set(a.id,a))}},t.list=[],t.map=new Map,t}();t.Game=n;var o=function(){function t(){}return t.getById=function(e){return t.map.get(e)},t.decode=function(e,n){for(var o in n||(t.list.length=0,t.map.clear()),e){var r=e[o],i=t.map.get(r.id),a=i||new t;Object.assign(a,r),i||(t.list.push(a),t.map.set(a.id,a))}},t.list=[],t.map=new Map,t}();t.HeroTheme=o;var r=function(){function t(){}return t.getById=function(e){return t.map.get(e)},t.decode=function(e,n){for(var o in n||(t.list.length=0,t.map.clear()),e){var r=e[o],i=t.map.get(r.id),a=i||new t;Object.assign(a,r),i||(t.list.push(a),t.map.set(a.id,a))}},t.list=[],t.map=new Map,t}();t.ObjectsTheme=r,t.decodeConfig=function(t,i){for(var a in void 0===i&&(i=!1),t)"home"===a&&e.decode(t[a],i),"game"===a&&n.decode(t[a],i),"heroTheme"===a&&o.decode(t[a],i),"objectsTheme"===a&&r.decode(t[a],i)},t.configList=["home","game","heroTheme","objectsTheme"]}(n||(n={})),window.config=n,cc._RF.pop()},{}],dictionary:[function(t,e,n){"use strict";cc._RF.push(e,"2f02cG+qlhIqY28MUCLdAuM","dictionary"),Object.defineProperty(n,"__esModule",{value:!0}),n.KeyValuePair=n.Dictionary=void 0;var o=t("./list"),r=t("./collectutil"),i=function(){function t(t){void 0===t&&(t=null),this.list=new Array,t&&(this.list=t)}return t.prototype.add=function(t,e){var n=new a(t,e);if(this.containsKey(t))throw"Duplicate key. Cannot add.";this.list.push(n)},t.prototype.addRange=function(t){var e=this;t.forEach(function(t){return e.add(t.key,t.value)})},t.prototype.clear=function(){this.list=new Array},t.prototype.remove=function(t){var e=new Array;this.list.forEach(function(n){t(n)||e.push(n)}),this.list=e},t.prototype.containsKey=function(t){return this.any(function(e){return r.objCompare(e.key,t)})},t.prototype.containsValue=function(t){return this.any(function(e){return r.objCompare(e.value,t)})},t.prototype.tryGetValue=function(t){var e=this.singleOrDefault(function(e){return r.objCompare(e.key,t)});return e?e.value:null},t.prototype.asEnumerable=function(){return this},Object.defineProperty(t.prototype,"length",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),t.prototype.elementAt=function(t){try{return this.list[t]}catch(e){return null}},t.prototype.any=function(t){if(!t)return this.list.length>0;for(var e=0;e<this.list.length;e++)if(t(this.list[e]))return!0;return!1},t.prototype.all=function(t){if(!t)return this.list.length>0;for(var e=0;e<this.list.length;e++)if(!t(this.list[e]))return!1;return!0},t.prototype.single=function(t){if(void 0===t&&(t=null),this.list.length<=0)throw r.ITEM_NOT_FOUND_MSG;if(t){var e=this.singleOrDefault(t);if(!e)throw r.ITEM_NOT_FOUND_MSG;return e}return this.list[0]},t.prototype.first=function(t){if(void 0===t&&(t=null),this.list.length<=0)throw r.ITEM_NOT_FOUND_MSG;if(t){var e=this.firstOrDefault(t);if(!e)throw r.ITEM_NOT_FOUND_MSG;return e}return this.list[0]},t.prototype.last=function(t){if(this.list.length<=0)throw r.ITEM_NOT_FOUND_MSG;if(t){var e=this.lastOrDefault(t);if(!e)throw r.ITEM_NOT_FOUND_MSG;return e}return this.list[this.list.length-1]},t.prototype.singleOrDefault=function(t){var e=new Array;if(this.list.filter(function(n){t(n)&&e.push(n)}),e.length>1)throw r.MULTIPLE_INSTANCES_FOUND_MSG;return e.length<=0?null:e[0]},t.prototype.firstOrDefault=function(t){for(var e=0;e<this.length;e++){var n=this.list[e];if(t(n))return n}return null},t.prototype.lastOrDefault=function(t){for(var e=this.length;e>=0;e--){var n=this.list[e-1];if(t(n))return n}return null},t.prototype.where=function(e){var n=new t;return this.list.filter(function(t){e(t)&&n.add(t.key,t.value)}),n},t.prototype.select=function(t){var e=new o.List;return this.forEach(function(n){return e.add(t(n))}),e},t.prototype.forEach=function(t){this.list.forEach(function(e){return t(e)})},t.prototype.toArray=function(){return this.list},t.prototype.join=function(t,e,n,r,i){void 0===i&&(i=!1);var a=new o.List;return this.list.forEach(function(o){var s=t.toArray().filter(function(t){return e(o)===n(t)});i&&s&&s.length<=0?a.add(r(o,null)):s.forEach(function(t){return a.add(r(o,t))})}),a},t.prototype.groupBy=function(t){var e={};this.list.forEach(function(n){var o=JSON.stringify(t(n));e[o]=e[o]||[],e[o].push(n)});var n=Object.keys(e).map(function(t){var n=t.substr(1,t.length-2);return new r.Group(n.split(","),e[t])});return new o.List(n)},t.prototype.orderBy=function(t){var e=this.list.sort(function(e,n){return t.compare(e,n)});return new o.List(e)},t.prototype.distinct=function(t){var e=new o.List;return this.forEach(function(n){e.forEach(function(o){t.equals(n,o)||e.add(n)})}),e},t.prototype.union=function(t){return this.addRange(t.toArray()),this},t.prototype.skip=function(e){return e>0?new t(this.list.slice(e,this.list.length-1)):this},t.prototype.take=function(e){return e>0?new t(this.list.slice(0,e)):this},t.prototype.sum=function(t){var e=0;return this.list.forEach(function(n){return e+=t(n)}),e},t.prototype.avg=function(t){return this.sum(t)/this.length},t.prototype.min=function(t){var e=0,n=0;return this.list.forEach(function(o){if(0==n)e=t(o);else{var r=t(o);r<e&&(e=r)}n++}),e},t.prototype.max=function(t){var e=0,n=0;return this.list.forEach(function(o){if(0==n)e=t(o);else{var r=t(o);r>e&&(e=r)}n++}),e},t.prototype.count=function(t){if(void 0===t&&(t=null),!t)return this.length;var e=0;return this.list.forEach(function(n){t(n)&&e++}),e},t}();n.Dictionary=i;var a=function(t,e){this.key=t,this.value=e};n.KeyValuePair=a,cc._RF.pop()},{"./collectutil":"collectutil","./list":"list"}],interfaces:[function(t,e,n){"use strict";cc._RF.push(e,"1f7fc41HCxMBJn+WQrBQgwb","interfaces"),Object.defineProperty(n,"__esModule",{value:!0}),cc._RF.pop()},{}],list:[function(t,e,n){"use strict";cc._RF.push(e,"95a9bbn+wdD7pQUKgZXRTU6","list"),Object.defineProperty(n,"__esModule",{value:!0}),n.List=void 0;var o=t("./collectutil"),r=function(){function t(t){void 0===t&&(t=null),this.list=new Array,t&&(this.list=t)}return t.prototype.add=function(t){this.list.push(t)},t.prototype.addRange=function(t){var e=this;t.forEach(function(t){return e.add(t)})},t.prototype.remove=function(t){var e=new Array;this.list.forEach(function(n){t(n)||e.push(n)}),this.list=e},t.prototype.clear=function(){this.list=new Array},t.prototype.asEnumerable=function(){return this},Object.defineProperty(t.prototype,"length",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),t.prototype.elementAt=function(t){try{return this.list[t]}catch(e){return null}},t.prototype.any=function(t){if(!t)return this.list.length>0;for(var e=0;e<this.list.length;e++)if(t(this.list[e]))return!0;return!1},t.prototype.all=function(t){if(!t)return this.list.length>0;for(var e=0;e<this.list.length;e++)if(!t(this.list[e]))return!1;return!0},t.prototype.single=function(t){if(void 0===t&&(t=null),this.list.length<=0)throw o.ITEM_NOT_FOUND_MSG;if(t){var e=this.singleOrDefault(t);if(!e)throw o.ITEM_NOT_FOUND_MSG;return e}return this.list[0]},t.prototype.first=function(t){if(void 0===t&&(t=null),this.list.length<=0)throw o.ITEM_NOT_FOUND_MSG;if(t){var e=this.firstOrDefault(t);if(!e)throw o.ITEM_NOT_FOUND_MSG;return e}return this.list[0]},t.prototype.last=function(t){if(void 0===t&&(t=null),this.list.length<=0)throw o.ITEM_NOT_FOUND_MSG;if(t){var e=this.lastOrDefault(t);if(!e)throw o.ITEM_NOT_FOUND_MSG;return e}return this.list[this.list.length-1]},t.prototype.singleOrDefault=function(t){var e=new Array;if(this.list.filter(function(n){t(n)&&e.push(n)}),e.length>1)throw o.MULTIPLE_INSTANCES_FOUND_MSG;return e.length<=0?null:e[0]},t.prototype.firstOrDefault=function(t){for(var e=0;e<this.length;e++){var n=this.list[e];if(t(n))return n}return null},t.prototype.lastOrDefault=function(t){for(var e=this.length;e>=0;e--){var n=this.list[e-1];if(t(n))return n}return null},t.prototype.where=function(e){var n=new t;return this.list.filter(function(t){e(t)&&n.add(t)}),n},t.prototype.select=function(e){var n=new t;return this.forEach(function(t){return n.add(e(t))}),n},t.prototype.forEach=function(t){this.list.forEach(function(e){return t(e)})},t.prototype.toArray=function(){return this.list},t.prototype.join=function(e,n,o,r,i){void 0===i&&(i=!1);var a=new t;return this.list.forEach(function(t){var s=e.toArray().filter(function(e){return n(t)===o(e)});i&&s&&s.length<=0?a.add(r(t,null)):s.forEach(function(e){return a.add(r(t,e))})}),a},t.prototype.groupBy=function(e){var n={};return this.list.forEach(function(t){var o=JSON.stringify(e(t));n[o]=n[o]||[],n[o].push(t)}),new t(Object.keys(n).map(function(t){var e=t.substr(1,t.length-2);return new o.Group(e.split(","),n[t])}))},t.prototype.orderBy=function(e){return new t(this.list.sort(function(t,n){return e.compare(t,n)}))},t.prototype.union=function(t){return this.addRange(t.toArray()),this},t.prototype.distinct=function(e){var n=new t;return this.forEach(function(t){n.forEach(function(o){e.equals(t,o)||n.add(t)})}),n},t.prototype.skip=function(e){return e>0?new t(this.list.slice(e,this.list.length-1)):this},t.prototype.take=function(e){return e>0?new t(this.list.slice(0,e)):this},t.prototype.sum=function(t){var e=0;return this.list.forEach(function(n){return e+=t(n)}),e},t.prototype.avg=function(t){return this.sum(t)/this.length},t.prototype.min=function(t){var e=0,n=0;return this.list.forEach(function(o){if(0==n)e=t(o);else{var r=t(o);r<e&&(e=r)}n++}),e},t.prototype.max=function(t){var e=0,n=0;return this.list.forEach(function(o){if(0==n)e=t(o);else{var r=t(o);r>e&&(e=r)}n++}),e},t.prototype.count=function(t){if(void 0===t&&(t=null),!t)return this.length;var e=0;return this.list.forEach(function(n){t(n)&&e++}),e},t}();n.List=r,cc._RF.pop()},{"./collectutil":"collectutil"}],platform:[function(t,e,n){"use strict";cc._RF.push(e,"e5badlA9gJEv5+BAixy/tU0","platform");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o};function r(t,e){try{var n=!1;(d||v||h)&&(n=!0),e&&n&&(e=JSON.stringify(e)),console.warn("[platform]: "+t+" ",e||"")}catch(o){console.warn("[platform]: "+t+" \u53c2\u6570\u6253\u5370\u5931\u8d25")}}function i(){r("current platform not support this api")}Object.defineProperty(n,"__esModule",{value:!0}),n.platformEnv=void 0,r("platformVersion","v1.6.5"),r("platformTagTime","2023-11-02");var a=!1;n.platformEnv={get isEgretGame(){return window&&window.egret&&window.egret.Capabilities},get isCocosGame(){return window&&window.cc&&window.cc.sys},get isCocos3(){return n.platformEnv.isCocosGame&&cc.sys.Platform&&cc.sys.Platform.WECHAT_GAME},get isDebug(){return!!a||!n.platformEnv.isCocosGame&&!!window.DEBUG},get isWX(){return n.platformEnv.isCocosGame?!n.platformEnv.isQQ&&(n.platformEnv.isCocos3?cc.sys.platform===cc.sys.Platform.WECHAT_GAME:cc.sys.platform===cc.sys.WECHAT_GAME):!!n.platformEnv.isEgretGame&&egret.Capabilities.runtimeType===egret.RuntimeType.WXGAME&&!n.platformEnv.isQQ},get isWXWindows(){var t,e,o=!1;return n.platformEnv.isWX&&(null===(e=null===(t=wx.getSystemInfoSync())||void 0===t?void 0:t.system.toLocaleLowerCase())||void 0===e?void 0:e.includes("windows"))&&(o=!0),o},get isWXMac(){var t,e,o=!1;return n.platformEnv.isWX&&(null===(e=null===(t=wx.getSystemInfoSync())||void 0===t?void 0:t.system.toLocaleLowerCase())||void 0===e?void 0:e.includes("mac"))&&(o=!0),o},get isTT(){return!!n.platformEnv.isCocosGame&&(cc.sys.platform===cc.sys.BYTEDANCE_GAME||cc.sys.platform===cc.sys.BYTEDANCE_MINI_GAME)},get isQQ(){return window&&window.qq&&"function"==typeof window.qq.login},get isHW(){return window&&window.qg&&"function"==typeof window.qg.gameLogin},get isNativeAPP(){return!n.platformEnv.isCocosGame&&!!n.platformEnv.isEgretGame&&egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE},get isNativeIOSAPP(){return!n.platformEnv.isCocosGame&&!!n.platformEnv.isEgretGame&&egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE&&"iOS"===egret.Capabilities.os},get isNativeAndroidAPP(){return!n.platformEnv.isCocosGame&&!!n.platformEnv.isEgretGame&&egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE&&"Android"===egret.Capabilities.os},get isH5(){return n.platformEnv.isCocosGame?n.platformEnv.isCocos3?cc.sys.platform===cc.sys.Platform.DESKTOP_BROWSER||cc.sys.platform===cc.sys.Platform.MOBILE_BROWSER:cc.sys.platform===cc.sys.DESKTOP_BROWSER||cc.sys.platform===cc.sys.MOBILE_BROWSER:!!n.platformEnv.isEgretGame&&egret.Capabilities.runtimeType===egret.RuntimeType.WEB},get isMixMicroEnd(){if(window&&window.navigator&&window.navigator.userAgent){var t=window.navigator.userAgent;return t.indexOf("mix_micro_end_ios")>-1||t.indexOf("mix_micro_end_android")>-1}return!1},get isH5PageGame(){return n.platformEnv.isH5&&!n.platformEnv.isMixMicroEnd&&!("undefined"!=typeof HSDK&&HSDK.isOverseaH5)},get isH5PageGameOversea(){return n.platformEnv.isH5&&!n.platformEnv.isMixMicroEnd&&"undefined"!=typeof HSDK&&HSDK.isOverseaH5},get isMixMicroEndAndroid(){return!!(window&&window.navigator&&window.navigator.userAgent)&&window.navigator.userAgent.indexOf("mix_micro_end_android")>-1},get isNonMixMicroEnd(){if(window&&window.navigator&&window.navigator.userAgent){var t=window.navigator.userAgent;return t.indexOf("HortorApp")>-1||t.indexOf("gcApp")>-1||t.indexOf("HortorApk")>-1||t.indexOf("gcApk")>-1}return!1}};var s=n.platformEnv.isCocosGame,c=n.platformEnv.isCocos3,u=n.platformEnv.isDebug,l=n.platformEnv.isWX,p=n.platformEnv.isTT,f=n.platformEnv.isQQ,h=n.platformEnv.isHW,d=n.platformEnv.isNativeAPP,m=n.platformEnv.isNativeIOSAPP,y=n.platformEnv.isNativeAndroidAPP,g=n.platformEnv.isH5,v=n.platformEnv.isMixMicroEnd,_=n.platformEnv.isH5PageGame,b=n.platformEnv.isMixMicroEndAndroid,w=n.platformEnv.isNonMixMicroEnd;r(s?"isCocosGame":"isEgretGame"),n.platformEnv.isCocosGame&&r(c?"cocos 3.0":"cocos 2.0"),u&&r("isDebug"),l&&r("isWX"),p&&r("isTT"),f&&r("isQQ"),h&&r("isHW"),d&&r("isNativeAPP"),m&&r("isNativeIOSAPP"),y&&r("isNativeAndroidAPP"),g&&r("isH5"),v&&r("isMixMicroEnd"),_&&r("isH5PageGame"),n.platformEnv.isH5PageGameOversea&&r("isH5PageGameOversea"),b&&r("isMixMicroEndAndroid"),w&&r("isNonMixMicroEnd"),u&&void 0===window.HSDK&&(window.HSDK={},["ENV","LogType","EventType","NoticeType","SMSCodeType","QQScene","WXScene","QQMicroAppType","WXMicroAppType","MicroProgramType","BindPlatformType","AddicationType","SwitchStatus","OverseasCustomerType","ApmPostArea","NotifyRepeatType","NetworkType"].forEach(function(t){window.HSDK[t]={}}));var P=new(function(){function t(){this.user={tryLogin:function(){return r("user.tryLogin"),u?Promise.resolve():d?HSDK.tryLogin():Promise.reject(null)},login:function(t){return r("user.login",t),u?Promise.resolve():l||p||_||f||h||n.platformEnv.isH5PageGameOversea?HSDK.login(t):v||d?HSDK.dialogLogin():Promise.reject(null)},onLogin:function(t){r("user.onLogin",t),(l||p||_||f||h||d||v||n.platformEnv.isH5PageGameOversea)&&HSDK.onLogin(t)},multiPlatformLogin:function(t){return r("user.multiPlatformLogin",t),u?Promise.resolve():d||v?HSDK.dialogLogin(t):_||n.platformEnv.isH5PageGameOversea?HSDK.login():Promise.reject(null)},logout:function(){return r("user.logout"),u?Promise.resolve():d||l||v||n.platformEnv.isH5PageGameOversea?HSDK.logout():Promise.reject(null)},weakLogin:function(t){if(r("user.weakLogin",t),u){var e=localStorage.getItem("userId");e||(e=(new Date).getTime()+"",localStorage.setItem("userId",e));var n={id:e,name:e,authed:!!localStorage.getItem("_fakeAuthed")};return Promise.resolve(n)}return new Promise(function(e,n){l||p||_||f||h?HSDK.weakLogin(t).then(e).catch(function(t){n(t)}):v||d?HSDK.dialogLogin(t).then(e).catch(function(t){n(t)}):n("\u767b\u5f55\u5931\u8d25, \u6682\u4e0d\u652f\u6301\u8be5\u5e73\u53f0")})},createInfoBtn:function(t){return r("user.createInfoBtn",t),l||f?HSDK.createUserInfoButton(t):null},setPlayerInfo:function(t){r("user.setPlayerInfo",t),(l||f||p||h||d||v)&&HSDK.setGameUserInfo(t)},updateInfo:function(t){return r("user.updateInfo",t),u?Promise.resolve():l||p||f||h?HSDK.updateUserInfo(t):Promise.reject(null)},getIsFromChannel:function(){return r("user.getIsFromChannel"),l?HSDK.getIsFromChannel():Promise.reject({isFromChannel:!1})},getFacebookUserInfo:function(){return r("user.getFacebookUserInfo"),d?HSDK.getFacebookUserInfo():Promise.reject(null)},facebookLogin:function(){return r("user.facebookLogin"),u?Promise.resolve():d||v?HSDK.facebookLogin():Promise.reject(null)},googleLogin:function(){return r("user.googleLogin"),u?Promise.resolve():y||v?HSDK.googleLogin():Promise.reject(null)},bindPlatform:function(t){return r("user.bindPlatform",t),u?Promise.resolve():d||v?HSDK.bindPlatform(t):Promise.reject(null)},visitorLogin:function(){return r("user.visitorLogin"),u?Promise.resolve():d||v?HSDK.visitorLogin():Promise.reject(null)},showProtocol:function(){return r("user.showProtocol"),u?Promise.resolve():h||f?HSDK.showProtocol():Promise.reject(null)},onNeedPrivacyAuth:function(t){return r("user.onNeedPrivacyAuth",t),u?Promise.resolve():l?HSDK.onNeedPrivacyAuth(t):Promise.reject(null)},openPrivacyContract:function(){return r("user.openPrivacyContract"),u?Promise.resolve():l?HSDK.openPrivacyContract():Promise.reject(null)},requirePrivacyAuth:function(){return r("user.requirePrivacyAuth"),u?Promise.resolve():l?HSDK.requirePrivacyAuth():Promise.reject(null)},showUserCenter:function(){if(r("user.showUserCenter"),d)return HSDK.showUserCenter({})}},this.share={shareMsg:function(t){return r("share.shareMsg",t),u?Promise.resolve():l||d||v||p||f||h?HSDK.share(t):Promise.reject(null)},onShare:function(t){r("share.onShare",t),(l||f)&&HSDK.onShare(t)},onTimeline:function(t){r("share.onTimeline",t),(l||f)&&HSDK.onShareTimeline(t)},getShareData:function(t){return r("share.getShareData",t),u?Promise.resolve():l||d||f||h?HSDK.getShareData(t):Promise.reject(null)},wxShareMicroApp:function(t){return r("app.wxShareMicroApp",t),u?Promise.resolve():d||w||v?HSDK.wxShareMicroApp(t):Promise.reject(null)},decodeShareTicket:function(){return r("share.decodeShareTicket"),u?Promise.resolve():l?HSDK.decodeShareTicket():Promise.reject(null)},overseaMultiPlatformShare:function(t){return r("share.overseaMultiPlatformShare",t),u?Promise.resolve():d||v?HSDK.overseaMultiPlatformShare(t):Promise.reject(null)}},this.loading={show:function(t){r("loading.show",t),l||d||v||p||f||h?HSDK.showLoading(t):i()},hide:function(){r("loading.hide"),l||d||v||p||f||h?HSDK.hideLoading():i()}},this.ui={showAlert:function(t){r("ui.showAlert",t),(m||y||n.platformEnv.isH5PageGameOversea)&&HSDK.showAlert(t)},exitApp:function(){r("ui.exitApp"),(d||v||h)&&HSDK.exitApp()},onShow:function(t){r("ui.onShow",t),(l||d||v||p)&&HSDK.onShow(t)},onHide:function(t){r("ui.onHide",t),(l||d||v||p)&&HSDK.onHide(t)},showUserProtocol:function(){return r("ui.showUserProtocol"),d||v?(HSDK.openWebview({isShowUserProtocol:!0}),Promise.resolve()):h?HSDK.showUserProtocol():Promise.resolve()},showPrivacyPolicy:function(){return r("ui.showPrivacyPolicy"),d||v?(HSDK.openWebview({isShowUserPrivacy:!0}),Promise.resolve()):h?HSDK.showPrivacyPolicy():Promise.resolve()},closePayModal:function(){return r("ui.closePayModal"),u?Promise.resolve():n.platformEnv.isWXWindows&&HSDK.closeWindowsPayModal?HSDK.closeWindowsPayModal():n.platformEnv.isWXMac&&HSDK.closeMacPayModal?HSDK.closeMacPayModal():Promise.reject(null)}},this.ad={video:{preload:function(t){return r("ad.video.preload",t),u?Promise.resolve():d||v||l||p||f||h?HSDK.preloadAd(t):w?HSDK.preloadVideoAd(t):Promise.reject(null)},show:function(t){r("ad.video.show",t),d||v||l||p||f||h?HSDK.showAd(t):w&&HSDK.showVideoAd(t)}},banner:{preload:function(t){return r("ad.banner.preload",t),l||d||v||p?HSDK.preloadAd(t):Promise.reject(null)},show:function(t){r("ad.banner.show",t),(l||d||v||p)&&HSDK.showAd(t)},hide:function(t){return r("ad.banner.hide",t),u?Promise.resolve():l||d||v||p?HSDK.hideAd(t):Promise.reject(null)}},interstitial:{preload:function(t){return r("ad.interstitial.preload",t),u?Promise.resolve():l||d||v||p?HSDK.preloadAd(t):Promise.reject(null)},show:function(t){r("ad.interstitial.show",t),(l||d||v||p)&&HSDK.showAd(t)}},custom:{preload:function(t){return r("ad.custom.preload",t),u?Promise.resolve():l?HSDK.preloadAd(t):Promise.reject(null)},show:function(t){r("ad.custom.show",t),l&&HSDK.showAd(t)},hide:function(t){return r("ad.hide",t),u?Promise.resolve():l?HSDK.hideAd(t):Promise.reject(null)}}},this.track={gameLog:function(t){r("track.gameLog",t),(l||d||v||w||p||f||h||n.platformEnv.isH5PageGameOversea)&&HSDK.gameTrack(t)},apmLog:function(t){r("track.apmLog",t),(l||p)&&HSDK.postAPMLog(t)},gsLog:function(t){r("track.gsLog",t),l&&HSDK.trackGS(t)},postGameInfo:function(t){r("track.postGameInfo",t),y?HSDK.postGameInfo(t):i()},setTGAAccountId:function(t){r("track.setTGAAccountId",t),d||v?HSDK.setTGAUserAccountId(t):i()}},this.gm={getSwitchData:function(t){return r("gm.getSwitchData",t),u?Promise.resolve():HSDK.checkSwitches(t)},getNotice:function(t){return r("gm.getNotice",t),u?Promise.resolve():d||v?HSDK.getNoticeInfo(t):l||w||p||f||h?HSDK.getNotice(t):Promise.reject(null)},getProtocolText:function(){return r("gm.getProtocolText"),u?Promise.resolve():h||l||p||f?HSDK.getProtocolText():Promise.reject(null)}},this.subscribe={requestMsg:function(t){return r("subscribe.requestMsg",t),u?Promise.resolve():l||p?HSDK.requestSubscribeMessage(t):Promise.reject(null)},getCount:function(){return r("subscribe.getCount"),u?Promise.resolve():l||p?HSDK.getSubscribeMessageCount():Promise.reject(null)},getHasSubscribedGameUpdate:function(){return r("subscribe.getHasSubscribedGameUpdate"),u?Promise.resolve():l?HSDK.getHasSubscribedGameUpdate():Promise.reject(null)},requestSubscribeGameUpdate:function(){return r("subscribe.requestSubscribeGameUpdate"),u?Promise.resolve():l?HSDK.requestSubscribeGameUpdate():Promise.reject(null)}},this.realName={getInfo:function(){return r("realName.getInfo"),u?Promise.resolve():d||v?HSDK.getRealNameInfo():Promise.reject(null)}},this.antiAddiction={listen:function(t){r("antiAddiction.listen",t),(d||v)&&HSDK.onAddictionQuit(t)}},this.apple={showComment:function(t){r("apple.showComment",t),m&&HSDK.showAppComment(t)},onPaySupplement:function(t){r("apple.onPaySupplement",t),m&&HSDK.onApplePaySupplement(t)},deleteAccount:function(){return r("apple.deleteAccount"),u?Promise.resolve():m?HSDK.deleteAppleAccount():Promise.reject(null)}},this.wall={getTaskList:function(t){return r("wall.getTaskList",t),u?Promise.resolve():l?HSDK.getTask(t):Promise.reject(null)},logOpenTaskPanel:function(){r("wall.logOpenTaskPanel"),l&&HSDK.logOpenTaskPanel()},goTask:function(t){return r("wall.goTask",t),u?Promise.resolve():l?HSDK.goTask(t):Promise.reject(null)},getAward:function(t){return r("wall.getAward",t),u?Promise.resolve():l?HSDK.getAward(t):Promise.reject(null)}},this.customer={openMiniApp:function(t){return r("customer.openMiniApp",t),u?Promise.resolve():l?HSDK.openCustomerMiniApp(t):Promise.reject(null)},openConversation:function(t){return r("customer.openConversation"),u?Promise.resolve():l?HSDK.openCustomerServiceConversation(t):Promise.reject(null)},createContactButton:function(t){return r("customer.createContactButton"),u?Promise.resolve():p?HSDK.createContactButton(t):Promise.reject(null)},getGSInfo:function(){return r("customer.getGSInfo"),u?Promise.resolve():l?HSDK.getGSInfo():Promise.reject(null)},jumpGSCustomer:function(){return r("customer.jumpGSCustomer"),u?Promise.resolve():l?HSDK.jumpGSCustomer():Promise.reject(null)},openOverseasCustomer:function(t){if(r("customer.openOverseasCustomer"),d)return HSDK.openOverseasCustomer(t)},onCustomerUnreadMsg:function(t){r("customer.onCustomerUnreadMsg"),d&&HSDK.onCustomerUnreadMsg(t)}},this.app={afReport:function(t){r("app.afReport",t),d&&HSDK.afReport(t)},getTranslateResult:function(t){return r("app.getTranslateResult",t),d?HSDK.getTranslateResult(t):Promise.reject(null)},open:function(t){r("app.open",t),(d||v)&&HSDK.openApp(t)},checkNotifyAuth:function(){return r("app.checkNotifyAuth"),d?HSDK.checkNotifyAuth():Promise.reject(null)},getNotifyData:function(t){return r("app.getNotifyData",t),u?Promise.resolve():d?HSDK.getNotifyData(t):Promise.reject(null)},pushLocalNotify:function(t){r("app.pushLocalNotify",t),d&&HSDK.pushLocalNotify(t)},removeLocalNotify:function(t){r("app.removeLocalNotify",t),d&&HSDK.removeLocalNotify(t)},openNotifyAction:function(){r("app.openNotifyAction"),d&&HSDK.openNotifyAction()},stopLocalNotifyAction:function(){r("app.stopLocalNotifyAction"),d&&HSDK.stopLocalNotifyAction()},stopNotifyAction:function(){r("app.stopNotifyAction"),m&&HSDK.stopNotifyAction()},getNotifyWithLaunch:function(t){r("app.getNotifyWithLaunch",t),m&&HSDK.getNotifyWithLaunch(t)},syncWxUserInfo:function(){return r("app.syncWxUserInfo"),u?Promise.resolve():d||v?HSDK.syncWxUserInfo():Promise.reject(null)},showComment:function(t){r("app.showComment",t),(d||h||l)&&HSDK.showAppComment(t)},openWebview:function(t){r("app.openWebview",t),(d||v)&&HSDK.openWebview(t)},checkRunningProcess:function(t){return r("app.checkRunningProcess",t),u?Promise.resolve():y||v?HSDK.checkRunningProcess(t):Promise.reject(null)},deleteAccount:function(){return r("app.deleteAccount"),u?Promise.resolve():m?HSDK.deleteAppleAccount():h?HSDK.deleteAccount():Promise.reject(null)},createDesktopIcon:function(t){return r("app.createDesktopIcon",t),u?Promise.resolve():h?HSDK.createDesktopIcon(t):Promise.reject(null)},getDesktopIcon:function(){return r("app.getDesktopIcon"),u?Promise.resolve():h?HSDK.getDesktopIcon():Promise.reject(null)}},this.web={createShortcut:function(t){return r("h5.createShortcut",t),u?Promise.resolve():n.platformEnv.isH5PageGameOversea?HSDK.createShortcut(t):Promise.reject(null)}},this.file={saveImage:function(t){return r("file.saveImage",t),u?Promise.resolve():d||v||w||l||f||p?HSDK.saveImage(t):Promise.reject(null)},getPath:function(t){return r("file.getPath",t),u?Promise.resolve():y||b?HSDK.getFilePath(t):Promise.reject(null)},download:function(t){r("file.download",t),(y||b)&&HSDK.downloadFile(t)}},this.device={getBrightness:function(){return r("device.getBrightness"),u?Promise.resolve():d||l||p?HSDK.getBrightness():Promise.reject(null)},setBrightness:function(t){return r("device.setBrightness",t),u?Promise.resolve():d||l||p?HSDK.setBrightness(t):Promise.reject(null)},getBattery:function(){return r("device.getBattery"),u?Promise.resolve():d||l||p?HSDK.getBattery():Promise.reject(null)},getNetworkType:function(){return r("device.getNetworkType"),u?Promise.resolve():d||l||p?HSDK.getNetworkType():Promise.reject(null)},setClipboard:function(t){if(r("device.setClipboard"),d||v||h)return HSDK.setClipboard(t)},getClipboard:function(){return r("device.getClipboard"),h?HSDK.getClipboard():Promise.resolve()},setKeepScreenOn:function(t){return u?Promise.resolve():d||l||p||v?HSDK.setKeepScreenOn(t):Promise.reject(null)},setVibrate:function(t){return u?Promise.reject():d||v||f||l||p?HSDK.setVibrate(t):Promise.reject(null)},onBackBtnTap:function(t){return!!y&&HSDK.onBackBtnTap(t)},selectLocalImage:function(){return u?Promise.resolve():d?HSDK.selectLocalImage():Promise.reject(null)}},this.tool={getGameRecorderManager:function(){return u?Promise.resolve():p?HSDK.getGameRecorderManager():Promise.reject(null)},openWebview:function(){return HSDK.openWebview()},getSecretKey:function(t){return r("tool.getSecretKey"),u?Promise.resolve():l||d?HSDK.getKeyByKeyType(t):Promise.reject(null)},getPayCurrency:function(t){return r("tool.getPayCurrency"),u?Promise.resolve():d?HSDK.getPayCurrency(t):Promise.reject(null)},debugInfo:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r("tool.debugInfo"),l)return HSDK.debug.apply(HSDK,o([t],e))}},this.miniProgram={checkIsAddedToMyMiniProgram:function(){return r("miniProgram.checkIsAddedToMyMiniProgram"),l?HSDK.checkIsAddedToMyMiniProgram():Promise.reject(null)},checkGift:function(){return r("miniProgram.checkGift"),l?HSDK.checkGift():Promise.resolve(!1)},showGift:function(t){return r("miniProgram.showGift"),l?HSDK.showGift(t):Promise.reject(null)},payGift:function(t){return r("miniProgram.payGift"),l?HSDK.payGift(t):Promise.reject(null)}},this.brandWall={getGameList:function(){return r("brandWall.getGameList"),u?Promise.resolve():l?HSDK.getBrandWallList():Promise.reject(null)},jumpGame:function(t){return r("brandWall.jumpGame",t),u?Promise.resolve():l?HSDK.jumpBrandWallGame(t):Promise.reject(null)},trackShow:function(){r("brandWall.trackShow"),u||l&&HSDK.brandWallShowTrack()}}}return t.prototype.init=function(t){return r("init",t),t.isPlatformForceDebug&&(a=!0,u=!0),u?Promise.resolve():HSDK.init(t)},t.prototype.getHTLauchOptions=function(){return r("getHTLauchOptions"),l||p?HSDK.getHTLauchOptions():null},t.prototype.pay=function(t){return r("pay"),u?Promise.resolve():y||b?r("android pay",t)||HSDK.dialogPay(t):m?r("ios pay",t)||HSDK.applePay(t):l||h?r("wx | hw pay",t)||HSDK.pay(t):w?r("h5 pay",t)||HSDK.pay(t):p?r("tt pay",t)||HSDK.pay(t):f?r("qq pay",t)||HSDK.pay(t):_?r("h5-public pay",t)||HSDK.pay(t):n.platformEnv.isH5PageGameOversea?r("h5-oversea pay",t)||HSDK.pay(t):Promise.reject(null)},t.prototype.closeWindowsPayModal=function(){return r("closeWindowsPayModal"),u?Promise.resolve():n.platformEnv.isWXWindows?HSDK.closeWindowsPayModal():Promise.reject(null)},t.prototype.resetSDK=function(){r("resetSDK"),u||p&&HSDK.resetSDK()},t}());n.default=P,cc._RF.pop()},{}]},{},["Const","BackpackCtrl","CameraCtrl","Crack","DecAnimNode","DecHeroNode","FloatItem","Loading","RewardCtrl","SceneCtrl","ScreenEffectMask","SmashCtrl","Factory","Block","Game","LevelCtrl","MapCtrl","BlockObj","EmptyObj","LavaObj","OreObj","PlayerCtrl","HomeCtrl","AnimatorAnimation","AnimatorCustomization","AnimatorDragonBones","AnimatorSpine","AnimatorSpineSecondary","AnimatorBase","AnimatorCondition","AnimatorController","AnimatorParams","AnimatorState","AnimatorStateLogic","AnimatorTransition","HSDK.survey","platform","Main","AM","EffectManager","EventCenter","GameManager","PoolManager","Res","SoundManager","StorageManager","TGATrack","CocosUINode","TaskProgressCom","U_Game","U_Home","U_Start","U_StartWithAd","FuiCom","UI","UINode","Widget","CocosExtension","CocosFixed","NodeLocker","NumberFormatter","StateCtrl","arraycollection","collectutil","dictionary","interfaces","list","config","CommonBinder","UI_Reward","UI_coinCom","UI_oreCom","HomeBinder","UI_Home","UI_envNode","UI_lockNode","UI_soldBtn","UI_soldCom","UI_unlockBtn","MiniBinder","UI_Game","UI_Start","UI_StartCom","UI_StartComWithAd","UI_StartWithAd","UI_gameCom","UI_lvProgress","UI_otherCom","UI_scorePanel"]);